2022/09/05
	EditMot 1.0.0.28に向けて

	ChaVecCalcにリファクタリング用の関数を追加
		ChaVector3クラスに回転、スケール、移動行列を返す関数追加
		ChaMatrixクラスにChaVector3などを渡して回転、スケール、移動行列をセットする関数追加


2022/09/01
	EditMot 1.0.0.27 RC2

	０フレーム編集
		０フレーム編集はモデルの最初のモーションの０フレームに対して行う仕様
		０フレーム編集して保存したfbxをMayaで読み込みOK
		０フレーム編集結果をモーション新規作成時に適用
		リターゲット時にモデル側０フレームアニメーション考慮、結果をMayaで確認OK
		Tool Windowに "Edit 0 Frame" ボタンを追加

	ToolWindowの補間ボタン修正
		補間の効果がオイラーグラフと１階層分ずれていたのを修正
		
	リターゲット処理改良
		リターゲットファイル(*.rtg)を読み込む際、ジョイント名に"_Joint"が入っている場合と入っていない場合両方検索
			"_Joint" はジョイント名の予約語扱い
		リターゲットウインドウで対応ジョイントを指定した後にNotSetに指定を戻せるようにした

	サンプル追加
		Testディレクトリ

	バインドポーズの無いfbx読み込み改善

	Rokokoなどのバインドポーズの無いfbxの保存は改変せずに元のfbxをコピーするだけに。
		(リターゲットは出来ます。)


2022/08/22
	EditMot 1.0.0.26

	(訳あって)ソフト名を　EditMot　に変更


	物理シミュレーションの高速化
		物理IKだけで必要な処理を条件文内に入れた

	ゲームパッドをつないでいないときのファイルダイアログをエクスプローラ形式に
		どうしても長いファイル名があるから


	姿勢計算のマルチスレッド化(プレビュー時の描画速度の高速化)
		3Dウインドウに新たにhigh rpmチェックボックスとUpdateMatrixThreadsスライダーが加わりました
		high rpmチェックボックスとUpdateMatrixThreadsスライダーはペアで使います。

		UpdateMatrixThreadsスライダーは
		UpdateMatrix計算時のスレッドの数を指定するためのもので１から４まであります
		スレッドの数は１モデルあたりのスレッド数です

		high rpmはスレッドを高回転させるかどうかを指定します
		スレッド数を増やすだけでは表示速度は速くならないことが多い
		スレッド数を適切に増やしてhigh rpmをオンにすると高速化することが多い
		高速化する場合にはその分CPUの稼働率は高くなります

		制限角度(LimitEul)をオンにした場合についても最適化済


	Fbxアニメーション読み込みのマルチスレッド化
		テスト例：１０秒かかっていた読み込みが６秒になったのを確認
		

	fps表示を60回描画時間の平均値に


	リターゲットウインドウを分かりやすく
		適用される側のモデルの選択ボタンをやめて現在選択中モデルを自動セット


	サンプルのyuriちゃんのTポーズを修正して腕が閉じすぎないように
		Test/Test20220818_C6


	C++14標準からC++20標準にバージョンアップ
		ただしEffect11はC++17


2022/08
	MotionBrushFree 1.0.0.25

	フリーウェア化して名前をMotionBrushからMotionBrushFreeに変更


	Toolウインドウの補間ボタンのバージョンアップ
		モーションの補間時に選択中のブラシカーブを適用するように。
	
	1メッシュに付き複数マテリアルが指定されていても読み込めるように。
		VRoidのvrmファイルから変換したfbxファイルも読み込めるように。
		VRoid1.4.1以降のHair1からHair6のジョイントに自動で物理シミュ設定。

	エンドジョイントも物理シミュ対応
		エンドジョイントが頂点に対して影響度を持っている場合にも物理シミュが機能。


	商用モーキャプfbxデータ(RokokoMotionLibrary)の読み書き編集リターゲットに対応
		バインドポーズを持たないfbxの読み込みを　更に　改善
			０フレームにアニメーションが設定してあってもリターゲット可能
			モーション編集も通常通り行うことが出来る


	Punch1ブラシとPunch2ブラシのデバッグ
		
	RigidParams設定ウインドウ
		rotSpring CustomValueの最小値(10.0)を2.0に変更

	Testフォルダにサンプル追加
		Test/VRoid_131追加
			VRoidから変換したfbxのサンプル。chaファイルをオープンしてご覧ください。

		Test/RetargetSettingFileExample/vroid141_bvh131.rtg追加
			VRoidから変換したfbxに対するリターゲット設定ファイルとして使用ください

	FileメニューのOpen時のダイアログ改良
		履歴１０件を２０件に変更
		Filter *.chaボタンとFilter *.fbxボタンを追加。履歴に拡張子フィルター。

	重要文字を赤で
		タイムラインのテキストカラー
		リターゲットウインドウのテキストカラー

	ツールウインドウの補間ボタンを３種類に増
		(ボーンごとの補間が可能に)
		補間(all)
		補間(one)
		補間(deeper)
		

	VCランタイムを実行ファイル自身に持つようにビルド
		VC_redist.x64.exeをインストールしなくても動くように


2022/05/18
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24


	LimitEulはデフォルトでオフ
		オンにする場合はBasicSettings2を押してからLimitEulにチェックを入れる


2022/05/17　その２
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24


	プレビュー時の事前計算はLimitEulにチェックを入れているときだけ行う

	
2022/05/17
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24

	オイラー角計算修正
		オイラー角90度をまたぐときの問題が解決
		(キャプチャ精度依存やノイズ依存の乱れは直りません)

		ほとんどすべての機能に関係します
		bvh2fbxなどの結果にも影響します		
		
	プレビュー時の事前計算部分ThreadFunc_CalcLimitedWM部分をif(0)に
		制限角度有効時にどうしても遅い場合にThreadFunc_CalcLimitedWM部分をif(1)にすること
		

2022/01/11
	MotionBrush ver1.0.0.23RC6(リリース候補6)


	リターゲット後に物理シミュをすると重くてカクカクして揺れない不具合を修正
		短いモーションが混ざっている場合に頻繁にシミュ用オブジェクト作成処理が走ることが原因だったので対応


	制限角度変更時に事前計算のフラグがクリアされていなかったのを修正


	制限角度事前計算中は表示しないように

	指をリグで開閉していると動かなくなる部分があることに対してトラブルシューティング追加
		WallScrapingIKをオンにすると解決します


	リドゥー時にフレーム選択範囲がタイムラインの中央に来ない不具合修正
		Ctrl + Shiftがマウス中ボタン機能に割り当てられていたのを止めた

	

	テスト項目
	bvh2Fbx batchテスト済
	リターゲットバッチテスト済
	壁すりIK(WallScrapingIK)オンオフでIKテスト済
	制限角度有り無しモーション再生チェック済
	物理シミュテスト済
	保存読み込みテスト済
	スケール保存読み込みテスト済
	平滑化テスト済
	補間テスト済
	物理ベイクテスト(PhysRec)済	
	剛体パラメータ設定テスト済
	モーションから制限角度設定テスト済
	制限角度リセットテスト済
	コピーペーストテスト済
	操作対象ボーン設定後のコピーペーストテスト済
	リグ操作保存読み込みテスト済
	リファレンスポーズ軌跡表示機能テスト済
	アンドゥリドゥテスト済
	アンドゥ履歴ボタンテスト済
	ゲームパッド操作テスト済
	複数キャラ読み込み操作テスト済
	MotionBrushC4.exeテスト済


	(最新exeは付いていません)
	

2022/01/09
	MotionBrush ver1.0.0.23RC5(リリース候補5)


	新規にリグを作成してもジョイント名が緑色にならない不具合修正
	

	カスタムリグを右クリックメニューから削除(無効化)出来るように


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2022/01/07
	MotionBrush ver1.0.0.23RC2(リリース候補２)

	コピー履歴ダイアログでコピーを選択後にOKボタンを押さなくても選択を反映

	４KTV表示時のGUIを画面中央寄せ

	WallScrapingIKはデフォルトではオフに

	オイラーグラフにおけるモーションブラシ表示の範囲を-1から+1までに

	GUIフォントのWを少し修正

	サイドウインドウの上部の４つのメニューボタンを使用頻度の高い４つに選定しなおし

	階層エディタにおいてRigが設定してあるジョイント名は緑色で表示

	初回クリック時にブレットオブジェクト作成せずにモデル選択時とFBX読み込み時に作成

	プロジェクトファイル(*.cha)でモデルの位置を設定している場合のマニピュレータ位置計算修正	

	コピーライト更新
		2021-->2022
		info@ochakkolab.moo.jp-->info@ochakkolab.jp
		https://moo-ochakkolab.ssl-lolipop.jp-->https://ochakkolab.jp


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2022/01/06
	ver1.0.0.23へ向けて

	プレビュー開始時の制限角度事前計算をマルチスレッド化


	バッチ処理のマルチスレッド処理のリファクタリング


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2022/01/05_2
	ver1.0.0.23へ向けて

	アンドゥーリドゥ(Ctrl + Z, Ctrl + Shift + Z)時にフレーム選択を復元


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2022/01/05
	ver1.0.0.23へ向けて

	タイムライン上の選択位置がセンターになるようにcalcShowPosTime
			
	プレイヤーボタンの中の選択範囲履歴ボタンを押して選択範囲復元時に
	選択フレームがタイムラインの中央に来るように

	MotionBrushC4.exeの終了時のお行儀を良く
		4KTVに接続していない場合の終了時にメッセージを表示
		終了時の処理を修正して起動していた分のMotionBrush*.iniファイルが出力されるように修正


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/12/25
	MotionBrush 1.0.0.23に向けて
	

	初回の物理シミュレーションが乱れる不具合を修正	


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/12/24
	MotionBrush 1.0.0.22DX2(特別版)
	
	久しぶりに１２キャラを読み込んで再生したら遅かったので高速化

		ボトルネック特定
		UpdateMatrix内で姿勢に制限角度を適用している部分が遅かった
		制限角度をダーティフラグ付きで事前計算
		再生ボタンを押したときとBtStartボタンを押したときに事前計算してから再生することで再生が速い
		２回目以降の再生は事前計算も速い
		こちらの環境では２倍速から３倍速に高速化


	タイムラインのアップデートはマルチスレッドに


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/12/09
  Information
　　物理ブラシについてのメモ
　　https://ochakkolab.jp/diary_win.html#MotionBrush_20211209_1

2021/12/08
  Information
    MotionBrush 1.0.0.22
    1.0.0.1, 1.0.0.7に続く３度目の完成版公開開始！！
    Vector様のサイトにて配布中
　  https://www.vector.co.jp/soft/winnt/art/se523002.html


  　日記更新
　  カスタムリグについてメモ
  　https://ochakkolab.jp/diary_win.html#MotionBrush_20211208_1

  　おちゃっこLAB
    https://ochakkolab.jp/

    おちゃっこLABのMameBake3Dのページ
    https://ochakkolab.jp/LABMenu/MameBake3D.html

2021/12/06
	Information
	日記：アンドゥとリドゥについてメモ
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211206_1

2021/12/05
	Information
	日記：制限角度の設定と制限角度下でのIKについてメモ
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211205_1

2021/12/03_3
	MotionBrushはver1.0.0.7に続きver1.0.0.22で２回目の完成！！
	お疲れさまでした！！
	やること候補リストは増えていますが
	致命的エラーがみつからなければ対応しない可能性
	動画や日記は続く予定

	Information
	  MotoinBrush 1.0.0.22実行ファイル2021/12/08夕方公開予定
	　(現在ver1.0.0.21公開中)
	  https://www.vector.co.jp/soft/winnt/art/se523002.html

	  日記：Unity3DとVRoid正式版との連携方法について
	  https://ochakkolab.jp/diary_win.html#MotionBrush_20211114

	  日記：コピー履歴機能の使い方メモ
	  https://ochakkolab.jp/diary_win.html#MotionBrush_20211203_1

	  おちゃっこLAB　MotionBrush(MameBake3D)のページ
	  https://ochakkolab.jp/LABMenu/MameBake3D.html


2021/12/03
	MotoinBrush 1.0.0.22正式版

	iniファイルにロード時とセーブ時のマテリアル倍率項目を追加

	Documents/TroubleShootingフォルダにドキュメント追加
		DifferenceMaterialBetweenMotionBrushAndMaya.docx


	サンプルマテリアル調整


	基本機能のテスト済


	(最新exeは付いていません)


2021/12/02_2
	1.0.0.22RC8

	リグダイアログを開いたままリグを操作してからダイアログのApplyボタンを押すと
	異なるリグに保存することがある不具合修正


	サンプルの手のリグの修正


	サンプルの手の制限角度の修正


	GUIプレートのフォント統一(前回更新時の残りのものも作り直し)	


	Documents/TroubleShootingフォルダにドキュメント追加
		ACaseNotMoveToZeroFrameThoughRollMouseWheelToZeroframe.docx
		ACaseNotRestoreSelectionOfFramesAfterUndoOperation.docx


	bvh2Fbx batchテスト済
	リターゲットバッチテスト済
	壁すりIK(WallScrapingIK)オンオフでIKテスト済
	制限角度有り無しモーション再生チェック済
	物理シミュテスト済
	保存読み込みテスト済
	スケール保存読み込みテスト済
	平滑化テスト
	補間テスト
	物理ベイクテスト(PhysRec)	
	剛体パラメータ設定テスト
	モーションから制限角度設定テスト
	制限角度リセットテスト
	コピーペーストテスト
	操作対象ボーン設定後のコピーペーストテスト
	リグ操作保存読み込みテスト
	リファレンスポーズ軌跡表示機能テスト
	アンドゥリドゥテスト
	アンドゥ履歴ボタンテスト


	テスト中


	(最新exeは付いていません)



2021/12/02_1
	1.0.0.22RC7

	既存モーションの可動範囲を制限角度に設定するボタン追加
		制限角度の設定が簡単になりました
		既存モーションで実際に動いている範囲を制限角度にします
		Additive(追加設定)仕様なので初回実行時の前にリセット０ボタンを押します
		Additive(追加設定)仕様なので複数のモーションの最大可動範囲を制限角度に出来ます
		
		リセットボタンもあります

	Testフォルダの制限角度ファイル更新
		モーションキャプチャデータから制限角度を設定


	テスト中


	(最新exeは付いていません)


2021/12/01_3
	1.0.0.22RC5

	拡大縮小アニメにおいて元の大きさよりも縮小出来なかった不具合を修正
	

	プロジェクト保存時の制限角度をベイクするチェックボックスにチェックしていても
	３DウインドウのLimitEulチェックを外していると制限角度がベイクされない不具合を修正
	

	

	テスト中


	(最新exeは付いていません)


2021/12/01_2
	1.0.0.22RC2

	ロングタイムライン上でマウス中ボタンを押したときに３Dウインドウにマウスマーク表示
		ロングタイムライン上でMボタン-->ホイール-->Mボタンでフレーム選択可能

	ゲームパッド使用時に３Dウインドウがアクティブの時に出る電球マークが表示されていなかったのを修正


	ウインドウの大きさが微妙に違っていたのを修正


	GUIプレートの大きさとピック判定数値修正
	

	テスト中


	(最新exeは付いていません)


2021/12/01
	ver1.0.0.22へ向けて


	新ブラシ追加
		Punch_1, Punch_2, X2Cap, X2Needle


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/30
	ver1.0.0.22へ向けて

	GUIプレート内のテキスト修正

	GUIプレートの色を調整


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_3
	ver1.0.0.22へ向けて

	ウインドウがデスクトップの中央に出るように

	MotionBrush.iniファイルの読み込み書き込み
		設定を指定、保存
	
	物理IKは使い方が難しいのでオプションに
		iniファイルで指定した時のみ物理IKのボタンが出るように
		物理IK時は制限角度チェックボックスを外すようにした


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_2
	ver1.0.0.22へ向けて

	Documents/TroubleShootingにドキュメント追加
	WhyYZEulValueIsChangeWhenDragX.docx追加
	(X軸をドラッグした時になぜY軸とZ軸のオイラー角が変化するのかについて)

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_1
	ver1.0.0.22へ向けて

	操作中にブラシメモリのアクセス違反が起こることがあったのを修正
		モーション長とブラシメモリ長の不一致時の不具合
		アクセス時にブラシメモリの長さをチェックするように

	3DウインドウのPseudoLocalのチェックボックスは画面に出なくなりました
		PseudoLocalIKは常にオンになります

	3Dウインドウに新たにWallScrapingIKチェックボックスが加わりました
		壁すりIKのオンとオフを指定するためのものです
		壁すりIKとは
		制限角度を越えてIK操作を行おうとした場合に
		制限に達した成分以外は変化させるIKのことです
		壁すりIKをオンにすることで制限角度下でも動かしやすいIK操作が可能です
		言い方を変えると
		壁すりIKをオフにするとXYZどれかの軸が制限値に達した場合にIKで動かすことが難しくなります


	LimitEulerダイアログでの制限角度設定の結果がオイラーグラフにリアルタイムで反映されるように

	4KTV表示以外の場合GUIプレートの右端が見切れていたのを修正

	4KTV接続時にも小さい画面で起動可能なように大小を選択可能なダイアログを起動時に出すようにしました
		4KTV接続時のみ大小選択ダイアログが出ます

	
	MotionBrushC4.exe起動時の縦横選択ダイアログがデスクトップ中央に出るように修正


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/26_3
	MotionBrush ver1.0.0.21正式版


	テスト

	サンプルデータ更新
		Hip_Jointの制限角度を制限無しに

	
	(最新exeは付いていません)


2021/11/26_2
	ver1.0.0.21RC3


	Documents/TroubleShootingにトラブルシューティングを４つ追加


	
	(最新exeは付いていません)


2021/11/26_1
	ver1.0.0.21RC2

	プロジェクト保存ダイアログに制限角度をベイクオプションを追加
		制限角度をベイクオプションにチェックを入れると
		3DウインドウのLimitEulチェックボックスにチェックを入れてプレビューしたときと同様のモーションをfbxに保存します


	リグ設定テストアンドデバッグ
		サンプルのrigファイル更新
		リグ設定ダイアログを開くときに古いリグ設定ファイルを閉じるように修正

	制限角度下におけるIKについて
		とにかくゆっくり動かすのが基本
		大きく上に大きく下に動かすと
		オイラーグラフ上で上向きの山と下向きの山の足し算になり端の方にクサビが生じやすい
		とにかくゆっくり動かす！！！

	EditRate初期値を0.3に

	遊び付き制限角度IKの遊びを５度から２度に

	
	(最新exeは付いていません)


2021/11/25_3
	ver1.0.0.21RC1

	制限角度IK時に１８０度線をまたいでしまうことについて
		１８０度線を越えたくない場合の制限角度ファイルは+-170度設定に。
		１８０度線をまたいでしまう理由はマウスの移動量が大きすぎるため
		基本的にはゆっくりマウスを動かしてIKする他無い
		Ctrlキーを押しながらマニピュレータの軸をドラッグするとマウス移動量は0.25倍計算されてまたぎにくくなる
		３DウインドウのPhysicsIKプレートを押しEditRateスライダーを調整することによっても変化量を調整可能
		複数フレーム選択するほど処理は重くなるので計算回数を増やすプログラミングはしなかった
	
	Testフォルダのサンプルの制限角度ファイル更新

	4Kテレビで表示時のInfoWindowの画面内デバッグ出力を10行に

	矢印キーで階層選択移動する際にマウスが階層エディタ上に無い場合には選択変更箇所へカーソルを飛ばさないようにした
		他のダイアログ設定時にカーソルが階層エディタへ行ってしまわないように


	初回のIKで乱れやすい不具合を修正


	bvh2fbxバッチテスト
	リターゲットバッチテスト
	IKテスト
	リグテスト	


	(最新exeは付いていません)


2021/11/25_2
	ver1.0.0.21へ向けて


	リターゲットのテストアンドデバッグ
		リターゲットで不具合が出ていたのを修正


	＊制限角度について
	3DウインドウのLeft2ndプレートを押して出てくるLimitEulチェックボックスで
	制限角度のオンオフ出来ます
	Testフォルダのサンプルには制限角度を設定しておきましたが
	どんなモーションにも適切な制限角度というのは難しいです
	ケースバイケースでオンオフしたり設定を変えてください
	設定を変えるには3Dウインドウの変えるボタンを２回押すと出てくるLimitEulプレートをクリックします


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/11/25_1
	ver1.0.0.21へ向けて


	遊び付きリミテッドIK
		制限角度下でも操作しやすいIK



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/24_1
	ver1.0.0.21へ向けて

	制限角度に５度の遊びを設けた
		IKが動きにくくなったので遊びを付けた

		IK操作において
		制限角度内にドラッグしているのに動かないときには
		他の軸の値が制限値に引っ掛かっているときなので他の軸を少し動かすと動きやすい		

	制限角度設定ダイアログのアップデート
		CopyToSymBoneボタンとCopyFromSymBoneボタンを追加
		CopyボタンとPasteボタンを追加

	リグマークが大きすぎたので修正
		指先に表示されても邪魔にならないくらいの大きさに統一

		手などはカメラの虫眼鏡ドラッグで大きく表示して操作することを想定

	ToolWndのプロパティボタンでモーション長を長くしたときに落ちる不具合を修正	


	リグ設定ダイアログの大きさと位置の修正


	ボクシング棒のサンプルに制限角度を付けた
	動画(35sec.)
	https://twitter.com/ochakkolab/status/1463335325355307013?s=20


	左右対称ジョイント名の規則
		ジョイントの名前がLeft$1とRight$1の場合
		あるいは
		ジョイントの名前が$1_L_$2と$1_R_$2の場合



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/23_1
	ver1.0.0.21へ向けて

	コピー履歴の時間比較をローカルタイムで統一
		GUI指定のローカルタイムとファイルのシステムタイムを比較していたのを修正

	４KTV以外で表示した時のRigマークが大きすぎたのを修正
		Rigマークはモデルの大きさに対する比率で表示し、その比率はディスプレイの大きさに関係無し


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/22_2
	ver1.0.0.21へ向けて

	モーション再生を高速化
		モーションポイント検索関数をチェイン方式からインデックス方式に変更続き
			モーションIDごとにインデックス作成
			モーション読み込み時などインデックスの準備が出来ていないときにも対応


	リターゲットバッチテスト
		OK


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/22_1
	ver1.0.0.21へ向けて

	モーション再生を高速化
		モーションポイント検索関数をチェイン方式からインデックス方式に変更


	リファレンスポーズ軌跡表示機能の高速化
		必要最小限のHierarchyRouteの姿勢だけ計算


	リファレンスポーズ軌跡表示機能はデフォルト状態でオフ
		３DウインドウのGUIスプライトスイッチでオンオフ

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/19_1
	MotionBrush ver1.0.0.20正式版


	基本機能のテストアンドデバッグ
		RigモードでRigオブジェクトをマウスでドラッグした際に選択ボーンの更新がされなかった不具合を修正

		マニピュレータの大きさ調整
			単純にモデル全体のバウンダリー半径に対する比率にしました

	制限角度モーションプレビュー対応のテスト動画
		https://twitter.com/ochakkolab/status/1461487698229612545?s=20


	(最新exeは付いていません)


2021/11/19_1
	ver1.0.0.20へ向けて

	制限角度ダイアログのアップデート
		各軸の制限角度スライダーの下に現在のチェックをするためのスライダーを設置
		チェックスライダーはタイムラインをマウスで操作した結果を反映する
		チェックスライダーは参照用で操作用ではない

		制限角度反映はモーションの元のデータを上書きせずに行うので
		制限角度をきつくして動かした後に制限角度を緩くすると緩い制限角度で動きます


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/18_1
	ver1.0.0.20へ向けて

	制限角度ダイアログのアップデート
		IK操作時だけではなくプレビュー時(モーション再生時)にも制限角度を反映するようになりました

		プレビュー時の制限角度反映は元のデータを上書きせずに行いますので
		制限角度をきつくして動かした後に制限角度を緩くすると緩い制限角度で動きます

		設定した制限角度はプロジェクト保存時にlmtファイルとして保存されます


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/17_1
	ver1.0.0.20へ向けて

	LimitEulerダイアログのアップデート
		各軸の制限角度スライダーの下に回転可動チェックするためのスライダーを設置
		チェックスライダーの右横のApplyチェックボックスにチェックするとスライダーを動かすことが出来る
		チェックスライダーはタイムラインをマウスで操作した結果も反映する
		チェックスライダーはプレビュー中は動かない

		チェックスライダーは設定時のチェック用でありリアルタイム用なのでlmtファイルには変更なし
	
		*LimitEulerダイアログもオイラーグラフもIK操作を仮定して使いやすいようにしている
		クリックしたジョイントの親のジョイントのオイラー角度と制限角度を表示している
	
		テスト動画
		https://twitter.com/ochakkolab/status/1460873862808162308?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/16_3
	ver1.0.0.20へ向けて

	物理シミュレーション用のサンプル追加
		Test/shadowBoxing20211116_6
		chaファイルを読み込んでBtStartボタンを押すと始まります

		こちらでシミュレーションした時の動画リンク
		https://twitter.com/ochakkolab/status/1460543856571654152?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/16_2
	ver1.0.0.20へ向けて

	物理シミュレーション再生のスタート時に物理をリセット
		モーションの最終フレームから最初のフレームにジャンプすると物理が動かなくなる症状に対応


	4Kテレビ対応時のウインドウの大きさを修正


	モーションの最初のフレームは０ではなく１
		０フレームは特別な役目を持つバインドポーズ
	

	プロジェクトオープンダイアログの履歴表示件数を５件から１０件に


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/16_1
	ver1.0.0.20へ向けて

	Windows11対応
		Windows11でテスト
		ダイアログの大きさ調整

	ウインドウの大きさ調整とウインドウの大きさに関するリファクタリング


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/14
	おちゃっこLAB日記：Unity上でVRoidモデルにモーキャプデータを再生させる方法
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211114

2021/11/11_2
	ver1.0.0.19正式版


	RigidWindowの修正
		ThicknessToAllボタンが押せなかったのを修正
	
	コピー履歴ウインドウでラジオボタンを押してコピーを選択したときの処理を修正
		OKボタンを押さなくてもコピー選択処理


	基本機能を一通りテスト

		
	(最新exeは付いていません)

2021/11/11_1
	ver1.0.0.19RC3


	マニピュレータとRig操作用オブジェクトの大きさ調整
		モデルデータの大きさに対する比率を保つようにしました

	マウス中ボタン＋ホイールでフレーム選択した時にブラシが設定されない不具合を修正



	TestAndDebug中(今度こそたぶんver1.0.0.19正式版)

		
	(最新exeは付いていません)


2021/11/09_3
	ver1.0.0.19RC2


	再生停止時のフレーム選択修正
	マウスホイール選択修正
	中ボタン＋マウスホイール選択修正


	TestAndDebug中(たぶんver1.0.0.19正式版)

		
	(最新exeは付いていません)

2021/11/09_3
	ver1.0.0.19RC1


	コピー履歴ダイアログ、軸指定ダイアログ、リグ設定ダイアログの表示位置をサイドウインドウの位置に



	TestAndDebug中


		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/09_2
	ver1.0.0.19へむけて


	履歴ファイルが１つもなかった場合の処理を修正		

	１フレーム長選択が可能に
		ToolWindowのボタンで１フレームだけの姿勢初期化も可能

	解像度によっては
	Leftプレートを押したときのGUIコントロールの上下位置がおかしかったのを調整


	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	

2021/11/09_1
	ver1.0.0.19へむけて


	解像度が４K対応かどうかをチェックして
	4K対応の場合には自動的にウインドウサイズを大きくすることにしました


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/08_3
	ver1.0.0.19へむけて


	オプション追加
	DoubleWinSize.hをmain.cppとOrgWindow.hで読み込むと
	ウインドウサイズが縦横２倍になるようにしました

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/08_2
	ver1.0.0.19へむけて

	サンプルのyuriちゃんの左手とマテリアルをmaya2022で修正
	修正したfbxにMotionBrushでモーションをリターゲット
	Testフォルダのサンプル更新
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/08_1
	ver1.0.0.19へむけて

	リグの設定画面の操作用表示位置にオプションとして位置反転チェックボックスを追加
		各軸のマイナス側に操作用オブジェクトを表示


	サンプルのrigファイル更新


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/07_2
	ver1.0.0.19へむけて

	ジョイント右クリックのCreateNewRigメニューが機能しなくなっていたのを修正

	サンプルのrigファイル更新


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/07_1
	ver1.0.0.19へむけて

	リグモード仕様変更
		Rigをオンオフするためのスプライトボタンは常に表示
		Rigをオンにした時には設定済のすべてのリグを表示
		表示してあるRigはマウスでドラッグ可能
		Rigの設定項目にXYZの軸と0,1,2のジョイントからの距離を追加

	*rigの設定の仕方は以前と同じ
		設定したいジョイントを右クリックでRigのメニューを実行


	テスト動画
	https://twitter.com/ochakkolab/status/1457216434463903746?s=20

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/06
	ver1.0.0.19へむけて

	リファレンスポーズジョイント位置軌跡機能修正
		オンオフ用のスプライトスイッチ追加
		リファレンスポーズはライティング無しのdiffuse色表示で見やすく


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/05
	ver1.0.0.19へむけて

	リファレンスポーズジョイント位置軌跡機能
		マウスで複数フレームを選択
		RefPosスライダーでリファレンスポーズのフレームを決定
		RefPosスライダーの１つしたのスライダーでジョイント位置軌跡の太さを決定
		階層エディタでジョイントを選択するとそのジョイントの軌跡が表示される
		IK操作中にブラシの比率によってリファレンスポーズもリアルタイムで変化

		軌跡の太さはフレーム間の移動の長さの程度を意味する
		
		
		テスト動画
		https://twitter.com/ochakkolab/status/1456544566698405890?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/04_2
	ver1.0.0.19へむけて

	ゲームパッドDualSenceが接続されていない場合
		キーボードの矢印キーで階層構造エディタの選択移動
		上下矢印はペアレント、チャイルドへの移動
		左右矢印はシスター、ブラザーへの移動
			シスター、ブラザーの選択は階層構造的分岐点である場合には分岐間移動
			階層構造的に分岐点ではない場合には名前の中のLeftとRightを置き換えてその名前のボーンがあればそこに移動
			(例：LeftKnee_JointからRightKnee_Jointへ選択移動)

	少ししかテストしていないdevelop版

	(最新exeは付いていません)




	ver1.0.0.18のテスト結果の一部
		MotionBrushのfbxをUnity3D 2020.3で読み込み再生テストのスクリーンショット
		https://twitter.com/ochakkolab/status/1455366755623202819?s=20

		Unity3D上でVRoid正式版のvrmにMotionBrushのfbxモーションをリターゲットしたテスト動画
		https://twitter.com/ochakkolab/status/1455745440763187202?s=20

2021/11/04_1
	ver1.0.0.18RC1

	TestAndDebug
		IKモードを変えるためのスプライトボタンを押した際に
		オイラーグラフが更新されない不具合修正

		タイムライン上でSキー+マウスホイールでスクロールする場合に
		タイムラインだけスクロールしてオイラーグラフがスクロールしていない不具合修正


	表示-->設定パネルメニューで出るダイアログの背景色にグレー(Gray)を追加


	(最新exeは付いていません)

2021/11/01_1
	ver1.0.0.18へむけての続き


	SpriteFKプレートを押したときのスプライトボタンを一新
		カメラ操作とボーン操作のボタンの違いが一目瞭然に
		リグを使用するとリグのボタンも出ます（使用しないと出ません）


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/31_3
	ver1.0.0.18へむけての続き

	コピー履歴選択機能修正
		検索年月日範囲の時間を
		開始年月日の0:00、終了年月日の23:59にしました。
		開始年月日と終了年月日を同じにするとその日一日の間の履歴がヒットします。

		
		ただしダイアログコントロールの年月日にはすべての月に対して３１日まであります
		### カレンダーをみながら使用してください ###


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/10/31_2
	ver1.0.0.18へむけての続き

	コピー履歴選択機能とりあえず完成
		2021/10/31_1の機能に更に履歴検索機能を追加しました
		
		fbx名、motion名、bvhタイプ、年月日の範囲で検索可能
		
		ただしダイアログコントロールの年月日にはすべての月に対して３１日まであります
		### カレンダーをみながら使用してください ###


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/10/31_1
	ver1.0.0.18へむけての続き

	コピー履歴選択機能更新中（!!! UnderConstructing !!!）
		コピーをするときにコピー結果に対してコメントを入力するダイアログが出ます

		ToolWindowのコピー履歴選択ボタンを押したときに
		コピー時に入力したコメントも表示されます
		他にもfbx名、motion名、開始フレーム番号、コピーフレーム数が自動的に表示されます

		
		ダイアログに一番下の　最新のコピーを選択(select the most recent one.)にチェックを入れると
		ラジオボタンで何を選んでいても常に最新のコピー結果がペースト時に使用されます

		最新のコピーを選択(select the most recent one.)にチェックを外して
		コピー日時を選択すると
		ペーストの度に選択した日時のコピー結果がペーストに使用されます			

		

		履歴の検索機能は次回以降に付けます
			ダイアログにボタン位置の予約だけしてあります



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/28_2
	ver1.0.0.18へむけての続き

	コピー履歴選択機能追加
		ToolWindowのコピー履歴選択ボタンを押すと履歴選択ダイアログが出ます
			ダイアログに一番下の　最新のコピーを選択(select the most recent one.)にチェックを入れると
			ラジオボタンで何を選んでいても常に最新のコピー結果がペースト時に使用されます

			最新のコピーを選択(select the most recent one.)にチェックを外して
			コピー日時を選択すると
			ペーストの度に選択した日時のコピー結果がペーストに使用されます			



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/28_1
	ver1.0.0.18へむけて

	ロングタイムライン上で
		マウスホイール：時間カーソル
		Sキー＋マウスホイール：時間カーソルがはみ出ない範囲で時間表示範囲を左右にスクロール、選択はそのまま。


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/27_2
	ver1.0.0.17確定版

	motion cache batchメニューを削除
		egpキャッシュファイルが不要になったため

	スケール設定後の保存と読み込みテスト
		スケール設定時の移動成分もチェック

		Maya2022でも正常に読み込み
		

	Toolウインドウの姿勢の初期化のInitScaleの修正とテスト
		スケールの初期化が正しくなりました
		スケール設定してある場合の回転と移動の初期化も正しくなりました
	
	bvh2Fbx batchメニュー、Retarget batchメニュー実行テスト

	モーションブラシによるIK操作テスト

	物理シミュレーションテスト


	(最新exeは付いていません)

2021/10/26_3
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D



	CModel::GetFbxAnim関数に姿勢計算についてのコメント分追加


	ツールウインドウの姿勢初期化ボタンのInitScaleメニュー実行についての修正
		スケールの初期化も正しくなりました

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/26_2
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D

	fbxファイルのモーション読み込みを書き直し
		ローカル情報からグローバル姿勢を組み立てることに成功

		egpキャッシュファイルは不要に

		スケール設定した時の姿勢が正しくなった
			2021/10/26_1のバージョンはスケール設定時の移動成分の "読み込み" が間違っていた
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/26_1
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D


	EvaluateGlobalPositionキャッシュファイルEGP ver0.0.0.2
		FbxAMatrixを書き出すのをやめてChaMatrixを書き出し
		
		ファイルサイズがヘッダ情報と合わずに
		キャッシュが不正扱いされて使えないことがあったがFlushとSetEndOfFileを加えることで直った	
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/25
	ver1.0.0.17に向けて

	develop版(非リリース版)　MameBake3D

	スケールアニメを設定してあるfbxを読み込んだ時にスケールが正しくない不具合を修正
		症状
			ver1.0.0.16でスケール設定をして保存したfbxファイルはMaya2022で正しく読み込めました
			しかしMameBake3D(MotionBrush)で読み込むとスケールが間違っていました
		対処
			読み込み処理を修正

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/20
	ver1.0.0.16確定版

	OrgWindowの色を調整
		スクロールバー
		ツリービューのラインの選択色

	ゲームパッド仕様修正：
	メインウインドウのプレート上で〇ボタンを押したときには
	マウスがコントロール位置へジャンプしないように

	テスト

	#####################################################################
	最新exeは付いていません
	最新exeは2021/10/27夕方 ver1.0.0.16 ベクター様のサイトにて公開　予定
	https://www.vector.co.jp/soft/winnt/art/se523002.html
	#####################################################################

2021/10/19_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D



	ModelPanel, MotionPanelの表示非表示に関する不具合修正

	ModelPanel, MotionPanelの起動後の表示位置を保持するように


	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/19_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D


	VisualStudio2019のビルドセッティングを修正 ４
		実行速度優先設定
		libのサイズもsmaller

	リターゲット関数をmain.cppからMameBake3DLibのRetarget.h, Retarget.cppに移動

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_4
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正 ３
		BulletPhysicsLibプロジェクトをadd
		bulletのソース位置はそのままでstatic libraryプロジェクト化
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_3
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正 ２
		bullet physicsの多重定義警告の原因判明
		btBulletCollisionAll.cpp, btBulletDynamicsAll.cpp, btLinearMathAll.cppを
		プロジェクトから除外
		リンク時警告がほとんど出なくなった
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正
		libfbxsdk-md.libではなくlibfbxsdk.libをリンク
		exeサイズが7MB分小さく
		(動作が軽くなった？)
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D




	ブラック(black)


		
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/17_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	Update VisualStudio BuildSettings
		FBX SDKへのリンクが古いものが混ざっていたのをFBXSDK2020.2に修正
		デバッグビルドがビルドできなくなっていたのを修正

	OrgWindow
		for分の条件文でstlを宣言するのを止めてforの外で宣言
		Listnerの初期値をdummyfuncからNULLに変更
		ifの条件に()を出来る限り付けた
		基底クラスのコンストラクタ呼び出しミスを修正

	CRetargetFile
		基底クラスのコンストラクタ呼び出しミスを修正
		
	ModelPanel, MotionPanel
		連続して消すと落ちることがある不具合を修正
		連続して選択を切り替えると落ちることがある不具合を修正
		
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/17_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D


	strlen ,wcslenを呼ぶ前に文字列を終端


	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/16_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	マテリアルのShininess (power)処理修正
	サンプルC3, C4 保存し直し
	yuriちゃんデータのライティングをMaya2022で確認
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/16
	ver1.0.0.16に向けて

	develop版(非リリース版)　MameBake3D

	警告(C26451)が出ていたポインタオフセット計算をsize_tに

	保存したfbxをMaya2022で開いた時のマテリアルが白すぎてライティングが分からなかったのを修正
	マテリアルのAmbientFactorを1.0から0.1に
	マテリアルのEmissiveFactorを0.1に
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/13
	develop版(非リリース版)　MameBake3D

	リターゲットバッチを実行した後、モデルパネルが表示されない不具合を修正

	OrgWindowのNULLチェック追加
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/12_1
	develop版(非リリース版)　MameBake3D

	ModifyEulerXYZによる180度裏返り補正はbvhファイルをfbxファイルに変換するときのみ実行
	多重回数裏返り処理防止によりIK操作時に瞬時にボーンが180度裏返る現象が無くなった

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/12_1
	develop版(非リリース版)　MameBake3D

	T+Wheelモードが終了しない不具合修正
	(ブラシ適用位置が更新されなくなっていました)

	モーションパネルでモーション選択が常に初期化されていた不具合修正
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/11_2
	develop版(非リリース版)　MameBake3D

	ジョイントを選択した後、Tキーを押しながらマウスホイールでボーン軸のツイスト回転
	SelectJoint-->T Key + MouseWheel --> BoneAxisTwist

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/11_1
	develop版(非リリース版)　MameBake3D

	モーションキャプチャファイルbvhを扱う際に姿勢が180度裏返ることがあったのを修正
	足が180度近く上がったときなどに症状が出ていました
	Explain about ModifyEulerXYZ.
	https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20211010

	表示(disp)-->モデルパネル(model)メニューで表示されるモデルパネルに
	deleteボタンを追加しモデルの削除をパネルから行えるようにしました

	表示(disp)-->モーションパネル(motion)メニューでモーションパネルを表示
	deleteボタン付き

	トラブルシューティングの
	MotionBrushのマニピュレータの軸の向きは合っているのか.docxを更新

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/10
	develop版(非リリース版)　MameBake3D

	Explain about ModifyEulerXYZ.
	https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20211010
	
2021/10/06
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		今までで一番良い出来　試行錯誤の結果をまとめて書き直した

		Best_ModifyEulerXYZ_RecapTheResultOfTrialAndError
		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/04
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		呼び出し側でBEFEUL_BEFFRAME指定
		
		180度以上回転するとうまく行かない部分が出てくるが
		本筋が分かりやすくなりツールの補間で比較的簡単に修正可能
		モーキャプデータ修正作業は無くならなかった
		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/04
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		180度チェックをそれぞれの軸に対して行うことが出来た
		(比較的)安定（今はこれ以上は難しい）

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/03
	develop版(非リリース版)　MameBake3Dアップデート

	2021/09/30_1と2021/10/01で生じた不具合の修正
		オイラー角のXとZが入れ替わる不具合修正
		履歴ファイル名の変更に対応できていない不具合修正
	
	ModifyEulerXYZにおける試行錯誤
		(比較的)安定（今はこれ以上は難しい）


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/01
	develop版(非リリース版)　MameBake3Dアップデート

	VisualStudioが出力する膨大な量のwarningを解決する作業開始の続き
		bullet physicsのコンパイル時警告を解決
		対応した警告は主に以下の３つ
			1. 未初期化変数使用警告
			2. NULLポインタ警告
			3. バッファーオーバーラン警告
		その他の警告は無視する設定
			例えば異なるスコープで同名変数をわざと使用している箇所への警告や
			暗黙の型変換をわざと使用している箇所への警告は無視する設定にしました

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/09/30_1
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalc::ModifyEulerXYZ更新
		モーションキャプチャデータの末端のボーン例えばつま先(toe)のボーンが裏返るのを防止するコードを追加

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/09/28
	develop版(非リリース版)　MameBake3Dアップデート

	CPolyMesh3::m_n3pを構造体からクラスに変更しDestroyObjsで警告が出ないように

	ChaVecCalc::ModifyEulerXYZの内容を新しく
		９０度以上回転した時にも以前よりもオイラーグラフのラインが本筋ラインにラインに

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/27
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalcの途中計算をdoubleに	

	VisualStudioが出力する膨大な量のwarningを解決する作業開始
		bullet physicsの部分以外はほぼ解決？

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/22
	MotionBrush ver1.0.0.14

	大きいフレーム番号を複数フレーム選択した状態で小さいフレーム数のfbxを読み込むとエラーで落ちる不具合を修正

	fbx読み込みエラーのときの処理を修正

	モーション編集時にinfoウインドウに表示するオイラー角はアプライフレーム(TopPosフレーム)だけ表示するように修正
		infoウインドウのオイラー角とオイラーグラフの一致が分かりやすくなりました

	モーションの名前を一括で設定するためのファイルを追加
		MotionNameListFile、拡張子は*.mnl
		Fileメニューからの読み書きに対応
		使い方
			model-->selectメニューでモデルを選択
			File-->Save-->MotionNameListFile(*.mnl)メニューでmnlファイルを書き出し
			書き出したmnlファイルのモーション名を編集
			File-->Openメニューを実行しダイアログの参照ボタンを押し、拡張子リストで*.mnlを選択
			先ほど編集した方のmnlファイルを選択して読み込む

	補足
		リターゲットバッチ手順が分かりにくかったようなので補足
		形状側のプロジェクトを読み込み、適用される側のモデルをmodel-->selectメニューで選択
		bvhから作ったfbxが入っているディレクトリにretarget.rtgファイル(名前の対応表のファイル)を１つ配置する
		File-->Retarget batchメニューを実行しbvhから作ったfbxファイルが入っているディレクトリを指定
		長いキャプチャデータをたくさん読み込むにはかなりのメモリを使います。
		数千フレームフルフレーム(再生時間にして約１分)のキャプチャデータを４０個ほど読むにはメモリを十数GB以上(MotionBrush.exeとしての使用量)使うこともあります。
		コンピュータのメモリ搭載量などを考慮してディレクトリに入れるfbxの数を調整してください。

	補足その２　モーションの順番は変わることがある件
		読み込み済のモーションはmotion-->selectメニュー実行時のドロップダウンリストに表示されます。
		このドロップダウンリストに表示されるモーションの順番は変わることがあります。
		どういう場合に変わるかというと
		リターゲットバッチを実行した後の状態とそれを保存した後の状態とでモーションの順番が変わります。
		リターゲットバッチを実行した直後のモーションの順番は読み込み順です。
		fbxに保存するときのモーションの順番はモーション長が短いものから先に保存します。
		よってリターゲット直後とそれを保存した後ではモーションの順番が変わることがあります。

2021/09/15
	MotionBrush ver1.0.0.13

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなることがある不具合の更なる調査の結果
		マウスレスポンスが悪くなった場合、
		それぞれのMotionBrushのタイトルバーの文字の部分つまりMotionBrush ver1.0.0.13 No.* :と書いてある文字の上をクリックすることにより
		いまのところ１００発１００中の確率でマウスに対して応答がありました
		タイトルバーの文字の上をクリックしてください

	拡大縮小モーションを編集可能に
		3DウインドウのIKRot, IKMove, IKScaleのコンボボックスからIKScaleを選択すると拡大縮小編集モード
		操作方法：
			IKScaleモードにてマニピュレータの中央をドラッグする場合
				XYZ各軸の内一番大きい移動量の移動方向がプラスなら全軸均等拡大、一番大きい移動量の移動方向がマイナスなら全軸均等縮小
			IKScaleモードにてマニピュレータの各軸をドラッグする場合
				ドラッグした軸の移動方向がプラスならドラッグ軸限定の拡大、移動方向がマイナスならドラッグ軸限定縮小
				 
	RigidParams剛体設定ウインドウの調整
		ボタン１つで全ての剛体に設定するToAllボタンをそれぞれの項目の下に色を変えて配置

	リターゲットウインドウのジョイント対応付けボタンを押しても候補のドロップダウンリストが出てこなくなっていた不具合を修正
	(Retarget batch機能とrtgファイル読み込みでのリターゲットは動いていました)

	編集したモーションを確認しやすく（フレーム選択を解除せずに編集結果をゆっくり確認）
		ロングタイムラインウインドウのプレイヤーボタンに"１"ボタンを追加
		"１"ボタンを押すたびに1fps-->2fps-->通常モードに切り替わり３Dウインドウにテキスト表示されます。
		プレイヤーボタンの再生ボタンを押すと機能します。
		再生を停止すると複数フレーム選択が復元されます。

	MotionBrush.exeが置いてあるディレクトリにデバッグ情報出力用のdbg.txtとinfo*.txtがあります
	MotionBrushC4.exeから複数のMotionBrush.exeを立ち上げた場合に
	それぞれのMotionBrush.exeで異なる名前のファイルを出力するようにしました


	ワンポイント
		fbxが更新されるような操作をした後(プロジェクトファイルやfbxを保存した時、bvhからfbxを作った後など)には
		fileメニューのMotionCache(egp)batchメニューを実行する(この操作完了には時間がかかるが、その後の読み込み時間が何倍にも速くなる。)

2021/09_2
	MotionBrush ver1.0.0.12

	IKモードがIKRotの場合にはオイラーグラフ、IKMoveの場合には位置グラフを表示
	
	プレイヤーボタンにオイラーグラフ操作ボタン(拡大縮小、オフセット上下、リセットのボタン)を追加

	一番親のジョイントをドラッグした場合にもモーション編集可能に

	オープンファイルダイアログのデフォルトディレクトリをサンプルが置いてあるTestディレクトリに

	MotionBrushC4.exeを使う場合にはゲームパッド対応無し
	MotionBrushC4.exeからMotionBrush.exeを複数立ち上げた直後のマウスレスポンスが更に改善

	ver1.0.0.12動画
	https://youtu.be/Ml85Avo0vjw

2021/09_1
	MotionBrush ver1.0.0.11

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなる不具合を修正
	ゲームパッド対応を１つのMotionBrush.exeに限定することで大分改善しました。

		しかしそれでもMotionBrushC4.exe起動直後にマウスレスポンスが悪くなることはたまに起きました。
		その場合の対応として以下の３つのことをしました。
		以下の３つのことをすれば大抵の場合マウスを受け付けるようになりました。
		１，MotionBrush.exeを単体で起動して終了してからMotionBrushC4.exeの起動を試す。
		２，MotionBrushC4.exeを起動してからしばらく待つ(10秒間とか20秒間とか)
		３, 複数個あるMotionBrush.exeのタイトルバーとメニューバーと黒いウインドウ（３Dウインドウ）をクリックする
		４，それでもマウスを受け付けない場合にはMotionBrushC4.exeを起動しなおす

	タイムラインのキーオブジェクトもメモリ使いまわし方式に。

	メモリ使いまわし部分デバッグ

	モーション数が多いfbxの読み込みを更に少し高速化

	モーションメニューからのモーションの選択の高速化、アンドゥの高速化
	モーション選択とアンドゥ時の待ち時間がほとんど無くなりました。

	モーションメニューの編集中のモーションを削除機能のデバッグ


2021/08_2
	MotionBrush ver1.0.0.10
		完成版ver1.0.0.9のデバッグ版
	
	ver1.0.0.9での最適化高速化の際に生じた不具合を修正
		フレームの選択範囲とモーションブラシの選択範囲がずれる不具合がありました
		モーションメニューからモーションを選択すると直るのですが
		プログラムの不具合を修正しました

	保存するたびにマテリアル名の後ろに数字がたくさんついていく不具合を修正
		マテリアル名の後ろに１つだけ _数字 を付けます

	*.rtgファイルと*.tboファイルのver1.0.0.7からver1.0.0.9のどれでも読み込めるようにしました

2021/08
	MotionBrush ver1.0.0.9
		完成版ver1.0.0.7の読み込み最適化高速化版

	こちらの環境にて
		２０００フレームとか５０００フレームの38個のモーキャプデータ入りのfbxファイル読み込み時間が
		ver1.0.0.8では１６分かかっていたのが５５秒で読み込めるようになりました。（両方ともegpファイル有で比較）

	ワンポイント
		物理シミュレーション中には読み込んでいるすべてのモデルがシミュレーション対象になります。
		bvhからfbxにしたものを読み込んでいると姿は見えませんがシミュレーションしています。
		物理シミュレーションが遅い場合にはこのことを疑ってください。
		chaファイルをコピーしてバックアップした後、テキストエディタで開き、
		CharaNumの値を１にしてゆりちゃん以外のCharaチャンクを消して保存しそれを読み込むと上記への対策が出来ます。

	動画追加
		動画【モーションツール】ver1.0.0.7完成版のいいところ【完成しますた】
		https://youtu.be/nApvd9___mQ

	関連日記
		https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20210718

2021/07/21
	MotionBrush ver1.0.0.8
		完成版ver1.0.0.7のデバッグ版

	デバッグ
		リターゲットバッチが落ちやすすぎるので落ちないように。
			処理中はGUI表示をオフにしました（バッチ処理中にキラキラしなくなりました）。

	ワンポイント
		前からですが
		フレームを１フレームずつマウスで変化させたい場合には
		マウスをロングタイムラインに当ててctrlキーを押しながらマウスホイールを回します。

2021/07/07
	MotionBrush ver1.0.0.6にてMotionBrush完成！！
	モーションキャプチャファイルの任意のボーンの任意の連続複数フレームのモーションを任意の連続複数にコピーペースト可能
	これが私が思う最強のモーション編集ツール！！！



	モーションのコピーとモーションのペーストとで指定フレーム数が異なっていてもコピーペースト可能。

	２個のMotionBrush.exeを立ち上げて
	片方でモーションのコピーを行い、他方へモーションのペーストをすることが可能です。

	コピーの前にオペレーションターゲットボーンツリーを選択可能なので
	任意のボーンのモーションのコピーペーストが出来ます。
	オペレーションターゲットボーンの指定はペースト時に適用されます。

	オペレーションターゲットボーンはToolWindowのコマンド対象ボーンボタンを押して出てくるダイアログにて保存読み込み可能
	オペレーションターゲットボーンツリーには１０個のスロットが用意されていてコンボボックスでスロット切り替え可能です。


2021/06/24
	OSS版より（もっと）進歩させるために
	バージョンアップしました

	ブラシをプラグインdll化
		MotionBrushPlusinsSDKを同梱
		サンプルとして-CosXブラシ、-CosX^2ブラシ、Sawブラシ、RectブラシをOSSにて同梱
		選択フレームの個々のフレームにおけるIK操作結果に対する重みをカスタマイズ可能
		
	ブラシのオプション指定用のGUIを修正追加
		ブラシコンボボックスはBrushesFolderの中のdllを読み込んで自動的に設定
		ブラシトップ位置指定スライダー
		ブラシ繰り返し回数指定スライダー
		ブラシミラーUチェックボックス
		ブラシミラーVチェックボックス
		ブラシミラーVのオプションとしてDiv2チェックボックス

	ReadMeフォルダにMotionBrush_ExplainGraphOfBrushes.docxを追加
		モーションブラシがブラシであることの説明を書きました


2021/06/18 ver1.0.0.4
	ジョイントをマウスでドラッグするIK処理の処理速度が２０倍速になりました
		全てのフレーム（０フレームは除外することをお勧め）を選択してのIK操作がリアルタイムで可能
		bvhをリターゲットした後、全部れーむの腕の開き方を調整する際にもリアルタイムで編集可能

	ライセンス表記
		オープンソースのライセンスはLGPLです
		というように
		「オープンソースの」という断り書きを追加

	プライヤーボタン（ロングタイムラインの上に付いているラジカセ風ボタン）のデバッグ
		「| |」ボタンは現在のフレーム一から最後のフレームまでを１ボタンで選択するボタン
			選択が不完全だったのを修正

		「--」ボタンは物理シミュレーション中に押すと、物理のシミュレーションをしながら物理の揺れをリセットします
			機能していなかったのを機能するようにしました

		（　「--」ボタンの隣の２つの三角のボタンは選択範囲の履歴ボタンです　）


	今回のver1.0.0.4で
	MotionBrush単体プログラムとしては
	当面の間完成版という扱いになります（予定）


2021/06/10 ver1.0.0.3
	リターゲット設定ファイルの保存と読み込み
		GUIで設定したリターゲットのジョイント対応表をファイルに保存、読み込み可能。
		リターゲット設定ファイルの拡張子は".rtg"
		配布ディレクトリのRetargetSettigFileExampleに設定例有り。
		
	FileMenuにマルチスレッドバッチ処理メニューを３つ追加
		bvh2Fbx Batch
			bvhファイルが入っているディレクトリを指定して一括で変換。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Make MotionCacheFile Batch
			fbxファイルが入っているディレクトリを指定して一括処理。
			モーションキャッシュファイルegpを作成することにより読み込み速度は４倍ほど高速（こちらのテスト環境においては）。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Retarget Batch
			bvhから作ったfbxのモーションを読み込済の形状に対してリターゲット。
			fbxが入っているディレクトリを指定して一括処理。
			子供ディレクトリも再帰的に処理。
			fbxが置いてあるディレクトリにはretarget.rtgファイルが１つ配置されていることが必要。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。		

	オープン履歴機能修正
		bvh2FBXのときにはbvhの履歴を表示（*.chaファイルではなく）。

	ブロックアロケートメモリ機能のメモリ使いまわし部分を検証してデバッグ
		メモリの使いまわしが正常化。

	egpファイルと同様にlmtファイルについてもfbx内のコメントとlmtファイル内のコメントが一致した時だけ読み込むように。
		fbxのジョイント位置を変更しても反映されずに読み込まれる不具合解消。

	Testディレクトリのサンプルを更新
		新しいバージョンで保存し直し。


2021/05/29 ver1.0.0.2
	サンプルデータの足のジョイント位置がおかしかったので修正
	インストールに必要なVisualStudio2019ランタイムインストーラを同梱
	物理IKをした後にBtStartすると手の動きがおかしくなる不具合を修正

2021/05/19 ver1.0.0.1



