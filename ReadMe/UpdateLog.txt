2023/10/26
    EditMot 1.2.0.27 RC7(リリース候補7)

	RC2 : Retarget高速化(LimitEul自動オフと復元をやめ)
	RC3 : TestフォルダのBoySportyとAutumnモデルの制限角度ファイル(*.lmt)更新
	RC4 : ApplyNewLimitsToWMの再帰処理を最適化して高速化　影響度の計算し直しが関わる部分で大きく高速化
	RC5 : RC4のリファクタリング
	            LimitEulボタンオンオフ時にはモーション部分のアンドゥーをしないように
	RC6 : 不具合修正
		オイラーグラフが４フレーム単位(作業スレッド数４)でギザギザする不具合修正
			CopyWorldToLimitedWorldスレッドを待機できていなかった不具合修正         

		360度越えの角度制限が正常に
			(注意) 制限にかかった部分に対して更にIKする場合には　多くの場合Scrapingボタンをオンにしないと動かない
	RC7 : リターゲット高速化
		InitMP部分にマルチスレッド版を使用することにより　リターゲット処理時間が　従来の1/3から1/2で済むように

	      ジョイント名検索の最適化		
		fbx読み込み時に　_Joint文字列の有無を調べておいて　存在しない場合には　即時０リターンするように
	RC8 : マルチスレッドにおける計算データ配分が連続性を持つように修正

	      モーションポイント取得時のキャッシュを再び有効に
		キャッシュアクセス部分は排他的に
	
	      制限角度キャプチャ修正
		FromCurrentMotionボタンでキャプチャした制限角度に２度余裕を持たせるつもりだったのが２度足りなかった不具合を修正
		TestフォルダのSpring1とAutumn1の制限角度ファイル修正
	RC9 : キャッシュ処理不具合修正
		引数ミス
	      リターゲットで落ちる不具合修正
		キャッシュが不正なことが原因だった
	      AddMotion内からのInitMPはシングルスレッド版を使用
		AddMotion実行時点においては　モーションポイントインデックス未作成
		GetMotionPoint (GetBefNextMP)は　インデックス未作成時にはモーションポイントキャッシュを使用
		インデックス未作成時に　マルチスレッドでGetMotionPointすると　キャッシュヒットが難しく　速くならない
	      上記修正にて　リターゲット処理速度が　1.2.0.26の約２倍速に		
	RC10 : モーション無しのfbx読み込み時に　デフォルトモーションにモーションポイントが作成されない不具合修正
		2023/10/23からの不具合
		モーション無しのfbx読み込み時にリターゲット出来ない不具合も解消
	RC11 : モーションポイント取得関数GetBefNextMp()の最適化
		処理全般に影響
		リターゲット速度は1.2.0.26と比べて４倍速に
		プレビュー速度もやや速く
		      

	
		

    １８０度以上のIK操作が出来るように
	マウスドラッグ時とドラッグ後の処理に分けてからうまくいっていなかったのを修正
	オイラー角のカーブが綺麗になるように！

    360度越えのオイラーグラフに対して　適切に角度制限

    並列化による処理の高速化
	IK操作, FK操作, Rig操作, リターゲット処理高速化
	マルチスレッドで高速化
	(リターゲットについては　不具合修正で1/3倍速 --> マルチスレッドで3倍速でチャラ --> キャッシュ不具合修正&シングルスレッド適材適所で1.2.0.26の２倍速)

    １８０度裏返り対策を追加
	リターゲット時
	IK時

    オイラーグラフにカレント数値表示
	軸に目線を飛ばして目分割しなくても数値が分かる

    DoubleWidthスクロールバー
	スクロールバーを操作しやすく    

    姿勢初期化メニューにDeeperEndJoint追加
	子供の中のエンドジョイントだけを初期化
	つま先などが変になった場合に使う

    不具合修正
	スクロールに関するパネルの表示の不具合修正
	ウインドウ小で起動時にパネルが移動できなかったのを修正
	LimitEulオン時の制限角度キャプチャ修正




　おちゃっこLAB
	https://ochakkolab.jp/

　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab

	動画　モーキャプでポーズtoポーズ　ver.1.2.0.25
		https://youtu.be/e6XSIv3hiJI

	動画　モーキャプを滑らかにコピペ編集 ver.1.2.0.25
		https://youtu.be/A8E1K5UXOaM

	動画　モーキャプ編集ツール　1.2.0.24 (2023/09)
		https://youtu.be/LEbueHtc57Q

	動画　0.07倍速でパンチしたら物理はどうなるんだろう？
		https://youtu.be/gKuLzPDt-cc

	動画　【小人】小人制御の物理【ドリブン】
		https://youtu.be/SRoi8Ds9NYI

	動画　いろいろ直った物理でボクシングの動画	
		https://youtu.be/Zr7fT1gsCl4

	動画　作り直した位置コンストレイント
		https://youtu.be/8p13H6MGQZ8

	動画　変な風には曲がらない位置コンストレイント
		https://youtu.be/9Xt8cxjByeA

	動画　制限角度をキャプチャーする
		https://youtu.be/mkkpo5cmLBs

	動画　モーキャプの動きを盛れ！
		https://youtu.be/DV9gYsgDzz0








2023/10/15
    EditMot 1.2.0.27　に向けて

    2023/10/12
    	リターゲット結果が１８０度裏返っていた問題修正
		180度裏返り対策をしているのにも関わらず　裏返るbvhデータがある問題に対策を開始
		対策処理の閾値としては　通常ボーン90.0度 endjoint180度で大体うまくいくのでこれをデフォルト値とする
		 (一番問題が出やすいbvh121とbvh144でテストして閾値を決めた)

		bvh2fbxもやり直して(fbxファイルを出力し直して)テスト

		リターゲットバッチ(RetargetBatch)実行時に　Smoothオプション(ダイアログで選択)を追加
			ノイズによって裏返り処理の閾値を越えないように


	    IK中に１８０度裏返る不具合修正
		IK時は　GetBefEulでアプライフレームの角度を取得するように
		 (Autumnモデルと　一番問題が出やすいbvh121とbvh144でテスト)

    2023/10/13
	オイラーグラフにカレントオイラー角の数値をテキスト表示
		横軸に目線を飛ばして目分割すること無しに　数値確認が出来る！

    2023/10/14
	180degree(PI)以上のIK操作が再び出来るように
		何回転もする場合には　フレーム範囲を長くとって　１フレームごとの変化分を気を付けながら

	GetBefEul()周りをリファクタリング

    2023/10/15
	モデルパネル、モーションパネル、カメラアニメパネルのスクロールの不具合修正
		ラジオボタンとセパレータの表示判定修正
		スクロールウインドウを引数で指定

    2023/10/15_2
	ウインドウ小で起動時
		モデルパネル、モーションパネルのウインドウ位置移動が出来なくなっていた不具合修正
			1.2.0.26からの不具合だった
			タイトルドラッグ時にはSetCaptureしないようにして解決

	Retargetウインドウにて　コンテクストメニューを出した後のスクロールバードラッグの不具合修正
		コンテクストメニューを呼び出した後で明示的にマウスアップメッセージを送信して解決

   2023/10/16_1
	オイラー角修正
		GetRoundThreshold()追加
		
		PostIK処理並列化に向けて準備
			PostIK処理をフレーム単位のマルチスレッド化する予定
			Q2EulXYZusingQ()内にて　IK中はcurrentframeのbefeulを使用　後処理としてbefframeのbefeulを使用

   2023/10/16_2
	PostIK処理並列化に向けて準備　その２
		閾値調整
		後処理を修正
		
	明日以降の　＃＃＃予定＃＃＃
		PostIK()関数はフレーム番号単位でマルチスレッド化　後処理のCalcBoneEulはボーン単位でマルチスレッド化　(予定)
		速度的に効果が無かった場合には　元に戻す
			
   2023/10/17_1
	PostIK()の処理を　マルチスレッドで並列化
		マニピュレータの軸操作と　マニピュレータの中央操作に対応　(Rigは　まだ)
		IK操作が　かなり速くなった

   2023/10/17_2
	GetBefNextMP()の不具合修正

	IKしていなくても　マウスアップ時にIK後処理が走っていたのを修正

	オイラーグラフで１フレームだけ選択している場合の　選択範囲垂直線を修正

	UpdateMatrix用のスレッドクラスのCBone*メンバを　配列からvectorへ変更


   2023/10/17_3
	IK操作の並列化による高速化の続き
		CalcBoneEul( IK終了後に呼ばれる ) もマルチスレッド化

		マルチスレッドとHighRpm
			PostIKスレッドはIK時には常にHighRpm
			UpdateMatrixとCalcBoneEulは　GUIのHighRpmチェックボックスに依存

		速くなる余地
			FbxSdkの関数は排他的に呼び出している
			eNullとeCameraの処理についてFbxSdkを呼び出している
			自前のデータとして読み込んでおいて処理をすればその部分についても並列化可能

   2023/10/18_1
	マルチスレッドIKの不具合修正
		位置コンストレイントが効かなくなっていたのを修正

   2023/10/18_2
	LimitEulをオンにしてマルチスレッドIKをしたときの不具合修正
		姿勢とオイラー角が乱れることがある不具合修正

   2023/10/19_1
	制限角度キャプチャを修正
		LimitEulをオンにした状態で
		LimitEulメニュー実行し
		FromCurrentMotionボタンで制限角度をキャプチャーすると　制限角度が正しくない不具合を修正

	CalcBoneEulのマルチスレッドは　かかる秒数的に　それほどの効果ではないので　シングルスレッドに戻した

   2023/10/19_2
	2023/10/19_1の対処の仕方を見直し
		LimitEulをオンにしてFromCurrentMotionした場合の不具合修正を納得いく形で

		CalcBoneEulのマルチスレッド化再び
			処理中だけHighRpmになるようにして復活

   2023/10/19_3
	CalcBoneEulとPostIKの計算スレッド数をCoef.hの定数にした
		4だったのを8にしたが　CPUのコア数に応じて調整するべき

   2023/10/20_1
	移動処理についてもマルチスレッド化

	今回のマルチスレッド化に関する　カレントまとめ
		マルチスレッドのコンテクストを　揃っている情報と要求される計算順序によって決めた
		親のボーンの姿勢を使う階層順の計算では　フレーム番号単位のマルチスレッド
		全ボーンの姿勢が揃った後で　前のフレームの姿勢を元にオイラー角を計算する際には　ボーンごとのマルチスレッド
		
		スレッド数は多くしても　CPU稼働率が上がらなかった　コアが８つあっても　(1モデル当たり)4つくらいのときが　稼働率が高かった

		CPU稼働率については　起動し続けて使っているうちに上がってくることもあった　謎
		CPU稼働率について　処理待ちでSleep(0)の高速ループをしていると　稼働率がしばらく落ちることもあったように思う
		(セキュリティ？？？)

   2023/10/20_2
	RigControlのマルチスレッド化

   2023/10/20_2
	CopyWorldToLimitedWorldのマルチスレッド化
		多くの場所で使っているので　方々で高速化
		LimitEulボタンのオンオフも高速化

   2023/10/22_1
	ChaVecCalcのグローバル関数をChaCalcFuncに

	モーション初期化機能にDeeperEndJointメニュー追加
		選択ジョイントの子供ジョイントの中のエンドジョイントの姿勢だけを初期化
		つま先などが変になった場合に使う

	ThreadingCopyW2LWの修正








2023/10/10
    EditMot 1.2.0.26 release

    100万回アンドゥー機能付きスライダー
	個々のOWP_Sliderに対して右ダブルクリックでアンドゥ
	表示とドラッグも改善
	マウスホイール対応
	操作法を右ペインに表示
	スライダーの履歴はアプリ終了時に消えます

    テクスチャ指定の描画順設定をGUI化
	透過テクスチャの描画順を遅らせる順を設定
	LaterTransparentの設定ダイアログを　プレートメニューから呼び出し
	LaterTransparentリファクタリング

	ドキュメントに追記
		Documants/TroubleShooting/DisplayOfPantsAreMissing.docx

    操作対象ボーン設定ファイル読み込み修正
	無効エントリは読み込まないように
	RootNode(0)というエントリを読み込まない

    ファイルオープン時に　重複する内容の履歴と　存在しないファイルの履歴を　自動削除
	履歴が多すぎるとオープン処理が重くなるため
	削除処理が走る際にいつもより重くなるが　１度削除が走った後は軽くなる

    モデル設定ファイル修正
	2_Autumn_1 : 操作対象ボーン設定の NoHipsスロットにRootNodeが２つ入っていたのを削除
		     服を秋色に修正(テクスチャそのままでVRoidでdiffuseを設定)
	　　　　　　　腰を曲げたときにすそが服の上に出ないように(すそを少し広く)
	　　　　　　　物理シミュ時に髪の毛が肩にめり込まないように(剛体を大きく)
	　　　　　　　制限角度をキャプチャして設定

	1_Test20221218_CB0 : 物理設定refファイルの　剛体の回転バネ定数をregularからweakに変更

    スクロールバーの幅を倍に
	スクロールしにくいストレスを解消！
	スクロールバー上でのマウスホイールにも対応
	１クリック目でスクロールバー位置がずれる不具合修正
	スライダーを子に持たないスクロールウインドウは　どこでもマウスホイールでスクロール


    不具合修正










2023/09/28_2
    EditMot 1.2.0.26へ向けて

    2023/09/28_2
	モデル設定ファイル修正
		2_Autumn_1 : 操作対象ボーン設定の NoHipsスロットにRootNodeが２つ入っていたのを削除
		1_Test20221218_CB0 : 物理設定refファイルの　剛体の回転バネ定数をregularからweakに変更

	OrgWindow : OnLRButtonDownのSetCaptureを if でreturnするよりも前に移動
		スクロールバーのSetCaptureがうまくいかないことがあったため


    2023/10/01
	操作対象ボーンファイル読み込み修正
		ダイアログにRootNodeとして現れるエントリは読み込まないように

    2023/10/02
	DirectXデバイスオブジェクトに関するメモリリークを真面目にチェック
		遅延解放かと思っていたのだが
		X(ツイッター)をみていたら　RefCountに0以外が書いてあったら　間違いなくメモリリークという記事があったので　改めて調査した
		
		メモリリークは解決したように思う
		ただし　メモリリークを確かめるためのd3dDebugインターフェイスは　d3dDeviceの参照も増やすようなので　デバッグビルドの際には　D3DDeviceのRefCountは２と出力される
		この件についての説明は　DXUT.cppのDXUTCleanUp3DEnvironment()内のコメントとして書いた

    2023/10/03_1
	OrgWindowのGUIスライダーの修正 _ 1
		スライダーのボタン描画を大きく丸く
		スライダーのボタンをクリックした瞬間にボタンが意図せず動かないように
		スライダーのボタンの中央からずれた位置をクリックしても　その位置を起点にスライド

    2023/10/03_2
	OrgWindowのGUIスライダーの修正 _ 2
		マウスをスライダーの上に乗せてホイールを回すと　1ピクセル分のvalueだけ　スライダーを増減
		スライダーのセンターラインを表示し　センターラインのどこでも　マウスドラッグ可能　(クリック位置起点ドラッグ)

    2023/10/04_1
	OrgWindowのダブルクリック対応

	OrgWindowのGUIスライダーの修正 _ 3
		スライダーのセンターライン上で　ダブルクリックした位置に　バリューボタンを移動

    2023/10/04_2
	OrgWindowのGUIスライダーの修正 _ 4
		スライダー値のアンドゥ機能
			マウスアップ時と左ダブルクリック時に　バリューを保存
			スライダー右ダブルクリックで　バリューをアンドゥ

			マウスホイールで設定した値を保存したい場合には　設定直後にスライダーのどこかをクリック(マウスアップを呼ぶ)
	
			アンドゥ用バッファは100万回分値を保存しますが　100万回を越えるとクリアーして空にします(シンプルさのため)
			アンドゥ用バッファは　アプリ終了時には　保存されません

    2023/10/04_3
	動画　モーキャプでポーズtoポーズ　ver.1.2.0.25
		https://youtu.be/e6XSIv3hiJI

    2023/10/04_4
	アプリの右ペインのショートカット一覧に　OWP_Sliderの操作説明追加

	ファイルオープン時に　重複する内容の履歴と　存在しないファイルの履歴を　自動削除
		履歴が多すぎるとオープン処理が重くなるため
		削除処理が走る際にいつもより重くなるが　１度削除が走った後は軽くなる

    2023/10/05_1
	DispGroupウインドウにSimilarCheck機能
		オブジェクトリストの要素のチェックのオンオフに　類似チェック機能を追加
			オブジェクトリストの表示要素を右クリックで　SimilarCheckのオンオフメニューが出る
			ON(pattern include num) : オブジェクト名の最初の '_'までの文字列が名前に含まれるものすべてにチェックオン
			OFF(pattern include num) : オブジェクト名の最初の '_'までの文字列が名前に含まれるものすべてにチェックオフ
			ON(pattern exclude num) : オブジェクト名の最初の '_'までの文字列の最後の数字を除いた文字列が名前に含まれるものすべてにチェックオン
			ON(pattern exclude num) : オブジェクト名の最初の '_'までの文字列の最後の数字を除いた文字列が名前に含まれるものすべてにチェックオフ

		例：
			Flower_Aというオブジェクトを右クリックして　ON(pattern include num)を選ぶと
			Flower_A, Flower_B, Flower_C, ... などのFlowerが名前に含まれるオブジェクトのチェックが全てオンになる

    2023/10/05_2
	LaterTransparentについてリファクタリング
		laternameを元にlatermaterialを準備して　リアルタイムの文字列比較を無くし　描画を高速化

	不具合修正
		モーション有のモデル読み込み後フレーム範囲を選択して-->モデル全削除-->モーションの無いモデル読み込み-->再生ボタンを押すと　エラーダイアログの後落ちる不具合修正
		s_model->GetCurMotInfo()のNULLチェック

	右ペインのショートカット一覧に　DispGroupWindowのSimilarCheckについて記述追加

    2023/10/06_1
	LaterTransparentプレートメニュー追加
		まだプレート表示だけ
		カエルボタンを押したときの　Lights, DispGroupの並びに追加
		
    2023/10/06_2
	LaterTransparent用のpng fileのgit add

    2023/10/06_3
	LaterTransparentのGUIが機能するように
		LaterTransparentDlgProc()実装





 


2023/09/28_1
    動画：モーキャプを滑らかにコピペ編集　(destHipsStartingPaste)
	https://youtu.be/A8E1K5UXOaM


2023/09/27
    EditMot 1.2.0.25 release

    シャツのすそを外に出しているVRoidモデルの表示対応
	シャツのすそで足の表示が欠けないように
	
	プロジェクトファイル(*.cha)の<Chara>タグと</Chara>タグの間に
	<LaterTransparent>_15.png</LaterTransparent>
	<LaterTransparent>_13.png</LaterTransparent>
	というようにテキストで記述すると
	そのキャラクターの描画の最後に　_15.png, _13.pngのテクスチャを貼っているオブジェクトを_15.png, _13.pngの順番で描画
	透過テクスチャの奥に透けて見えるオブジェクトを先に描画し　上に重なるオブジェクトを後に描画するように指定します

	ドキュメント追加
		Documants/TroubleShooting/DisplayOfPantsAreMissing.docx

    Fbx書き出し修正
	fbxInfoのリビジョン番号アップ
	FbxSurfacePhongのSetTransparencyFactorのセット値を修正
	シャツのすそを外に出しているVRoidの読書読書読テストOK

    dest Hips起点ペースト
	操作対象ボーンにHipsを含めずにHipsの子供を指定した場合のペースト処理修正
	ペーストされる側のペースト開始フレームのHips位置を起点にして　Hipsのモーションもペースト
	(原則としては　操作対象ボーンに含まれないボーンのモーションはペーストされない　Hipsは例外として処理)

	dest Hips起点ペーストについて　ドキュメント追加
		Documants/TroubleShooting/About_PasteStartingFromDestHips.docx

    DispGroupプレートメニューが使えるように
	GUIによるグループ番号のSet, Get, ON, OFF

	描画の際にはグループ番号の小さいものから描画される
	デフォルト状態では全てのメッシュのグループ番号は1
	半透明オブジェクトのグループ番号を大きく設定することにより　透過表示が綺麗になる
	Group単位での表示のオンオフによりモーション編集シーンの表示高速化
	設定時にTestボタンにより　指定メッシュオブジェクトを排他的に表示テスト

	DispGroupについてのドキュメントを追加
		Documants/TroubleShooting/AboutDispGroup.docx

    ショートカット
	左右の手の選択ショートカットキー　：　Hを押しながら左右矢印キー　(HandのH)
	左右の足の選択ショートカットキー　：　Fを押しながら左右矢印キー　(FootのF)
	Sキー＋マウス右ドラッグ　：　マニピュレータ表示倍率変更

	右ペインウインドウの初期表示に　ショートカットキー一覧を表示	

	ショートカットについてのドキュメント追加
		Documants/TroubleShooting/0_ShortCutKey.docx

    Testフォルダのモデル追加及び修正
	前髪にForbid Rot設定をして　前髪はほとんど揺れないように

	Test/0_VRoid_Spring_1
	Test/1_BoySporty_4
	Test/2_Autumn_1 (新規)	

	Spring_1については　髪の毛の剛体グループが同グループ同士で当たらない設定に修正してrefファイル保存

    設定ファイルの使いまわしをしやすく
	fbxファイルとの同期チェックを外し　ボーン情報は番号ではなく名前で入出力
	コピペしてファイル名を適切に変えるだけで使いまわし可能に
	tboファイルについて　必要分だけを読み書き　ジョイント情報を番号ペースから名前ベースへ変更










2023/09/04
    EditMot 1.2.0.25へ向けて

    2023/09/04
	部分コピペの修正
		hipsを除外してhipsの子供のツリーをコピペする場合　hipsの最初のフレームはペースト前の位置を保ち　hipsの移動モーションもペースト
		hips除外を特別扱いし別処理をしている
		テストを繰り返して　hipsを除外する場合の　望む結果に合わせたつもりの修正		

		部分コピペ設定ファイル(*.tbo)のLLegとRLegの設定修正

    2023/09/05_1
	時間端数処理についてリファクタリング
		ChaVecCalcに処理関数　IsEqualJustTime, IsEqualRoundingTime, RoundingTime, IntTime
		時間に関する+ 0.0001の直書き部分がほとんど無くなるように
    2023/09/05_2
	左右の手の選択ショートカットキー　：　Hを押しながら左右矢印キー　(HandのH)
	左右の足の選択ショートカットキー　：　Fを押しながら左右矢印キー　(FootのF)

	ショートカット一覧
		Documants/TroubleShooting/0_ShortCutKey.docx

    2023/09/07_1
	Sキー＋マウス右ドラッグ　：　マニピュレータ表示倍率変更

	右ペインウインドウの初期表示に　ショートカットキー一覧	

    2023/09/08
	Testフォルダのモデルの物理設定修正
		前髪にForbid Rot設定をして　前髪はほとんど揺れないように

		Test/0_VRoid_Spring_1
		Test/1_BoySporty_4

    2023/09/09_1
	制限角度ファイル(*.lmt)ファイルのfbx日時との同期チェックを外して　使いまわししやすいように

    2023/09/11_1
	操作対象ボーンダイアログの設定ファイルの修正
		ボーン情報をボーン番号からボーン名に変更して　使いまわししやすく

    2023/09/15_1
	操作対象ボーンファイル*.tboの読み込みに関するリファクタリング

    2023/09/17_1
	dest Hips起点ペーストについて　ドキュメント追加
		Documants/TroubleShooting/About_PasteStartingFromDestHips.docx

    2023/09/18_1
	Disp Groupプレートメニュー
		まずはGUIだけ右ペインに表示

    2023/09/19_1
	DispGroupプレートメニュー工事中
		Testボタンで排他的表示テスト
		親がスクロールウインドウのセパレータの表示高速化

    2023/09/19_2
	DispGroupプレートメニュー工事中
		meshobjectの最大数を撤廃してvectorで管理
		DispGroupプレートメニュー選択時に　モデルを切り替えた場合に対応

		説明し忘れていましたが
			DispGroupのtestボタンは　指定メッシュオブジェクトを排他的に表示テストするためのボタン
	
		明日以降　Group番号のGetとSetを実装予定
		
		予定としては　
			Group単位での表示のオンオフによりモーション編集シーンの表示の高速化
			Group番号の若い順に表示することにより半透明描画を綺麗に	
			もしかすると　Group番号ごとのバウンダリーのカメラからの距離により描画順を制御することも必要？？

    2023/09/20
	DispGroupプレートメニュー工事中
		DispGroupファイル(*.dig)をプロジェクト読み書き時に読み書き
		DispGroupのGroup番号が小さい順に描画

		明日以降　GUIによるGroup番号のGetとSetとオンオフを実装予定

    2023/09/21_1
	DispGroupプレートメニューが使えるように
		GUIによるグループ番号のSet, Get, ON, OFF

		描画の際にはグループ番号の小さいものから描画される
		デフォルト状態では全てのメッシュのグループ番号は1
		半透明オブジェクトのグループ番号を大きく設定することにより　透過表示が綺麗になる
			例　UnityAsset JapaneseCityにおいて Sakuraのグループ番号を大きく設定することにより　花のエッジが黒くならない

		課題
			モデル単位の描画順序設定もするべき
				例　UnityAsset JapaneseCityにおいて Sakuraを含むfbxの描画順序を後にすると綺麗に表示される

    2023/09/21_2
	DispGroup導入で　ボーン操作用オブジェクトが表示されなくなっていたのを修正

	DispGroupについてのドキュメントを追加
		Documants/TroubleShooting/AboutDispGroup.docx



2023/08/30
    EditMot 1.2.0.24 release

	メッシュ単位の視野内判定導入
		広いシーンで表示の高速化
		みえているかを判定するには　何段階かの処理を組み合わせると思う　その１段階目の判定
		hipsジョイントがモーションで大きく動いた場合にも対応

	対称コピー機能の修正
		長らくテスト項目から外れていたので　テスト＆修正で機能するように

	コピー履歴機能の修正
		履歴ウインドウを出しながらコピーをして履歴ウインドウをクリックしないでペーストした場合など　うまくいっていなかったので修正
		複数モデル読み込み時に　操作中のモデルの履歴だけを検索した結果を表示　(他モデルの履歴も手動で検索可能)
		選択済み履歴をモデルごとに管理
		コピー履歴ウインドウを開いた状態でコピーを行った場合で　最新履歴のチェックが外れている場合は　履歴の選択状態を維持

	操作対象ボーンダイアログ修正
		操作対象ボーンダイアログをモデルごとに作成して保持
		モデルを切り替えたときの操作対象ボーンが間違っていたのを修正
		操作対象ボーン設定はモデル単位なので　保存と読み込みは　プロジェクトの保存と読み込み実行の際に行う
		全削除ボタンを押したときに　カレントスロット以外のスロットの内容も初期化される不具合を修正
		ダイアログ表示時に前回のスロット選択を復元
		操作対象ボーンダイアログのスロット数を 2倍の 20個に
	
		操作対象ボーン設定の仕方の見直し
			指定したボーンツリーの内の一番親のジョイントは動かない仕様なのでそれに合わせて設定
			動かしたいジョイントの１つ親のジョイントから動かすように設定　その際動かしたくないジョイントは　ペーストしないボーンツリーに指定
			Test/0_VRoid_Spring_1と Test/1_BoySporty_4の　*.tbo設定ファイル更新

	カメラドリーの履歴対応
		ToolWindowのカメラドリーボタンで右ペインにドリー履歴ダイアログを表示
		Getボタンで　現在のカメラ位置をダイアログに取り込み
		Setボタンで　ダイアログの数値をカメラに反映
		Saveボタンで　ダイアログの数値を履歴ファイルに保存
		履歴のラジオボタン選択で　履歴をダイアログ数値に取り込みカメラ位置も反映
		ページ対応

	リターゲットの際に　モーション側(bvh側と呼んでいる側)の全モーションに対して処理を行うように修正

	ボーン無しのfbxを読み込んで保存する際にエラーになることがある不具合を修正

	ハイレスポンスなToolTipの表示
		スプライトボタン、ジョイント(ボーン)、リグの上にマウスがある場合にツールチップを表示
		ツールチップ文字に縁取り

	Lightsプレートメニュー追加
		Lightsプレートメニューを選択すると　右ペインにLights for Edit Dialogが出ます
		有効無効、色、向き、強さスライダーとカメラと共に回転するかどうかの設定が可能
		８個 x ８スロット
		編集用のライトの設定です　シーン構築用ライトではありません
		アプリ終了時に自動保存、アプリ起動時に自動読込
	
	メニュー切り替えショートカットキー
		スペースキー　：　プレートメニューの種類変更
		C押しながらスペースキー　：　プレートメニューのプレート変更
		V押しながらスペースキー　：　ツールショートカットボタンのフェーズ切り替え
	
		エディットボックスに入力中は　キーボードショートカット機能が実行されないように

	スキンメッシュのボーン影響度の最小値を0.05-->0.001に変更
	
	GUIを使ってリターゲットする際の不具合修正
		ボーン番号とボーンの総数の混同が原因
		リターゲットウインドウのジョイントの最後の１つ２つの設定が効かない症状だった
	
	LimitEulオンの時の自動平滑化をオフ
		少ないフレーム数をIKしたときに動きが元に戻る症状が無くなった
		平滑化が必要な時に　手動でSmoothボタンを押す

	スプライトボタン右クリック
		Smoothスプライトボタン　：　左クリックで前回設定で即時実行　右クリックでメニューとダイアログを出してから実行
		ペーストスプライトボタン　：　左クリックで即時ペースト　右クリックで操作対象ボーン設定後ペースト　	
	
	ジョイント右クリック
		ジョイントを右クリックしたときのメニューに　CopyMotionとPasteDeeperメニューを追加
		PasteDeeperは右クリックしたジョイントより子供のジョイントに対してモーションをペースト
		CopyMotionはどのジョイントをクリックしても全ボーンのモーションをコピー

	カメラスプライトボタン
		カメラ回転スプライト右ドラッグでカメラツイスト
		カメラ回転スプライト右ダブルクリックでカメラツイスト初期化
		
	CameraAndIKプレートメニューグループに　３フェーズのツールショートカットボタンを追加
		青いカエルボタンもしくはV+Spaceキーでフェーズ切り替え

	メモリリークが直った
		あるスプライトをdeleteする前に0セットしていた不具合修正
		カメラノードのデストラクタが呼ばれていなかった不具合修正

	ボタンの文字を見易く
		ボタンの白い文字を緑色で縁取り


	マウスドラッグが途中で中断されたりドラッグ終了処理が行われなかったりした不具合修正

	カメラドリーウインドウやコピー履歴ウインドウが　剛体設定ウインドウと重なって表示されることがある不具合修正

	マテリアル倍率設定ウインドウ表示中に　モデルを切り替えた場合に対応	

	スレッド作成時にaffinity設定して負荷を分散

	リグファイル内のジョイント名に _Joint が付いていても付いていなくても読み込めるように
		*.rig 設定ファイルの使いまわしがしやすいように修正

	ドキュメント更新
		Documants/TroubleShooting/ACaseCantReadFbxFileSavedByEditMot.docx
		Documants/TroubleShooting/AboutDifferentSmoothSpriteBtnFromSmoothToolBtn.docx
		Documants/TroubleShooting/HowToSymCopyAndPasteToDifferentModel.docx

	Testフォルダ
		Test/0_VRoid_Spring_1, Test/1_BoySporty_4のモデルを動かした場合に太ももとパンツの前後関係が乱れる不具合修正
			影響度の読み書き部分の修正後に　元データから保存し直して　問題データのモーションだけリターゲットして復元

		Test/RetargetSettingFileExample/VRoid_VRoid.rtg 設定ファイルを追加
			VRoidからVRoidへモーションをリターゲットする際の設定ファイル


	RC1 : １つのfbx中に　複数のhipsが存在する場合のChkInViewを修正
	　　　右ドラッグでのツイストカメラのキャプチャーが意図せず途切れることが無いように
	　　　右ドラッグ中の左ボタン、左ドラッグ中の右ボタンで誤動作しないように
	RC2 : RefPos表示の修正　選択ジョイントの三角鎖マークの軌跡がモデルのworldmatを考慮していなかったのを修正
	RC3 : スプライトボタン右クリックまたはジョイント以外の場所右クリックの場合には　ジョイント右クリック用のメニューを出さないように
	RC4 : エディットボックス入力時には　矢印キーのショートカット(ジョイント階層移動)も機能させないように
	RC5 : VRM1.0をfbxにして読み書きテスト　VRM1.0のテクスチャ(.texture2Dファイル)をUnityのスクリプトでpngにしてfbxと同じフォルダに置くと表示できるようにしときました
	　　　メッシュが無いfbx(例えばbvh2fbxで変換したfbx)がChkInViewで非表示に設定されてリターゲットもうまくいかない不具合修正
	RC6 : VRMのテクスチャが異なるモデルを複数入れたプロジェクトを　読->書->読->書してMayaで開くと　違うモデルのテクスチャが表示されることがある不具合修正
	　　　リターゲット時のトラブルシューティング追加　Documants/TroubleShooting/RetargetFailThoughZeroFrameisMatch.docx
	RC7 : メモリアライメントが合っていないことが原因で　複数ライトの向きがずれていた不具合を修正
	release : RC7でライト向き(XとY)の表記が反対向きになってしまっていたので修正
		VisualStudioセキュリティー更新後　フルビルドして　インストーラmsiをリリース










2023/08/05
    EditMot 1.2.0.24へ向けて


    2023/08/05		
	リグファイル内のジョイント名に _Joint が付いていても付いていなくても読み込めるように
		*.rig 設定ファイルの使いまわしがしやすいように修正

    2023/08/07_1
	ジョイント名に_Jointという文字列が付いている場合と付いていない場合の処理についてリファクタリング
		２つの名前を検索する場所を１か所に

	ドキュメント更新
		Documants/TroubleShooting/ACaseCantReadFbxFileSavedByEditMot.docx

    2023/08/07_2
	プレートメニューに　LightsプレートとDispGroupプレートを追加
		カエルボタンを押すと出ます
		まずはメニューだけ. 機能の実装はこれから.

	2023/08/07_1で　コミット直前にテキストエディタでUTF-8で保存したファイルがVisualStudioでビルドできなかったので修正
		UTF-8(signature付)で保存し直し

    2023/08/08
	Lightsプレートメニューの機能の実装
		Lightsプレートメニューを選択すると　右ペインにLights for Edit Dialogが出ます
		有効無効、向き、色、向きをカメラと共に回転するかどうかの設定が可能
		とりあえず４つまでに制限して様子見
		シーンのライト設定ではなく　編集用のライトの設定です
		Lightsパラメータの保存読み込みについては後ほど

	EditMotはモーキャプ編集ソフトであってレンダーソフトではないので　軽い表示で編集しやすくを目標に


    2023/08/09_1
	スキンメッシュのボーン影響度の最小値を0.05-->0.001に変更
	
	Test/0_VRoid_Spring_1のモデルを動かした場合に太ももとパンツの前後関係が乱れる不具合修正
		影響度の読み書き部分の修正後に　元データから保存し直して　問題データのモーションだけリターゲットして復元

	Test/RetargetSettingFileExample/VRoid_VRoid.rtg 設定ファイルを追加
		VRoidからVRoidへモーションをリターゲットする際の設定ファイル

    2023/08/09_2
	スキンメッシュのボーン影響度の最小値変更もう１か所

	GUIを使ってリターゲットする際の不具合修正
		ボーン番号とボーンの総数の混同が原因
		リターゲットウインドウのジョイントの最後の１つ２つの設定が効かない症状だった
	
    2023/08/09_3
	LimitEulオンの時の自動平滑化をオフ
		理由
		　１、少ないフレーム数をIKしたときに動きが元に戻るのが煩わしいから
		　２、自動平滑化は全ジョイントが対象になっていたので　制限内のジョイントまで動きが小さくなるのが手間だったから
		今後
		　平滑化が必要な時に　手動でToolWindowの平滑化でDeeperなどを実行する

	平滑化の設定を毎回するのが手間なので　Smoothスプライトボタンにて前回実行した設定で平滑化


    2023/08/10_1
	Smoothスプライトボタン　左クリックで前回設定で即時実行　右クリックでメニューとダイアログを出してから実行

	ドキュメント更新
		Documants/TroubleShooting/AboutDifferentSmoothSpriteBtnFromSmoothToolBtn.docx

    2023/08/10_2
	LightsForEditDlgリファクタリングと不具合修正

    2023/08/10_3
	LightsForEditDlg
		編集用ライト最大数を最大８個に変更
		シェーダーに渡すライトの向きはGUI設定の向きにマイナスを掛けたもの(計算の都合)
		ライトの初期値に少し下向き成分を加えた

    2023/08/11_1
	CameraAndIKプレートメニューグループにコピーペースト用のスプライトボタンを４つ追加
		カメラ操作用スプライトボタンの下に４つ追加
		左から　コピーボタン、対称コピーボタン、ペーストボタン、コピー履歴ボタン

	メモリリークが直った
		あるスプライトをdeleteする前に0セットしていた不具合
			スプライトメモリのリークが直った
		デバッグビルドで実行して終了すると　まだデバイスのLive情報が出ているが　調べたところDirectX11の遅延解放であってリークではない？

    2023/08/11_2
	対称コピーボタンとSmoothボタンのデザインを修正

    2023/08/12
	ボタンの文字を見易く
		ボタンの白い文字を緑色で縁取り

    2023/08/13
	対称コピー機能の修正
		Hipsジョイントの対称オプションを決定してからコピーするために　コンテクストメニュー呼び出し後ループを１周回してからコピー
		対称移動成分計算部分がコメントアウトされていたのを修正
		対称移動成分の符号が２回反転されていたのを修正
		ローカルのクォータニオン計算部分も修正

	コピー履歴機能の修正
		履歴ウインドウを出しながらコピーをして履歴ウインドウをクリックしないでペーストした場合など　うまくいっていなかったので修正

    2023/08/14
	リターゲットの際に　モーション側(bvh側と呼んでいる側)の全モーションに対して処理を行うように修正

	ジョイント名からCBoneを取得する際に　_Joint文字列の有無に対応していなかった箇所を修正
	
	ドキュメント追加
		Documants/TroubleShooting/HowToSymCopyAndPasteToDifferentModel.docx

	Testフォルダのモデル修正
		fbx保存機能修正途中のMameBake3Dで保存したfbxの影響度が少し変(胴体を曲げると服との前後関係に問題が出ていた)だったので　元データにモーションをリターゲットして復元
		Test/1_BoySporty_4

    2023/08/16_1
	ToolTipの表示
		スプライトボタン、ジョイント(ボーン)、リグの上にマウスがある場合にツールチップを表示

    2023/08/16_2
	ToolTipのテキストに縁取り効果追加

    2023/08/17_1
	ペーストスプライトボタン右クリックと左クリック
		右クリックで操作対象ボーン設定後ペースト、　左クリックで即時ペースト	

    2023/08/17_2
	編集用ライト設定をソフト終了時に自動保存、ソフト起動時に自動読込

    2023/08/17_3
	ジョイントを右クリックしたときのメニューに　CopyMotionとPasteDeeperメニューを追加
		PasteDeeperは右クリックしたジョイントより子供のジョイントに対してモーションをペースト
		CopyMotionはどのジョイントをクリックしても全ボーンのモーションをコピー

	操作対象ボーンダイアログをモデルごとに作成して保持
		モデルを切り替えたときの操作対象ボーンが間違っていたのを修正

   2023/08/18_1
	マウスドラッグが途中で中断されたりドラッグ終了処理が行われなかったりした不具合修正
		原因：マウスドラッグ中にフォーカスを持つDXUTコントロール上(ToolTipなど)を通るとキャプチャーが外れていた
		対策：IK中とカメラドラッグ中にはDXUTコントロールを非表示にした
		
	ペーストスプライトボタン右クリックで対象ボーン設定ダイアログをキャンセルした場合にもペーストが行われる不具合修正
		キャンセルした場合にはペーストしないように

   2023/08/18_2
	スペースキーを押すたびにメニューの種類を変更
	Cキーを押し続けながらスペースキーを押すたびにメニューのプレートを変更

	カエルボタンにもツールチップ

   2023/08/18_3
	LightメニューのLightsForEditダイアログの個々のライトにライト強度のスライダーを追加
		自動保存自動読込
	
	DispAndLimitsメニューのライト強度スライダーの値は　個々のライト強度に更に掛け算することに
		自動保存自動読込

   2023/08/19_1
	操作対象ボーンダイアログの設定をプロジェクト保存時に保存　プロジェクト読み込み時に読み込み
		操作対象ボーンダイアログはペーストスプライトボタン右クリックでも出ます

   2023/08/19_2
	コピー履歴ウインドウ修正
		複数モデル読み込み時に　操作中のモデルの履歴だけを検索した結果を表示　(他モデルの履歴も手動で検索可能)
		選択済み履歴をモデルごとに管理
		コピー履歴ウインドウを開いた状態でコピーを行った場合で　最新履歴のチェックが外れている場合は　履歴の選択状態を維持

   2023/08/21_1
	操作対象ボーンダイアログ(FrameCopyDlg)修正
		全削除ボタンを押したときに　カレントスロット以外のスロットの内容も初期化される不具合を修正
		ダイアログ表示時に前回のスロット選択を復元
		
   2023/08/21_2
	操作対象ボーン設定の仕方の見直し
		指定したボーンツリーの内の一番親のジョイントは動かない仕様なのでそれに合わせて設定
		動かしたいジョイントの１つ親のジョイントから動かすように設定　その際動かしたくないジョイントは　ペーストしないボーンツリーに指定
		Test/0_VRoid_Spring_1と Test/1_BoySporty_4の　*.tbo設定ファイル更新

   2023/08/21_3
	操作対象ボーンダイアログのスロット数を 2倍の 20個に

   2023/08/22_1
	カメラ回転スプライト右ドラッグでカメラツイスト
	カメラ回転スプライト右ダブルクリックでカメラツイスト初期化

   2023/08/22_2
	編集用ライト設定を８スロット(1スロット当たりライト８個 x 8スロット)切り替え可能に

   2023/08/22_3
	ツールスプライトボタン　２段構えに
		Vキーを押したまま　スペースキーを押すと　ツールスプライトボタンが変化
		１段目は　今まで通り　コピー、対称コピー、ペースト、コピー履歴
		２段目は　補間、初期化、スケール初期化、モーションプロパティ

		それぞれ　ToolWindowのツールボタンのショートカットである

		備考
		スペースキーだけ押すと　プレートメニューの種類変更
		Cキーを押したまま　スペースキーを押すと　プレートの変更
		右手でマウス　左手でキーボードを想定して押しやすくしたつもりの設定
		DXUTのスペースキーによるボタンのプッシュはコメントアウト

   2023/08/23
	カメラドリーの履歴対応
		ToolWindowのカメラドリーボタンで右ペインにドリー履歴ダイアログを表示
		Getボタンで　現在のカメラ位置をダイアログに取り込み
		Setボタンで　ダイアログの数値をカメラに反映
		Saveボタンで　ダイアログの数値を履歴ファイルに保存
		履歴のラジオボタン選択で　履歴をダイアログ数値に取り込みカメラ位置も反映
		ページ対応

   2023/08/24_1
	ボーン無しのfbxを読み込んで保存する際にエラーになる不具合を修正

   2023/08/24_2
	エディットボックスに入力中は　キーボードショートカット機能が実行されないように

	カメラドリーウインドウやコピー履歴ウインドウが　剛体設定ウインドウと重なって表示されることがある不具合修正

	マテリアル倍率設定ウインドウ表示中に　モデルを切り替えた場合に対応	

   2023/08/24_3
	メニュー変更用のFrogボタンを　ツールスプライトボタンの横にも表示
		スペースを空けるために　カメラ読み込み時のカメラ継承モードボタンは横向きに表示

	カメラを読み込んだ場合　終了時にメモリリークする不具合修正
		非ポインタメンバのDestroyObjs()を明示的に呼び出して解決

   2023/08/25_1
	ツールスプライトボタン　３段構えに
		Vキーを押したまま　スペースキーを押すと　ツールスプライトボタンが変化
		１段目は　今まで通り　コピー、対称コピー、ペースト、コピー履歴
		２段目は　補間、初期化、スケール初期化、モーションプロパティ
		３段目は　0フレーム編集(0フレームへ移動)、カメラドリー、モデルワールド位置向き、マテリアル倍率

		それぞれ　ToolWindowのツールボタンのショートカットである

   2023/08/26_1
	メッシュ単位の視野内判定導入
		広いシーンで表示の高速化
		みえているかを判定するには　何段階かの処理を組み合わせると思う　その１段階目の判定
		
   2023/08/26_2
	視野内判定の実行の仕方を修正
		モーションが無いモデルに対してもChkInViewが呼ばれるように
		街などのシーン表示の高速化(１段階目としての)

   2023/08/26_3
	視野内判定リファクタリング
		メッシュの数が多いアセットにおいて　更に少し高速化

   2023/08/27_1
	hipsジョイントがモーションで大きく動いた場合に　視野内なのに視野外判定される不具合を修正
	スレッド作成時にaffinity設定して負荷を分散









2023/08/02
    EditMot 1.2.0.23 release

	使用メモリ大幅削減
		約３万ポリゴンVRoid 1体 1000フレームモーキャプ１つの場合
			1.2.0.22 : 1.4GB
			今回 :	   0.4GB
		UnityAsset TheHuntのCity1読み込みで比較
			1.2.0.22 :  21.8GB
			今回 :	     1.4GB (Peak使用量 2.9GB)
		UnityAsset MountainEnvironment読み込み比較
			1.2.0.22 :  56.5GB
			今回 :	     1.2GB (Peak使用量 11.1GB)
	

        ファイルオーブン用のダイアログの履歴にページ機能追加
		Next PageボタンとPrev Pageボタンでページをめくる

	ファイルオープンダイアログに
		前回の場所参照、Testフォルダ参照、ドキュメント参照、Desktop参照、EditMotフォルダ参照　ボタンを追加
		フォルダの場所を探す手間を減らしました


	コピー履歴ダイアログにもNextPageボタンとPrevPageボタンを追加　複数ページ対応


	モーションスピードを１倍速より遅くした場合に再生が滑らかにならないことがあったのを修正
		補間計算時間に関する修正を２種類あるデータ構造の両方に適用


        IKStopFlagの指定をchaファイルで指定可能に
            IK階層数コンボボックスで 1 よりも大きい値を選んだ場合　途中でIKStopがあるとそこで回転は止まる
            古いchaファイルを保存し直すと次のようなエントリーがテキスト出力される
                <CustomIKStopName>1</CustomIKStopName>
                <IKStopName>Shoulder</IKStopName>
                <IKStopName>UpperLeg</IKStopName>
            このエントリーを例えば次のように指定し直すことが可能
                <CustomIKStopName>1</CustomIKStopName>
                <IKStopName>UpperArm</IKStopName>
                <IKStopName>Neck</IKStopName>
                <IKStopName>UpperLeg</IKStopName>
            IKStopNameの指定は　ジョイント名の一部で良い(名前の部分一致で判定する)




	RC2 : ファイルオープンダイアログに　各種参照ボタン追加
	RC3 : 1.2.0.22から1.2.0.23への変更で　bvhからリターゲットしたモーションの保存が出来なくなっていた不具合を修正

	RC4 : 0.0700倍速でテストして　滑らかにならないモーションがあったので修正
		ver1.0.0.21からはモーションキーのデータ構造が２種類ある
		2022/12/26に滑らかさに関して修正したが　２種類の内の１種類にしか修正を行わなかった
		表示高速化のための２種類目が動くようになり問題発覚
		修正内容としては　GetBefNextMPのindexed計算における時間一致の部分の修正
		データ構造２種類とも　滑らかに再生されるようになった
		モーションのキーの時間に関しては読み込み時にintに揃えてリサンプリングしている　今回の問題は表示時の補間計算時間の問題


　おちゃっこLAB
	https://ochakkolab.jp/

　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab

	動画　0.07倍速でパンチしたら物理はどうなるんだろう？
		https://youtu.be/gKuLzPDt-cc

	動画　【小人】小人制御の物理【ドリブン】
		https://youtu.be/SRoi8Ds9NYI

	動画　いろいろ直った物理でボクシングの動画	
		https://youtu.be/Zr7fT1gsCl4

	動画　作り直した位置コンストレイント
		https://youtu.be/8p13H6MGQZ8

	動画　変な風には曲がらない位置コンストレイント
		https://youtu.be/9Xt8cxjByeA

	動画　制限角度をキャプチャーする
		https://youtu.be/mkkpo5cmLBs

	動画　モーキャプの動きを盛れ！
		https://youtu.be/DV9gYsgDzz0



2023/07/21
    EditMot 1.2.0.23へ向けて

    2023/07/21
        IKStopFlagの指定をchaファイルで指定可能に
            古いchaファイルを保存し直すと次のようなエントリーがテキスト出力される
                <CustomIKStopName>1</CustomIKStopName>
                <IKStopName>Shoulder</IKStopName>
                <IKStopName>UpperLeg</IKStopName>

            このエントリーを例えば次のように指定し直すことが可能
                <CustomIKStopName>1</CustomIKStopName>
                <IKStopName>UpperArm</IKStopName>
                <IKStopName>Neck</IKStopName>
                <IKStopName>UpperLeg</IKStopName>

	IKStopNameの指定は　ジョイント名の一部で良い(名前の部分一致で判定する)

	IKStopFlagの指定は　IK階層数コンボボックスで階層数に1より大きい値を指定している場合に作用する
		例えば階層数を４に指定すると　ドラッグしたジョイントを含めて親方向に４階層分回転する
		しかし　４階層の途中にIKStopFlag指定のジョイントがあると　そこでドラッグによる回転は止まる

	chaファイルではなくfbxファイルだけを読み込んだ場合や古いchaファイルを読み込んだ場合は
		ShoulderとUpperLegを名前に含むジョイントにIKStopFlagを設定する(デフォルト設定)

    2023/07/22
        ファイルオーブン用のダイアログの履歴にページ機能追加
		20件までしか履歴がありませんでしたが　20件を１ページとして複数ページに対応
		Next PageボタンとPrev Pageボタンでページをめくる
		重複ファイル名は取り除いてリスト

		履歴が１件もない場合にもエラーにならないように
		対象ファイルが存在しない履歴は表示しないように

	コピー履歴が１件もないときにコピー履歴ボタンを押したときにエラーにならないように

    2023/07/23
	ファイルオープン履歴のリファクタリング
		履歴取得時とページング処理時とで同じ履歴を使うように
		データ処理の一貫性

    2023/07/24
	コピー履歴ダイアログにもNextPageボタンとPrevPageボタンを追加　複数ページ対応
		ToolWindowのコピー履歴ボタンを押すと　右ペインに　コピー履歴ダイアログが出ます

    2023/07/29
	読み込み時に　メッシュごとに　スキンメッシュと非スキンメッシュを作り分け
		表示が速くなるかどうか　メモリは節約できるかどうか
		
		それなりに効果はあった
		保存に関しては　まだ未テスト状態

    2023/07/29_2
	スキンメッシュと非スキンメッシュ　保存対応
		カメラの子供のスキンメッシュは　保存で変になるので　しばらく禁止
		カメラの子供のスキンメッシュは他ソフトで消してから　本ソフトで読み込む
	
    2023/07/30
	使用メモリを少し節約
		読み込みながらMakeDispObj()をして使わないメモリをfree
			ツールならではの制限
				マウスとの当たり判定でシステムメモリに頂点座標が必要なので　あまり節約できない
				保存の時に参照するのでfbxsdkでの読み込み結果を削除できず　あまり節約できない
			
			UnityAsset MountainEnvironment読み込み比較
				1.2.0.22 Release アイコンダブルクリック起動後読み込み : 56,517MB
				今回のものをビルドしてアイコンダブルクリック起動後読み込み : 38,024MB

			UnityAsset TheHuntのCity1読み込みで比較
				1.2.0.22 Release アイコンダブルクリック起動後読み込み : 21,750MB
				今回のものをビルドしてアイコンダブルクリック起動後読み込み : 18,012MB

	非スキンメッシュ作成時にfbx読み込みとmqo読み込みを区別して座標系の違いに対応

	*)スキンメッシュはボーン変形用メッシュ　非スキンメッシュは背景などのボーンが入っていないメッシュ

    2023/07/30_2
	使用メモリを更に節約

		UnityAsset MountainEnvironment読み込み比較
			1.2.0.22 Release アイコンダブルクリック起動後読み込み : 56,517 MB
			今回のものをビルドしてアイコンダブルクリック起動後読み込み : 26,307 MB (Peak時 約36,000 MB)

		UnityAsset TheHuntのCity1読み込みで比較
			1.2.0.22 Release アイコンダブルクリック起動後読み込み : 21,750 MB
			今回のものをビルドしてアイコンダブルクリック起動後読み込み : 16,226 MB (Peak時 約16,900 MB)


	上記メモリ使用量は　プロが作成した大きな詳細なステージ読み込み時のもの


	約３万ポリゴンキャラクター１体 1000フレームモーション１つの場合
		Test/0_VRoid_Spring_1/0_VRoid_Spring_1.cha読み込み時　約1,600 MB

    2023/07/30_2
	使用メモリ過大の原因を突き止めて更に節約
		使用メモリ過大の原因は　剛体表示用の形状セットを　ボーンとeNull全部に対して作成していたことだった
		剛体表示セットは１セット7MBほど　ボーンとeNullで2,300個以上の場合　16GBに相当した

	修正後の使用メモリ比較
		約３万ポリゴンキャラクター１体 1000フレームモーション１つの場合
			1.2.0.22 : 1,460 MB
			今回 :	     423 MB
		UnityAsset TheHuntのCity1読み込みで比較
			1.2.0.22 :  21,750 MB
			今回 :	     1,400 MB (Peak 2,900 MB)
		UnityAsset MountainEnvironment読み込み比較
			1.2.0.22 :  56,517 MB
			今回 :	     1,200 MB (Peak 11,100 MB)
		



2023/07/20
	README.md更新
	
	動画追加
	0.07倍速でパンチしたら物理はどうなるんだろう？
	https://youtu.be/gKuLzPDt-cc


2023/07/12
	カメラの名前の付け方の補足を追記
		Documants/TroubleShooting/AboutCameraAnim.docx
	
2023/07/07
	EditMot 1.2.0.22 release

	使用しているMicrosoftのOSS DXUT, DirectXTex, Effect11をJun2023へバージョンアップ

	カメラパネル新規
		4Kモードの時にはモーションパネルの下に埋め込み　それ以外の場合には表示メニューのカメラパネル実行でパネル表示非表示切り替え
		複数カメラアニメ対応
		カメラアニメのフレーム番号(時間)は　キャラクタアニメのフレーム番号とは別管理

	カメラのUpVecアニメに対応

	Nullノードにアタッチしたアニメーションの読み書き再生対応
		２種類のカメラ構成に対応し　アセットのカメラへの対応が楽に
		ドキュメント更新
			Documants/TroubleShooting/AboutCameraAnim.docx (UnityとMayaとの連携の仕方についても記述)

	RotationOrderを見直し　テストし直し

	bvh2fbxによるfbx出力形式修正

	Test/testBvhConvフォルダのfbxのサンプル更新
		bvh2fbxによるfbx出力形式が変わったのでサンプルも更新

	読み込みボーン最大数を256から1024へ変更

	メモ
		RC1 : readme.txtをUTF-8にしてRC1としてコミット. リリース前のテスト開始.
		RC2 : アニメの無いカメラ(１つだけ)対応. 　アニメがあるカメラの0フレームの位置と向き修正.

		release : 
			Test/testBvhConvフォルダのfbxサンプル更新
			RC2における修正の部分的ロールバック(INHERIT_CANCEL_NULl2用の位置補正の計算場所を元の場所に)
			アセット読み込み時にリターゲットウインドウが真っ白 ---> CONVBONEMAXを256から1024へ変更　アセット読み込み時にボーン制限数をオーバーしたため


2023/06/15
	EditMot 1.2.0.22へ向けて

	######
	 予定
	######
	前回の更新から少し間が空いているので　とりあえず予定だけ書いておきます

		1.2.0.21は　取っ掛かりとしてのカメラアニメ１つだけ対応
			補足：カメラアニメとして認識させるには　アニメーション名に"Camera"という文字列を含ませる必要があります

		1.2.0.22以降で　
			複数カメラアニメ対応と　モデルアニメとは別アニメとしてカメラアニメを編集可能にしていく予定
			ステージ読み込みによりジオメトリが多くなり表示が重くなった --> MeshのVisibleGroupの設定とタイムラインでのVisiblityオンオフ設定に対応予定
			表示方法へのテコ入れについては　それよりも後の予定

	#######
	 作業 
	#######
	2023/06/17
		カメラアニメに関する作業を進める前に
		使用しているMicrosoftのOSS DXUT, DirectXTex, Effect11をJun2023へバージョンアップ
		全てのカスタム定義の構造体にコンストラクタを

	2023/06/18
		カメラパネル新規
			4Kモードの時にはモーションパネルの下に埋め込み　それ以外の場合には表示メニューのカメラパネル実行でパネル表示非表示切り替え
			複数カメラアニメ対応
			カメラアニメのフレーム番号(時間)は　キャラクタアニメのフレーム番号とは別管理
			EditMotで読み込み可能なカメラアニメ付きfbxを用意する際
				カメラ初期位置向き調整用ヌルノード１つ-->カメラオブジェクト１つ-->カメラオブジェクトにAnimator Controllerコンポーネント１つ-->その下に複数カメラアニメ

	2023/06/21　メモ
		Unity2022のLTSが発表された　何かが変わった？ようで　カメラアニメの表示が変になった
		Unity2022.3.1f1で出力したカメラアニメ付のfbxを表示するために　試行錯誤の嵐
		なんとか再生できるようになった
		#### 使い方変更 ####
			カメラの初期の位置と向き設定用Nullノードの下に　カメラオブジェクト(位置向きは設定しない)を置く
			カメラオブジェクトにアニメーションをコンポーネントとして追加
			!!!!!!!! カメラオブジェクトの名前と　アニメーションの名前を一致させることが読み込み条件 !!!!!!!!!!!!!!
			 
			上記のようなNullノード-->カメラオブジェクト-->アニメ１つのセットを　複数読み込み再生可能
			 
			2023/06/21現在　うまく再生できるものと　変になるものがある状態
			 
			 
		とりあえず　試行錯誤の痕跡(その次のコミットで消す予定)を残したものを　一度コミット
		今後　これを足掛かりにして調整していく

	2023/06/23
		CalcLocalNodeMat()内の　prerot, lclrot, postrotの掛ける順番を修正したところ　カメラ再生が改善した　がまだ問題がある
		TheHunt City1(VisualStudioでデバッグ時メインメモリ33GB使用)のCamera_1はOK. Camera_2はUpVecの操作を加える必要有
		TheHunt Street1のCamera_1は大体OK. Camera_2, Camera_3はまだ位置がずれている
			
	2023/06/25
		カメラのモードAll,モードCancel1,モードCancel2の修正
		カメラのUpVecアニメに対応

		テスト
			TheHunt City1
				[Camera_1]:モードCancel1で正常再生　保存後読み込みOK
				[Camera_2]:モードCancel1で正常表示　UpVecアニメもOK　保存後読み込みOK
			TheHunt Street1
				[Camera_1]:モードCancel2で正常表示　保存後読み込みは位置が上にずれた
					   モードCancel1でXZ０地点を起点に似た動作　保存後読み込み時にもCancel1でXZ０地点を起点に似た動作
				[Camera_2]:モードAllで正常表示　保存後読み込みOK
				[Camera_3]:モードCancel1で位置が下にずれ　保存後読み込みはモードCancel2で位置が左にずれ　(他のモードでは大きく違う)
			Spring_1に自分でカメラをカスタム設定
				モードAllで正常表示　保存後読み込みOK

			テストの感想
				再生できるカメラアニメが増えた　保存も大体良さそう
				しかし
				Unity上ではどれも同じように設定している(つもり)なのだが　本ソフトでなぜ手動モード切替が必要なのか不明　そしてうまくいかないカメラアニメがある原因もまだ不明
				とりあえずこの辺までにしておいて　他のことに取り掛かろうかと思っている
	2023/06/26
		モデルのeNullにてY180degreeの回転を設定したモデルが　読み書き読み書き読みテストで　前後反対を向いてしまう不具合修正
			ローカルのオイラー角を計算する際のeNullの扱いを修正

		Mesh頂点変換用行列計算関数追加

		eNull変換用行列計算関数追加		

	2023/06/27
		やっぱりカメラアニメをもう少し修正
			Cancel2モードのカメラ位置の補正がうまくいったようだ
				TheHunt Street1 Camera_1, Camera3の表示がUnityと同じになった
				eNullに位置と向きは設定するが　Camera自体の位置と向きは初期状態にしてテストした
			カメラアニメの保存結果が変質する不具合修正
				EvaluateLocal*と　Lcl*.Get()の違いのようだった
		
		CalcMeshMatReq()はまだ不完全であることが分かったので　元のEvaluateを使用中
		
		既知の問題
			Cameraオブジェクトの子供にメッシュがあると　形が崩れたり　保存の度に巨大化したりする
				TheHunt Street1 Camera_1の子供のArmsなど　対応未定
				表示メニューのオブジェクトパネルで　変になるオブジェクトは非表示にしていてください

	2023/06/28_1
		RotationOrderを見直し　テストし直し
			CalcMeshMatReq(), CalcLocalNodePosture(), CopyNodePosture()修正
			読み書き読み書き読みテストで変質しないように修正
			ただし　カメラの子供のメッシュについては　現在未対応

	2023/06/28_2
		ドキュメント更新
			カメラアニメについてのドキュメントを1.2.0.22用に修正
			Documants/TroubleShooting/AboutCameraAnim.docx

	2023/06/29
		eNullにアタッチしたアニメーションの読み書き再生対応

		アニメーションをアタッチしたeNullの子供にカメラオブジェクトを置いた場合の読み書き再生対応
			TheHuntのカメラアニメの読み込みが簡単に

		ドキュメント更新
			Documants/TroubleShooting/AboutCameraAnim.docx
	
	2023/06/30
		eNullの計算に関して　Bone.cppにコメント追加

	2023/07/02
		eNull, eCameraの計算修正

		AboutCameraAnim.docxに書いた対応している構成１と構成２について感想
			TheHuntでも使用されている構成１の方が　つまりeNullにカメラアニメをアタッチしてeNullの子供にカメラオブジェクトを配置という構成の方が　安定している
			構成１の方が　INHERIT MODEを変えないで扱うことが出来る(常にCAMERA_INHERIT_ALLモード)
		
		カメラの子供にスキンメッシュがある場合には　まだ未対応　未対応だが保存した場合に形が崩れて巨大化などはしなくなった

	2023/07/03
		NodeMat計算修正
			BindPoseとclusterの検索をコメントアウトしてNodeMatの計算だけで読み書きテストをしたところ　NodeMat計算時にはlclrotを含める必要があった

			修正後テスト
				TheHunt City1 Camera1, Camera8
				リターゲット：　Spring1とbvh121,Rokoko.　TheHuntCharactorとbvh121

	2023/07/04
		NodeMat計算部分(CBone::CalcLocalNodePosture())について　テストケースを増やして　更に修正
			NodeMatをlclrot入りにするかかどうかは　原則としてGetRotationActive()依存　ただしSkeletonの場合はlclrot無し
			読み書き読み書き読みテスト
				Rokoko womandance BP無し 0frameAnim在り, left90 BP無し 0frameAnim在り
				bvh121
				Spring1
				TheHunt City1 Camera1 Camera8
				TheHunt Street1 Camera1 Camera2 Camera3
				Spring1にbvh121とRokokoBP在り無しをリターゲット

				Rokoko womandanceとbvh121について　読み書き読み書き読みテストで　lclrot無しにしないとうまくいかなかった
				TheHuntCity1 Camera1のCameraの子供のスキンメッシュには　BPがあるが　lclrot無しにしないと読み書き読み書き読みで形が崩れた
				よってBPの有無に関わらず　Skeletonの場合にはlclrot無しとした

	2023/07/06
		カメラアニメ修正
			Documants/TroubleShooting/AboutCameraAnim.docxに書いた構成２NodeMat計算の修正で変になっていたのを修正

		NodeMat, MeshMat計算修正
			ローカル計算から組み立てて分かったのだが　bindpose計算時とカレントポーズ計算時とで　計算を変える必要があった

			読み書き読み書き読みテスト
				Rokoko womandance BP無し 0frameAnim在り, left90 BP無し 0frameAnim在り
				bvh121
				Spring1
				TheHunt City1 Camera1 Camera8　カメラ構成１　カメラ構成２
				TheHunt Street1 Camera1 Camera2 Camera3　カメラ構成１　カメラ構成２
				Spring1にbvh121とRokokoBP在り無しをリターゲット



2023/06/07
	EditMot 1.2.0.21 relase

	VisualStudio 2022に対応

	FBXSDK 2020.3.4 For VisualStudio2022に対応

	バインドポーズが無い場合のfbx読み込み改善

	大きいモデルを読み込んだ場合に　表示が消える不具合修正

	大きいモデルを読み込んだ場合に　マニピュレータが巨大化するのを修正

	カメラアニメ１つの読み込みと再生と保存に対応

	メッシュとトランスフォーム書き出し時の回転順序修正
		書き出すとメッシュが傾くなどの不具合が直りました

	空(empty)の影響度を書き出さないように
		モーションを付けても顔だけ動かないなどの不具合が直りました

	操作対象ボーンダイアログ修正
		ToolWindowの操作対象ボーン設定実行時のダイアログのツリービューをHips_*が複数ある場合に対応

	ドキュメント追加
		Documants/TroubleShooting/AboutCameraAnim.docx (UnityとMayaとの連携の仕方についても追記)
			


2023/06/05_2
	EditMot 1.2.0.21へ向けて

	VisualStudio 2022に対応

	FBXSDK 2020.3.4 For VisualStudio2022に対応

	バインドポーズが無い場合が多いので　バインドポーズに依存しないで読み込むように修正
		CalcLocalNodeMat() FbxSetDefaultBonePosReq() FbxFile.cpp の修正
		eNullにもNodeMat設定　eNullにもGetWorldMat使用
		モーション無しのスキンメッシュデータのために　InitMP() Bone.cpp を修正

		1つのfbxに複数キャラクタが入っている場合にも　大体はうまく読めるようになってきた
			TheHuntのStreetScene_1のElementでテスト
			TheHuntのStreetScene_2のCreaturesでテスト
			調査調整中

	2023/05/17 _2
		BindPoseがある場合には　それを使うように修正
		１つのSkeletonを　体格の異なる複数のmeshに　BindPoseで調整？して動いているようなモデルに対しては　BindPoseが必要

	2023/05/19_1
		BindPoseが無い場合に　まずはcluster情報を探すことに　それでも無い場合には計算で求める
			cluseter情報を使うことにより　BindPose無しでも正常に読み込めた
				TheHuntのStreetScene_1のElementでテストOK
				TheHuntのStreetScene_2のCreaturesでテストOK
					UnityのFbxExporterのWorldAbsoluteオプション使用
	2023/05/19_2
		大きいモデルを読み込んだ際に　メッシュの表示が消える不具合修正
			プロジェクションパラメータの最大値最小値を設定
		選択ジョイント部に表示されるマニピュレータが　大きすぎることがある不具合修正
			マニピュレータ倍率の最大値最小値を設定
		カメラ移動量が大きすぎる不具合修正
			メインウインドウのカメラスプライトドラッグ時の　カメラ移動量の最大値最小値を設定

		TheHuntのStreetScene_2のCityMapでテストOK
			TheHuntのシーン読み込み後に　ToolWindowのカメラ数値ドリーボタンを押し　CameraPos(5000, 2000, 5000) TargetPos(0, 2000, 0)を入力してテスト
	2023/05/19_3
		FbxFile.cpp FbxSetDefaultBonePosReq()の修正
			nodematを修正したので　nodeanimmatも修正
	2023/05/20
		FbxCameraに対応
			Fbxにカメラ情報が入っているときにはその情報を使うように
			とりあえず　カメラの０フレームの位置と向きだけに対応
			TheHuntのStreetScene_1, 2にUnityでカメラを追加してテストOK
		FbxCameraが無い場合
			カメラのEyePosとTargetPosの座標値が大きくなり過ぎないように制限
	2023/05/21_1
		FbxCamera対応　続き
			Unityで保存ツリー内にカメラ設定してから保存-->読み込み
			NearPlane, FarPlane, Fov, Position, Directionに対応
			まだ　０フレームのみの対応
				Unity上のカメラと同様の設定で表示出来た
				
	2023/05/25
		Unityで設定したカメラアニメの再生に対応
		UnityAsset TheHuntのStreet1のElementsでテストOK(メモリ使用量約13GB)

		リファクタリングで動かなくなることはよくあるので
		まずは　動く状態で試行錯誤の跡も含めてコミット　後でリファクタリング予定

		テスト方法
			Cameraノードをその親のeNullノードごとElementsツリーにドラッグアンドドロップ
			CameraノードにCamera_1アニメをコンポーネントとして追加
			CameraノードのRootMotionにチェック
			使わないカメラアニメを全てdelete
			timelineノードもdelete
			Unity上でカメラアニメ再生チェック後　Elementsノードを　WorldAbsオプションオンでfbx出力
			EditMotでElements.fbxを読み込んで　モーションplayボタン

	2023/05/26_1
		カメラアニメ再生　リファクタリング
			タイムライン操作連動(手動でフレームを変えたときにカメラアニメを反映)
			再生停止時には　GUIでカメラ操作可能に

		現在　カメラアニメは１つだけ対応

		カメラアニメのアニメーション名はCameraまたはcameraという文字列が含まれている必要有
	2023/05/26_2
		ChaMatrix操作部分のリファクタリング
			ChaVecCalc.cpp以外では　なるべくdata[MATI_*]表記を使わなくても済むように
	2023/05/26_3
		CameraFbx.cpp GetCameraAnimParams() bCancelLclTraフラグ追加
			もっと単純なカメラアニメテストサンプルを作成してテストした結果　lcltraのキャンセルは必要なかった
			Cameraの親にTransformが設定されていない場合には　lcltraのキャンセルをしないことに

		カメラのeyeposとtargetposの距離はs_camdist (s_projfarではなく)

		TheHunt StreetScene1のCamera_1のfbxを読み込むと　大きなエフェクト用？の黒い板に視界が阻まれる
			表示(disp)メニューのオブジェクトパネルを開いて　オブジェクトを下から探して
			Background_Dots_001, Background_Dots_001_1, Background_001_2などを非表示にすると視界が開ける
			オブジェクトを非表示にするには　オブジェクトパネルの項目の左の目のマークをクリック
	2023/05/29
		CameraAndIKプレートメニューで　カメラアニメオンオフ用のスプライトスイッチを１つ追加
			カメラアニメオンの時水色　オフの時グレー
			カメラアニメオンの時　カメラ設定を再生　手動でのカメラ操作不可
			カメラアニメオフの時　カメラ回転、移動、ドリーのスプライトドラッグで手動でカメラ操作可能
			カメラアニメ在りのfbxを読み込むと　スプライトをクリックするたびに　オンオフが切り替わる
			カメラアニメ無しのfbx読み込み時には　スプライトはグレーのまま(クリックしても)
	2023/05/30
		テクスチャ読み込みの修正(応急処置)
			１つのマテリアルに複数のテクスチャが存在する場合　albedo(またはAlbedo)の文字列が入っているテクスチャを選択してセット
		
		TheHuntアセットをUnityでfbx exportして気が付いたのですが
			Unity上でC#スクリプトで　全てのマテリアルのshaderをStandardに変えてからfbx書き出しをすると　テクスチャ設定も出力される

	2023/06/05
		カメラアニメの書き出しに対応中
			大体出来た？
		カメラアニメオンオフスプライトスイッチの下に　親ノードの姿勢継承モードを手動で選択するスプライトスイッチを追加
			親の姿勢を継承(All), 親の姿勢をキャンセル(Cancel 1), 親の姿勢と自身の移動をキャンセル(Cancel 2)の３モード
			プロジェクト保存時には　カメラアニメがちゃんと表示される継承モードを選択してから保存するとうまくいくようにした
		課題
			読み-->書き-->読み-->書き-->読み　のテストをしたが　メッシュの中に向きがおかしくなるものがあった(壁が90度回転していたり？)
			保存後のカメラアニメで　下方を向きすぎると１８０度ずれすることがあった

	2023/06/05_2
		カメラアニメ書き出し対応の続き
			カメラ角度１８０度ずれは　１８０度チェック用のオイラー角取得がカメラに対応していなかったのが原因-->修正
			カメラの初期位置だけ含まれる(アニメーションが無い)fbxの読み書きにも対応
		書き出すとメッシュの向きがおかしくなることがある不具合修正
			回転順序問題だった


2023/05/12
	EditMot 1.2.0.20 release

	トランスフォームノード(eNull)の読み書きに対応
		モーション以外は　出来るだけ同じように書き出すことに

	FbxSdk2020.3.1 --> 2020.3.2へバージョンアップ
		
	法線とUVの読み込み修正
		Maya2024で出力した2020.3.2のfbxを読み込んでテストOK

	物理シミュの剛体の軸を修正
		TheHuntのCoat (とSpring_1とBoy_Sporty)が正しく揺れるようにテストアンドデバッグ
		物理シミュの制限角度も修正

	トランスフォームノード(eNull)にはモーションを付けないように

	非スキンメッシュ(ボーンの無いメッシュ)の書き出しに対応

	書き出し時のRootNodeは新たに作成しない
		RootNode*が増えないように
		CreateScene時に自動的に作成されるRootNodeを使用する

	リターゲット設定ファイル追加
		Test/RetargetSettingFileExample/Rokoko_bvh.rtg
		Test/RetargetSettingFileExample/Hunt2Hunt.rtg
		Test/RetargetSettingFileExample/Hunt_Rokoko.rtg
		Test/RetargetSettingFileExample/Hunt_bvh.rtg

	ドキュメント追加
		Documants/TroubleShooting/HipsPostureIsNotPastedOnLimitDegON.docx
		Documants/TroubleShooting/CopyAndPasteMotionOfOnlyLegs.docx


	ver1.2.0.20の使い方についての注意
		EditMotは複数キャラクターのモーション編集に対応しています
		キャラクターごとにfbxファイルを分けて　追加読み込みして　編集する(そしてプロジェクトファイルで１つにまとめる)ように作ってきました
		１つのfbxに複数のキャラクターが含まれている場合　正しく読み込めないことがあります
		複数のキャラクターが含まれているfbxの読み込みについては　次バージョン以降に対応予定

	RC7 --> RC8 変更点
		物理が動かなくなっていたのを修正
		ボーンツリーにeNullが混ざる仕様になったので　階層処理をほぼ全て修正
	RC8 --> RC9 変更点
		RC8における修正で　ボーンの無いメッシュの表示が出来なくなっていたのを修正
	RC9 --> RC10 変更点
		バインドポーズの無いメッシュの無いfbx読->書->読->書->Mayaで読テストで正常に読み込めるように
			いつからかは特定していないが不具合が出ていたので修正
				バインドポーズ無しを読み込んだ場合には　書き出し時にもバインドポーズ無しに
				スキンメッシュ書き出し時の　Nullチェックで落ちないように
	RC10 --> RC11 変更点
		ConstRefreshボタン動作修正
			位置コンストレイントの位置更新処理を　間違ってコメントアウトしてしまっていたのを　元に戻した
	RC11 --> RC12 変更点
		ToolWindowの補間ボタンが　正しく機能していなかったのを修正
			コメントアウトミス　ParentMotionPoint(pparmp)をコメントアウトするつもりが　CurrentMotionPoint(pcurmp)をコメントアウトしていた


2023/03/27
	EditMot 1.2.0.19 release

	リターゲット修正
		指など　モーション側のジョイントを指定しないでも　おかしくならないように

	回転順序修正
		fbxの回転順序取得部分が　テストのためにコメントアウトしたままになっていたのを修正


2023/03/27
	EditMot 1.2.0.18 release

	リターゲット修正
		モデル側モーション側両方の０フレームにアニメが設定されていても正常にリターゲット
		bvhだけはなく　UnityAssetのfbxモーションについてもテスト

	回転順序に対応
		読み込みは　fbxファイルソースの通りの回転順序
		書き出しは　XYZの回転順序
		オイラーグラフ表示は　XYZの回転順序

	ドキュメント追加
		Documants/TroubleShooting/JointSelectionDiviateAtTreeEditor.docx


2023/03/25
	EditMot 1.2.0.17 release

	ボーン無し背景fbx読み込み対応

	メッシュに対するトランスフォームノードに対応

	モデルごとマテリアル表示倍率設定ダイアログ
		ToolWindowのボタン化
		各Meshのマテリアルのdiffuse, specular, emissive, ambientに対する表示倍率を設定可能
		ダイアログ入力で有効な値は　0.0から1000.0
		掛け算の倍率なので　元の値が０の場合には　表示に変化はありません

	モデルごとに配置用の初期位置初期向き設定ダイアログ
		ToolWindowのボタン化
		Position XYZと RotationXYZを指定可能
		設定は　プロジェクトファイルに保存して読み込み

	tgaテクスチャ読み込み

	オブジェクトパネルの　スクロールバーを見易く　白色に

	カメラ数値ドリー機能
		ToolWindowのボタン化
		カメラ位置　カメラターゲット　数値指定
		Getボタン　Applyボタン

	メインウインドウのカメラドリーアイコン動作修正
		カメラ位置がターゲットに近づきすぎた場合　止めないで　ターゲット位置を視線方向に延長するように

	不具合修正　仕様修正
		カメラの後ろにあるボーンマークが　前方に逆さで表示されないように
		モーションポイントが無い場合に　軸指定IKが無限ループする不具合修正
		テクスチャ読み込みエラー対応　読み込みエラーで落ちないように

		半透明描画順序を不透明描画の後に
			半透明の透過部分が背景色になってしまう現象が軽減
			解決ではなく軽減なのは　メッシュの描画順序を変えないと解決しない場合もあるから

	予定
		シーンビルダーにする予定は無いので　背景対応やカメラ対応は程々に
			シーン構築はMayaとUnityで

2023/03/12
	動画
	制限角度をキャプチャーせよ！
	https://youtu.be/mkkpo5cmLBs

2023/03/11
	日記
	https://ochakkolab.jp/diary_win.html#EditMot_12016_1

2023/03/10
	動画
	基本機能　モーキャプの動きを盛れ！
	https://youtu.be/DV9gYsgDzz0

2023/03/09
　EditMot 1.2.0.16 release
 
　Rig処理修正
	UnderとPostに分けたのにも関わらず　フレーム範囲が広いと重かったのを修正
	UnderRigからRigを呼び出すときの処理がUnderになっていなかったのを修正

　ModelPanelでmodelを切り替えたときに　ソフトが落ちることがある不具合修正
 
　MameMedia読み込み時NULLチェック

　OrgWindow作成時NULLチェック

　RigidElemFile(*.ref)の書き出しと読み込みにboxz要素追加
	剛体形状として　ずっとカプセル形状でしかテストしてこなかったが
	直方体なども使うようになったので　boxz(ダイアログの形状depth要素)の書き出しと読み込みに対応

　サンプル更新
	Test/1_Boy_Sporty_4


　おちゃっこLAB
	https://ochakkolab.jp/

　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab


2023/03/07 その２
	動画
	いろいろ直った物理でボクシングの動画	
	https://youtu.be/Zr7fT1gsCl4

2023/03/07
	サンプル更新
		Test/1_BoySporty_4　追加
		Test/shadowboxing20221231　削除

2023/03/06
　EditMot 1.2.0.15 release
 
　位置コンストレイントしたときに　選択フレーム両端部分で　位置が動く問題対応
	原因
		位置が動くのは　自動平滑化によるもの
		平滑化の計算時に　選択範囲両端よりも前後にサンプリングして滑らかにするのが1.2.0.14からのデフォルト
		デフォルト状態だと　両端で位置が動く
	対策
		ConstExecuteボタン押下時　または　ジョイントに対してPosConstraintをオンにしている場合
			平滑化時の両端のサンプリング時に　エッジサンプリングするように　自動で切り替え
	対策結果
		普段は　選択フレーム両端がより滑らかになるように機能し
 		位置コンストレイント時には　両端のエッジが立つように機能
 		位置コンストレイントが　選択フレーム両端においても決まるようになった
 
　サンプルのリグ設定を調整
	リグと他のリグの背面が重ならないようにリグ同士の間隔を少し広く設定

 
　おちゃっこLAB
	https://ochakkolab.jp/

　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab


2023/03/04
　EditMot 1.2.0.14 release

　物理修正
	遅いPCで動かすために　詳細度をカットしていた条件文修正
		MotionSpeedを0.1にして　Model_boxingサンプルを実行すると　パンチが素通りしていたが　修正により当たるようになった

	表示が速い環境において　当たり判定が当たらなかったり制限角度が効かない不具合修正
		剛体がスリープ状態になっていたのが原因
		スリープまでの時間指定と　スリープ速度の閾値指定により解決


　平滑化修正
	平滑化時のバッファ処理修正
	出来るだけ過剰には平滑化しないように


　Rig機能ブラッシュアップ
　　Rigのマウスレスポンス
　　　Rigもマウスドラッグ中とドラッグ終了後の処理に分けて　マウスレスポンス向上

　　Rigの説明表示
　　　Rigにマウスを当てたときに　リグのボーンとリグの名前のツールチップを表示

　　Rigの形状種類
	　球の他に　円(X, Y, Z)を追加　設定画面で選べる
	　ジョイント右クリックで　作成済のリグ名-->Settingメニューで右ペインに設定ウインドウ-->形状

　　Rigの表示位置
	　0から2までの表示位置を 0から30までに変更

　　Rigの表示倍率
	　ジョイント右クリックで　作成済のリグ名-->Settingメニューで右ペインに設定ウインドウ-->表示倍率(番号)
	　０から１２の番号をしてい　1.2.0.13と比較して　大体　１倍から６倍の大きさで表示

　　Rigの回転の度合い
	　Rigの横縦に対する軸が同じで両方有効な場合　２倍回転して変になり易いので　横の設定だけを処理


　剛体設定ダイアログ修正
	ダイアログの下から２番目のSetRigidGroupIDForConflict(当たり判定グループ指定)のボタン修正
		同じグループの剛体全部に設定　を選んだ場合に　自分のグループと衝突判定する設定項目も対象に　

　姿勢初期化ボタン修正
	ToolWindowの姿勢初期化でdeeperを選んだ場合に　選択ジョイントと同じデプスのジョイントは対象にしないように


　サンプルモデル更新
	Rig設定、制限角度設定更新
		Test/0_VRoid_Spring_1
		Test/1_Test20221218_CB0


　おちゃっこLAB
	https://ochakkolab.jp/

　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab



2023/02/28 その２
	1.2.0.13 動画
		変な風には曲がらない位置コンストレイント
		https://youtu.be/9Xt8cxjByeA


2023/02/28
  EditMot 1.2.0.13 release
  
  IK終了後のウェイトカーソル時間短縮
  	IK中は30fpsにする
  	IK中の描画回数が多いと　一時的データ保存数が多すぎて
  	ドラッグ終了後のウェイトカーソルが長くなりすぎる
  	一時的データ保存数を減らすため　IK中は30fps
  
  
  位置コンストレイント修正と高速化と計算回数調整
  	計算の修正
  		関数呼び出し構造を大きく変えた際に　カレントフレーム以外の計算時のフレーム番号が間違っていたのを修正
  		カレントフレーム以外の姿勢が　暴れなくなった
  
		コンストレイント用の回転は　徐々に繰り返し回転することにより　より暴れにくく

		コンストレイント用回転の軸として　ジョイントの初期姿勢のZYX３軸について回転することにした


  	高速化（以下における　待ち時間の数値は　こちらの環境における数値　絶対的な数値では無い）
  		位置コンストレイント計算の呼び出し方を　試行錯誤して　修正
  
  		50フレーム長を選択して　両手両足コンストレイントし　Hipsを　ワンドラッグ５秒間移動　すると
  			1.2.0.12では　待ち時間１５秒
  			1.2.0.13では　待ち時間２秒

  		540フレーム長を選択して　両手両足コンストレイントし　Hipsを　ワンドラッグ３秒間移動　すると
  			1.2.0.12では　待ち時間が８分
  			1.2.0.13では　待ち時間３０秒
  			位置コンストレイント計算回数を各フレーム１回ずつにすれば
  			上記条件時にも待ち時間１秒くらいだが　妥当な結果を得るために３０秒かかる
  
  	計算回数調整
  		完璧ではないが妥当な結果が得られる計算回数を試行錯誤して決めた
  		(計算回数については　今後変わる可能性や　スライダー指定にする可能性も有)
    
	角度制限に対応
		LimitEulオンの時の位置コンストレイントは　自動的にWallScrapingIK(壁すりIK)処理で回転

	位置コンストレイントとIKStopフラグについて
		体全体が傾かないと　位置拘束は難しいことが多い
		しかし
		コンストレイント用回転も　IKStopで止める必要有
		体の中心まで回転を伝えた方が　コンストレイントしやすいが
		shoulderのIKStopで回転を止めない場合
		右手と左手のコンストレイント順番により　どちらかにしか拘束できなくなる

		IKStop自動設定ジョイントを　UpperArmからShoulderに変更
		手が拘束位置に届かずに回転しない場合　Shoulderの制限角度を緩めてから　ConstExecuteボタン押下で改善することがある


	制限角度＋ConstExecuteの結果改善
		設定例として　Test/0_VRoid_Spring_1


  位置コンストレイント実行ボタン　と　位置コンストレイントリフレッシュボタン　を追加(2023/02/25)
  	CameraAndIKプレートメニューに　ConstraintExecuteボタンとConstraintRefreshボタンを追加
  
  	ConstExecuteボタンは
  		ジョイント右クリックでPosConstraintをオンにしているジョイントの　位置を　オンにした時の拘束位置へとIKします
  	ConstRefreshボタンは
  		ジョイント右クリックでPosConstraintをオンにしているジョイントの　現在のジョイントを位置を　拘束位置として設定します
  
  	想定している使い方
  		１，位置コンストレイントしてIKした結果をみて　位置が動いてしまっている場合に
  		　　追加処理として　フレーム選択そのままでConstExecuteボタンを押す
  		２，IK操作無しで　選択フレーム範囲のジョイント位置をコンストレイントしたい場合
  			ジョイント右クリックでPosConstraint ON　フレーム選択　ConstRefreshボタンで現在位置を拘束位置　ConstExecuteボタンで拘束計算
  
　MotionSpeedスライダーを1.0以下にしたときの振る舞い修正
	1.2.0.12でフレーム単位表示になってしまっていたのを修正
	スピード1.0以下でも滑らか表示


　VRoidモデル着替え
	Test/0_VRoid_Spring_1 追加
　　　Test/0_VRoid_Winter_1 削除


　トラブルシューティングドキュメント追加
	Documents/TroubleShooting/ArmFlapsWhenHandIsConstraint.docx
	Documents/TroubleShooting/HideRigidBodyMarkOfHair.docx
	Documents/TroubleShooting/CantRotOver165DegreeAMouseDrag.docx
	


　YouTubeチャンネル
	https://www.youtube.com/@ochakkolab

　おちゃっこLAB
	https://ochakkolab.jp/



2023/02/23
	EditMot 1.2.0.12 release

  	位置コンストレイント機能
		Pos Constraintをオンにしたジョイントの位置を保つようにIKします
  		物理ではなく　普通に数学とIKターゲットによる　位置コンストレイント

		########################################################################################
		最初に断っておきますが
		無理な動きは無理です
		体が大きく動く場合に使用すると無理なことになり易い
		想定としては　乗り物などのハンドルに手をコンストレイントして　体を少し揺らすなどの用途
		だましだまし使う用
		########################################################################################

  		ジョイント右クリックでメニューを出して　PosConstraintをオンオフ
  		オンにすると　移動回転操作の際に　オンにした時のそのジョイントの位置を目標に　位置修正
  		位置修正のための回転は　IKStopFlagが設定されているジョイントで止まる
 
  		IKStopFlagは　現在は　自動設定　UpperLegまたはUpperArmが名前に含まれるジョイントにセットされる
 		ジョイント右クリックでも設定可能
 
  		位置修正のための回転が　ねじれないように　回転の軸は　カメラの向きにも依存する
  			カメラ軸とカメラ軸に垂直な軸に関して２回回転してIKターゲットすることにより　以前よりも安定
 
  		効果が分かりやすい使い方としては
  		　　編集フレーム範囲をマウスドラッグで選択してから
  			HandのPos Constraintをオンにしてから　CameraAndIKプレートメニューの　上から２番目のアイコンで移動モードにして　Hipsを移動
 
  		Pos Constraintオンオフのコツ
  			想定としては　Hand と Foot のジョイントに使う
  				補足：
  					３Dウインドウの一番右の列の上から３つのボタンで　回転　移動　スケールを切り替える
  					回転の時には　オイラーグラフの上段のジョイント名には　選択ジョイントの１つ親ジョイントの名前が表示される
  					移動　スケールの時には　選択ジョイントの名前が表示される
 
  					回転モードの場合に　LowerLegとLowerArmと表示されているジョイントの　Pos Constraintが無難な使い方
  					実際の選択ジョイントとしては　FootとHand
 
  			設定ジョイント周辺には　ジョイントが密集していることがあるので
  			設定ジョイントの親をクリックしてから　下矢印キーで　その子供を選択し　
  			マウスを　ジョイントに充てて　小さい黄色い四角が光ったときに　右クリックすると間違いが少ない
 		
 			###########################################################################################################
 			左ペインのツリービューのジョイント項目右クリックでも　オンオフ用のメニューが出る
 			ツリービュー右クリックで設定した方が　どこに設定するのかが　分かりやすい
 			オンにすると　ツリービューの項目の右側に　IKstopは進入禁止マーク　PosConstraintは一時停止マークが表示される
 			###########################################################################################################
 
 			Pos Constraintの設定については　常時設定では無くて　必要作業ごとの設定を想定しているので　保存はしていません
 				例えば　ハンドルを握りながら体が揺れるような　モーションIK時に　一時的にオンにすることを想定

  	refpos機能ブラッシュアップ
  		選択フレーム範囲の　カレントフレーム以外の姿勢を　半透明で多数表示し　選択ジョイントに軌跡を表示する機能
  		RefPosは　リファレンスポーズ リファレンスポジションの略
  		使い方
  		フレーム範囲を選択後　CameraAndIKプレートメニューの走る絵のスプライトボタンを押すと　リファレンスポーズ機能がオン
  		RefPosプレートメニューの　スライダーで　描画フレーム間隔と透明度を指定
  		リファレンスポーズの透明度は　カレントフレームから離れるほど薄くして　動きを感じるように
  		カレントフレームの選択ジョイント位置に　赤い丸マークを描画　(ジョイント描画をオフにしていても)
  		選択ジョイント位置の軌跡が　モデル描画によって隠されないように描画　
		refpos機能をオンにしながら　IK操作をすると　リアルタイムで　refposも変化します

  	マウスによるIK操作のレスポンスを向上
  		マウス操作中の関数　*UnderIK, *UnderFKと 選択フレーム全体の計算をする関数 *PostIK, *PostFKとに分けた
  		UnderIK関数ではカレントフレームだけの計算をし　PostIK関数ではカレント以外の選択フレーム範囲の計算をする
  		操作中のレスポンス大幅向上　ただし　操作後の後処理中は　ウェイトカーソル　
 		マウスのドラッグ操作が軽くて　長い時間ドラッグ可能だが
  		ドラッグ時間が長いほど　その後のウェイトカーソルも長い

 	モデルパネル、モーションパネル修正
  		選択がシングルクリックで出来るように
  		選択変更しても　ビュー位置が残るように
 		スクロールバー対応
  		右側のボタンに　表示名が被らないように　30字までの表示に
 
 	プレイヤーボタン修正
  		ロングタイムラインのプレイヤーボタンを押しやすいように中央寄せ
		大きく　シンプルに
  		グラフのジョイント名も大きく
   
 	IK Stopフラグ
 		ジョイント右クリックでオンオフ
 		IKstopフラグは　Pos Constraint以外のときにも　IK時に　ドラッグ効果を伝達しないためのフラグとして働きます
  
 	左ペインのツリービューアップデート
 	　ツリービューの名前の右に　
  		IKStopFlagとしてUNICODEの進入禁止マーク
  		ConstraintFlagとしてUNICODEの一時停止マークを表示
 		ウインドウ大モードのときの　ツリービューの大きさを大きく　フォントも大きく
   
 	fpsコンボボックス追加
 		DispAndLimitsプレートメニューの一番上に　fpsコンボボックス追加
 		VSyncRefPosプレートメニューのVSyncチェックボックス廃止
 		ドロップダウンから　free fps, 100fps, 60fps, 30fps, 15fpsを選ぶように
  		DXUT11の機能を使って指定することにより　コンピュータの処理が間に合う環境においては　以前より正確に機能
  
	Lightingチェックボックス追加
		DispAndLimitsプレートメニューに　Lightingチェックボックスを追加
		ライティングのオンオフを切り替え可能
		モーション確認時に　陰で黒くなるのが邪魔な場合に有効


 	X軸に関する１８０度補正をユーザが選択可能なオプションに
		DispAndLimitsプレートメニューに　X180チェックボックス追加
		チェックを入れると　IK時に　Y軸Z軸に対して行っているのと同様の１８０度補正を行う
		こちらでテストした限りでは
		回転モーションが設定されていない状態に対して IK編集する際には　オン
 		元のモーションがある上から　IK編集する場合には　オフ　にするとひっくり返りにくい
		自動化が難しいので　ユーザ操作に任せることに
		180度ひっくり返った場合に　チェックをオンまたはオフしてみる用


	TroubleShootingドキュメント追加
		Documents/TroubleShooting/0_RulesOfJointName.docx
		Documents/TroubleShooting/ACaseTwistedUnintentionally.docx
		Documents/TroubleShooting/ACaseHandStandUnintentionallyOnIK.docx
		Documents/TroubleShooting/IfLimitEulIsNotEffectiveOnBtStart.docx




	1.2.0.12動画
		https://youtu.be/8p13H6MGQZ8


	YouTubeチャンネル
		https://www.youtube.com/@ochakkolab

	おちゃっこLAB
		https://ochakkolab.jp/


2023/02/16
	EditMot 1.2.0.11 release

	モーションを持たないfbx対応
		１回目の読み込み後　そのまま作業を続けても　OKになった
 

	fbxにバインドポーズとジョイントの向きが設定されていても書き出しが正常(Mayaで読める)に


	IK操作後にグラフがギザギザする不具合修正
		IK操作後も　グラフは滑らか
		元からギザギザしている場合への対応として　メインウインドウに　Smoothスプライトボタン追加
		繰り返し操作の結果スケールがずれた場合への対応として　ToolWindow-->ScaleAllInit(ギザギザしたら押すボタン)ボタン追加
		スケール保持自動処理追加

	平滑化機能 不具合修正
		実行するとピークが後ろにずれたり　形が崩れすぎる不具合修正
　　
	よく使うチェックボックスを メインウインドウのスプライトボタン化
		LimitEulチェックボックスとWallScrapingIKチェックボックスを　メインウインドウのスプライトボタン化

	リターゲットウインドウのよく使うボタンを上方に配置
		convertボタン, LoadRtgFileボタンを 上方に配置
		SaveRtgFileボタンは　設定し終わってから押すので　一番下のまま

	モデルパネル、モーションパネルをフレームに組み込み表示(4K)


	サンプル更新
	　Test/0_VRoid_Winter_B4

	トラブルシューティング修正
	　BecomeJaggedEulerGraph_OnIK.docxを修正
	　ACaseThatTranslationOfResultOfRetargetDontMove.docxを削除

	YouTubeチャンネル
		https://www.youtube.com/@ochakkolab

	おちゃっこLAB
		https://ochakkolab.jp/


2023/02/15
	EditMot 1.2.0.11へ向けて

	モーションを持たないfbx対応
		１回目の読み込み後　そのまま作業を続けても　OKになった

	CreateIndexedMotionPointが　機能しなくなっていた？のを修正
		描画速度のボトルネックは　ロングタイムライン描画なので　fpsは変わらない？
		モーション再生中に　ロングタイムラインウインドウをxボタンで閉じた場合　
		1.2.0.10は1000fps程だったのが　2000fps程になった
		(こちらの環境にて)


	リファクタリング
	　RotBoneQReq, RotAndTraBoneQReqの再帰の仕方が分かりにくかったので修正
	　　directset = trueで setchildflag = 1の関数が足りてなかったのが原因？！

	　　UpdateCurrentWM, UpdateParentWMという２つのdirectsetで再帰処理する関数新規

	　　directset = trueで setchildflag = 1処理部分を上記２つの関数で置き換え
	  　CBone::SetWorldMat内のグローバル変数による機能選択を再び廃止

	　CopyWorldToLimitedWorld, CopyLimitedWorldToWorld, PasteMotionPointについても上記と同様の修正
 

	計算精度問題対応
	　症状
	　　IK時マウスを逆方向に行ったり来たり激しくガチャガチャやると
	　　グラフがギザギザになるばかりではなく　軸がブレることまであった

	　原因
	　　SSE2による計算で誤差が蓄積したためのようだ
	　　例えば　スケール編集していないのに　スケール値1.0であるべきところが　0.96になっていたりした

	　対策
	　　ChaVecCalc.cppのSSE2部分を　double計算に戻した
	　　編集の繰り返しにより　スケール値が狂っていくので　ワンタッチで初期化するボタンを追加
	　　ToolWindow-->"ScaleAllInit(ギザギザしたら押す)"ボタン
	　　このボタンは　全フレームを選択後　ToolWindow-->姿勢初期化 init-->AllBones-->InitScaleを実行するのと同じ機能を持つ
	　　ギザギザする前までUndoを実行してから　"ScaleAllInit(ギザギザしたら押す)"ボタンを押す

	　対策結果
	　　ToolWindow-->"ScaleAllInit(ギザギザしたら押す)"ボタン により　グラフのギザギザの件は解決


	  対策その２
	　　スケール値の自動保持機能として　ローカルSRT組み立ての最後の段階で　スケールだけ計算し直すことにした
	　　ChaVecCalc.cppの　ChaMatrixKeepScale()にて対応

	　対策結果その２
	　　更にギザギザになりにくくなった(が　完全ではないので　ScaleAllInitボタンは残しておく)
　　



	ギザグラフに関する調査(2023/02/12)
	　上記の対策をしたところ　LimitEulオフまたはLimitEulとWallScrapingIKオンのときには
	　IK時のオイラーグラフはギザギザしなくなった
	　しかし　LimitEulオンでWallScrapingIKオフの時　グラフが小さく波打つ現象が出る
	　この波打ちは　計算誤差の蓄積ではなく　制限角度ぎりぎりで　止まったり動いたりすることによるようだ
	　IKにより　XYZのうちのどれかが制限に引っ掛かるとXYZ全てが動かないので　波打つのであろう
	　その根拠としては　
	　制限角度をオフにしたときには　波打たないこと
	　制限角度と壁すりIKを両方オンにした時にも　波打たないこと
	　そして　CBone::SetWorldMat()において　
	　ismoving == 0のときの処理を変えることで　波打ちの症状が変わるからである



	LimitEulオンでのIKRot後に自動フィルター(2023/02/13)
		IKRot終了時　LimitEulオンで　編集ボーンがあった場合
		グラフが波打つことは分かっているので(XYZどれか１つでも制限に掛かると　XYZ全て動かなくなるため)
		自動で　フィルターを掛けて　滑らかに



	ScaleAllInit(ギザギザしたら押すボタン)押下時に
		滑らかにするためのフィルターも呼ぶことに(2023/02/13)
 
 
	スプライトボタンとしてSmoothボタンを追加(2023/02/13)
		ワンボタンで　選択フレーム　選択ジョイント(IK階層数２以上の場合はdeeper)　平滑化５回
 


	平滑化機能のデバッグ(2023/02/13)
		実行するたびにピークが後ろにずれたり　いろいろ変だったのを直しました



	よく使うチェックボックスをスプライトボタン化(2023/02/14)
		LimitEulチェックボックスを　LimitEulスプライトボタンに
		関連で　WallScrapingIKチェックボックスも　Scrapingスプライトボタンに



	リターゲットウインドウのよく使うボタンを上方に配置(2023/02/14)
		convertボタン, LoadRtgFileボタンを上方に配置
		rtgファイル使用時には　一番下までスクロールしなくても操作出来るように
		SaveRtgFileボタンは　設定し終わってから押すので　一番下のまま



	4KTV接続時　起動時に　ウインドウ大　を選んだ場合(2023/02/14)
		モデルパネルとモーションパネルを　フレームに組み込んで表示



	fbxにバインドポーズとジョイントの向きが設定されていても書き出しが正常に(2023/02/16)



	テストとしてプロジェクト設定の浮動小数点処理を　preciseにしてみているところ




	サンプル更新
	　Test/0_VRoid_Winter_B4


	トラブルシューティング修正
	　BecomeJaggedEulerGraph_OnIK.docxを修正
	　ACaseThatTranslationOfResultOfRetargetDontMove.docxを削除



2023/02/09
	EditMot 1.2.0.10 release

	//###################
	//###  使い方の注意 (2.1.0.11よりも以前のバージョン)
	//###################
		モーションが含まれていないfbxを使う場合の注意
			fbxを読み込み後　すぐに　Fileメニューからプロジェクトを保存
			モデルメニューで　全てのモデルを削除後　保存しておいたプロジェクトを開き　それから作業を始めてください
			この手順を踏まないと　おかしなモーションになります


	//###################
	//### 以下　変更内容
	//###################

	制限角度のベイクの仕様を変更
		制限無しと制限有とが混在することに起因する誤差を解決
		制限角度がより安定
		編集部分だけのベイク(LimitedWorld-->World)が安定		

	L2Wボタン追加
		LimitEulオン時に押すと　全フレーム制限角度付モーションをオリジナルモーションにベイク
		LimitEulオン時のIK編集、姿勢初期化、平滑化、補間操作に関しては　自動的に編集部分だけベイク

	物理シミュ不具合修正
		複数モデルを読み込んでシミュする場合に　１回目のシミュ時に制限角度が効かないことがあったのを修正

	IK操作高速化
		制限角度の計算に誤差があったときの対策が無くなり高速化

	オイラー角計算修正
		例えば
		LimitEulオフで０度から８００度まで回転し　LimitEulオンで０度から４５０度(１回転後少し回転したところ)までに制限することも可能に
		(テストジョイントの回転を姿勢初期化で初期化してからテストしました)
		

		//2023/02/07
		//２軸が１８０度変化してY軸が０から９０度までしか動かないように変化しながら
		//体が１回転するというのは　IKRotの際に起こったし　３６０度のプラスマイナスだけだと必ずそうなった
		//１８０度のプラスマイナスは必要と認識し直し
		//以前のようにXYZそれぞれを求めながら１８０度チェック
		// 
		//2023/02/04の変更は　LimitEul時にグラフが１８０度の変化を交互に繰り返す症状が出たから
		//だが　それは１８０度プラスマイナス補正が原因の不具合ではなかった
		//2023/02/08 am00:53
		//GetBefEul()の内容の問題だった　unlimitedのオイラーをbefeulにすることで解決したようだ
		//notmodify180flag関連をロールバックしてテスト　問題が出たテストデータ(bvh121)でざっとテスト　今のところOK
		//  　もう寝ます
	

	1000fpsで物理シミュをしたら　シミュ開始時に乱れるのを修正
		ロングタイムラインをxボタンで閉じると　表示がすごく速くなります
		1000fps以上出たのですが乱れました
		初期化回数をfps依存にすることで解決


	操作対象ボーン(target bone)ウインドウの幅を広く
		ToolWindowの操作対象ボーンボタンを押したときのウインドウの幅を調整


	TroubleShootingドキュメント追加
		Documents/Troubleshooting/What_is_L2WButton.docx
		Documents/Troubleshooting/BecomeJaggedEulerGraph_OnIK.docx
		Documents/Troubleshooting/ACaseThatTranslationOfResultOfRetargetDontMove.docx
		Documents/Troubleshooting/ACaseThatPhysicsHairTooFluffy.docx


	リファクタリング
		グローバル変数のオンオフで挟んでの機能切り替えをやめて　引数として渡すことに
		タイミング依存(並列化もあり得る)の潜在的不具合を解消

	姿勢初期化ボタン修正(2023/02/08)
		移動, スケールの初期化の際には　操作対象ジョイントとして選択しているジョイントそのものに処理
		回転の初期化の際には　選択しているジョイントの１つ親のジョイントを処理


	モーションを含まないfbxに関する修正
		モーションを含まないfbxに　モーションをリターゲットしたときに　動きがおかしくなる不具合修正
		一応対応しましたが　モーションを含まないfbxは　一度プロジェクト保存して　読み込んでから使うことを推奨


	1.2.0.10 RC4以降において　コピーペーストが壊れていたので修正(2023/02/09)
		制限有り無しにおけるコピペテストOK
		操作対象ボーン指定で　部分的コピペテストOK


	サンプル更新　
		Test/0_VRoid_Winter_B3


	YouTubeチャンネル
		https://www.youtube.com/@ochakkolab

	おちゃっこLAB
		https://ochakkolab.jp/


2023/02/05
	EditMot 1.2.0.10に向けて(現在は仮バージョンの1.1.0.14で開発中)

	WorldMatとLimitedWorldMatを別々に扱うように
		別々に扱うことにより　ローカル姿勢の計算が確定する
		1.1.0.13のときには出来なかった制限角度を既存モーションの角度よりも絞り込んで　子のIKが可能


	1.1.0.14の　#### 予定 (plans) ####
		[ WorldMatとLimitedWorldMatを別々に扱うようになったことへの対応 ]
		(対応できたら　このメモの該当項目に　(済)マークを付けていきます)
		(このメモの項目に全部(済)が付いたら　バージョンは1.2.0.10にします)

		0, モデルの位置を適用　(済 2023/02/02)


		1, UpdateMatrixのマルチスレッド復活(一時的にシングルスレッドにしている)　(済 2023/02/02)


		2, WorldMat --> LimitedWorldMat, LimitedWorldMat --> WorldMat のコピーのためのボタン追加　(済 2023/02/04)
			制限角度を変更する際　または　LimitEulをオンにした際　自動的にWorldMat-->LimitedWorldMatを行い　そのうえで制限し直す(済 2023/02/03)

			LimitedWorldMat-->WorldMatのコピーも自動化
				LimitEulにチェックを入れてのIK操作の結果は　編集部分を自動的に　角度制限無し姿勢にコピーする (2023/02/04)
			
			LimitedWorldMatの全フレームをWorldMatにコピーする機能については　ボタンを新規追加　(2023/02/04)
				L2Wボタンを追加



		3, コピーの際にtempに自動バックアップ　(済 2023/02/05)
			アンドゥリドゥで対応
		
		4, バックアップからの復元ツールボタン　(済 2023/02/05)
			アンドゥリドゥで対応


		5, アンドゥリドゥのLimitedWorldMat対応　(済 2023/02/05)


		6, コピーペーストのLimitedWorldMat対応　(済 2023/02/05)
			コピー時には　LimitEulのオンオフをみて　該当する方の姿勢をコピー
			ペースト時にも　LimitEulのオンオフをみて　該当する方へペースト
			ペースト時に　limitedの方へペーストした場合　unlimitedへもペースト　更に　limitedに制限を掛け直す
 

		7, プロジェクト保存時に　LimitedWorldMat用のファイルも保存　読み込み時にそれをロード　(済 2023/02/06)
			LimitedWorldへの編集結果をWorldへベイクする部分を自動化したので
			WorldMatを読み込んで　LimitEulをオンにすれば　LimitedWorldは復元される
			よって　LimitedWorldを　別ファイルとして保存する必要は無くなった


		その他
			オイラー角計算改善　(済 2023/02/03)
				GetBefEul()関数化
				0フレームと1フレームの計算を改善
				無駄に180度変化して後のフレームのオイラー角がそのままになる不具合修正

			制限角度設定ボタンの改善　(済 2023/02/03)
				FromCurrentMotionボタン, FromAllRetargetedMotionsボタンを押した際に
				物理シミュボーンの設定は上書きしないように修正

			サンプル更新　
				Test/0_VRoid_Winter_B3　追加(済 2023/02/04)
					オイラー角計算改善

			オイラー角補正の修正(2023/02/04)
				当たり前のことだが　XYZEul(180, 0, 180)とXYZEul(0, 0, 0)は違う姿勢
				360度のプラスマイナスは有りだが　180度のプラスマイナスは　違う姿勢にすること
				ノイズ対策として+-180度は有り得るが
				同じ姿勢の別表現としての+-180度は　XYZEul(0, 180, 0)をXYZEul(180, 0, 180)にする以外に思いつかない
				360のプラスマイナスに戻して　Q2EulXYZusingQ()の後処理として補正を行う
			
			IKRotate, IKRotateAxisDeltaの後処理としての姿勢計算し直しをコメントアウト(2023/02/04)
				姿勢計算がうまく機能するようになったので必要なくなり　IK操作高速化



			１回目の物理シミュでLimitEulにチェックを入れても制限が効かない不具合修正(2023/02/06)
				調査中
				複数モデル同時シミュ時
				物理の制限角度設定に関して　設定の前にしていた仮の設定(制限無し)をコメントアウトしたら直った


			制限角度の値のアンドゥリドゥを　するかしないか？
				必要だったので対応　(2023/02/05)


			limitedに対しての姿勢初期化、平滑化、補間についても　IK編集と同様に　結果をunlimitedへコピーする(2023/02/05)


2023/01/29
	EditMot 1.1.0.13 release

	機能のボタンを押した際に出るダイアログの位置をデスクトップのセンターへ
		マウスをウインドウ位置へ移動する機能は限定的
			マウスアップよりも先にマウスが移動すると　機能が実行されないことがあるため

	ダイアログの xボタンを押して閉じた際に　プレートメニューが押せなくなる不具合修正

	制限角度設定ウインドウに機能追加
		LimitEulプレートメニュー選択時に右ペインに表示されるウインドウに機能追加
		Upper, Lowerを適用するボタンを One, Deeper, Allの３種類に
		不具合が直ったので　グレーアウトしていたCurrentBoneへの制限角度の対称コピーボタンなどを復活

	ToolWindowの姿勢初期化機能修正
		オイラーグラフのジョイントに対して処理(ツリービューのジョイントに対してではなく)

	high rpmにチェックを入れた場合の効果を　プレビュー時だけではなく　IK回転時にも　有効に
	

	物理の軸とコリジョンの向きの更なる改良(いろいろなfbxに対応)
	
	参考までに
	物理シミュの改良とテストについて
		初期姿勢の有り無しを比べていてやっとわかったのですが
		剛体とコリジョンに余計なモーションの姿勢が掛かっていたのを直しました

		こちらの環境では　何もしていないのに　跳ね返ったりする現象が　激減しました
		このように単純化出来るのは　物理とモーションの軸合わせが出来ているからです(diff計算ではなくなったから)


		物理の動きを改良しながらソースをいじっていたのですが
		同じプログラムでも　綺麗に柔らかく髪の毛が揺れる時と　ギクシャク揺れる時とありました
		どうやら　fpsが100程度出ているときには　柔らかいですが　80程度の時にはもうギクシャクするようです
		UpdateThreadsスライダとhigh rpmチェックボックスで　なんとか　１００fpsを出るようにしてテストしています

		100fpsを出すために　工夫することとしては　上記のUpdateThreadsとhigh rpmの他に
		読み込みモデルの数を出来るだけ減らすことです
		読み込んでいるモデル分　再生物理処理が同時に走るからです

		モーションfbsを読み込むとモデルデータが作成されます
		このモーションのモデルデータは　形状のモデルデータにリターゲットした後には削除することをお勧めします
		そのようにすることで　同時に動くモデル数を減らすことが出来て　fpsが上昇します


	物理シミュをBT RECボタンでベイクしてそれを再生するときの動きを改善	
		物理の動きを柔らかくする修正をした後のバージョンにおいて
		物理シミュ時には　LimitEulチェックボックスにチェックを入れてから　シミュをすることが必須になった

		物理シミュ時の角度制限は　LimitEulチェック時に働く
		その際には　制限角度を設定するだけで　実際の処理は　bulletPhysicsに任せている
		物理シミュの角度制限の仕方は　角度クランプではなく　行きすぎたら戻る力が働くような制限のようだ

		そのような物理シミュの角度制限なので
		BT RECボタンで　物理シミュをベイクした場合
		LimitEulをチェックしての再生時に
		自前のクランプによる角度制限機能が走り　動きがカクカクしていた(シミュ時には滑らかだったのに)

		ベイクした物理がカクカクしないように
		再生中に　可動かどうかをチェックする部分において
		GetBtForce() == 1の場合には　ismovable = 1として扱うようにした

		この修正によって
		物理シミュのベイク結果の再生が　シミュ時と同じ動きになった


	物理シミュ時のシミュ対象外ボーンが　カクカクする不具合修正
		シミュ対象外ボーンが　テストのために　シミュの影響を受けているままになっていました
		シミュ対象外ボーンは　通常モーションの通りに動かすように修正


	物理シミュ時に　大きすぎる位置移動で　シミュが乱れすぎないように対策
		シミュと非シミュの境目のモーション移動分を　子供のシミュボーンに伝達


	制限角度時のIKについてもう一度テスト＆修正


	参考までに
	1.1.0.13 RC1の制限角度機能の追加テスト結果のメモ

		制限角度＋プレビュー --> OK
		制限角度＋hips IK のテスト
			0_VRoid_Winter_B1読み込み-->hipsの回転を全部フレーム姿勢初期化-->
			hipsをLiniarブラシでtoppos100％でY軸２回転-->
			LimitEulチェック-->１フレームだけ選択-->hipsを回転-->子ジョイントがねじれた-->
			LimitEulチェックオンオフで直った
		LimitWMの未更新が原因？！
		対策として　IK回転関数の呼び出し後に　LimitEulチェック時の処理 --> OK　


		更にテスト
		LimitEulにチェックを入れて　IKRotする場合
		制限角度内に姿勢が収まる部分は　オリジナルの姿勢情報が上書きされる
		制限角度内に姿勢が収まらない部分は　オリジナルの姿勢情報のまま

		よって　制限でこれ以上動かなくなっているのに　マウスドラッグを続けると
		LimitEulチェックを外したときに　オイラー角には　段差が出来ている
		これは上に説明した通りであり　現在の仕様

		制限でドラッグしても動かなくなったら　すぐにドラッグをやめるのがコツ？！

		2023/01/27追記　LimitEulチェック時の処理が重すぎたので　対策を最適化
		 CBone::SetWorldMat()を修正して対応
		 CBone::SetWorldMat()でLimitedWMの更新と　ismovable==0時の子ジョイントへの再帰処理を追加
		制限角度内に姿勢が収まらない場合の処理は　LimitedWMをセットすることにした


	複数モデルを読み込んでの　初回の物理シミュ時に　制限角度が効かない不具合を修正
		その後いじっているうちに　１回目シミュ時の不具合が出るようになってしまいました
		今後のバージョンにて対応予定
		複数モデル読み込み時の　物理は　２回目から使ってください


	1.1.0.13の制限角度について
		1.1.0.13として出来ること
		既存のモーションの可動範囲を　ボタン１つで制限角度として設定
		可動範囲を越えないように　プレビューとIKを制限可能
		制限角度のApplyについては　物理シミュ対象ボーンに有効
		
		1.1.0.13として出来ないこと
		制限角度を設定した後に　角度を絞り込むような値をApplyした場合
		角度を絞り込んだボーンの子供ボーンのIKが動かなくなり出来ない
		絞り込んでのプレビューは出来るが　絞り込んでの子供ボーンIKが出来ない
		
		つまり
		オリジナルモーションから　はみ出さないように　制限することは出来るが
		オリジナルモーションよりも　絞り込むように　制限することが出来ない
		


		1.1.0.13以降の課題について

		現在の仕様として
		オリジナルのモーションと角度制限を施したモーションの２種類保持している
		問題になっているのは
		IK時に角度制限をしたモーションを　オリジナルのモーションにベイクする部分

		ローカル回転を求める時に
		親の姿勢として　オリジナルと角度制限とどちらが掛かっているか　どちらを掛けるかが難しくなっている
		操作が介入するので　余計に難しくなっている

		解決案としては
		オリジナルに角度制限をベイクするのはやめて
		オリジナルと編集結果のように分ける
		オリジナルにはオリジナルの親行列を掛ける
		編集結果には編集結果の親行列を掛ける
		というように明確にする
		(可能ならば)


	サンプル修正
		Test/0_VRoid_Winter_B1
		Test/shadowboxing20221231
			制限角度ファイルを　新しいプログラムのボタンを押して設定し直したものに
		

	YouTubeチャンネル
		https://www.youtube.com/@ochakkolab

	おちゃっこLAB
		https://ochakkolab.jp/


2023/01/23
	EditMot 1.1.0.12

	物理シミュ修正
		通常モーションの軸を変更したので　物理剛体の軸と一致していない状態が続いていた
		物理剛体の軸を　変更した通常モーションの軸と合わせた
		軸を合わせたことにより回転情報がそのままの値で　やり取りできるようになった(diff計算ではなくなった)

		BtCalcCntスライダーの初期値を３から２に変更
		表示回数fps依存で動きが硬くなったり柔らかくなったりする　物理の作業の際にはVSync(fps一定)チェックボックスにチェック
		モーション再生スピードによっても　物理シミュ結果は大きく変わります　Speedスライダーで調整

		物理シミュの動きが更に柔らかく
		物理シミュの動きが格段に柔らかく　かつ　制限角度が効くようになった

	物理シミュ時の角度制限が大幅改善
		物理シミュをする場合には
		ヘアージョイントに制限角度を設定し　LimitEulチェックボックスにチェックを入れることが必要になった
		モーション部分の制限角度はAngleLimitDlgのボタン１つで既存モーションから設定可能
		ヘアーなど物理シミュ部分の制限角度はfbxと同じフォルダに入っている*.lmtファイルをテキスト編集するのが早い設定の仕方
		lmtファイルにはバージョン管理情報がファイル先頭に書いてありこれを変えると読み込まれない
		lmtファイルは　バックアップを取った後に　既存のものを編集するのが良い
 
	物理シミュ時の当たり判定精度向上
		剛体の当たり判定形状の向きはボーン軸に合わせた

	コンパイル時の警告を解決(ただしbullet以外)

	外部ライブラリのMicrosoftのEffects11をdec2022にアップデート

	外部ライブラリのMicrosoftのDXUTをdec2022にアップデートしてマージ

	計算されないフレームが出来る潜在的不具合を解決

	移動アニメを回転する際のノイズ対策
		1.1.0.11からhips以外のジョイントの回転時に移動アニメも回転していた
		しかし
		移動の回転は　微妙な誤差を生じる
		そして操作の度に　その誤差が蓄積していた
		よって
		必要な時だけ　移動アニメを回転することにする
		３DウインドウのGUIのVSyncの隣に　TRotチェックボックスを追加
		TRotにチェックを入れたときのみ　hips以外のジョイントの移動アニメを回転する
		hipsの移動アニメは常に回転する
		デフォルト状態でTRotチェックはオフ

	LimitEulにチェックを入れてIKしたときのグラフのギザギザ対策
		LimitEulにチェックをしている状態で　限界を超えるようにIK回転をガチャガチャしていると
		オイラーグラフがギザギザになる
		緩和策として
		topposのフレームにおいて　先に可動チェックをして　無駄に動かさないようにした
		更なる対策としては
		ToolWindowの平滑化ボタンを押すこと
		関係のないジョイントまで平滑化すると　動きが変わることがあるので
		平滑化ボタンを　all, Parent One, Parent Deeperの３種類に増やした
		平滑化機能で　ガウシアンを選び　フィルター数として１１を選ぶと　かなり効果がある

	サンプル物理パラメータ修正
		Test/0_VRoid_Winter_B1
			物理シミュ時に　髪の毛が肩にめり込まないようになった
				髪の毛が頭にもめり込まないように
			ただし　BtCalcCntスライダーの値が小さすぎたり　Speedスライダーの値が大きすぎると　当たり判定で跳ね返しにくくなる

	TroubleShootingドキュメント２つに追記


2023/01/14
	EditMot 1.1.0.11

	IK操作で１８０度以上の回転をした場合(複数フレーム選択時)にも　オイラーグラフが階段状にならないように
		fbx読み込み時だけでなく　IK操作時にも　階段状ではない連続したオイラーグラフ
		165度以上の段差は平らにするようにしましたが　小さい段差は出来ることがあります

		段差をMayaで再生すると　オイラー角補間するので　少し傾くことがありますが　それはMayaのfps設定が適切ではないときの話
		Mayaの再生fpsを１フレームずつのステップになるように調整すれば　段差でも変になりません

		Unityでの再生ではオイラー角の段差は問題にはならないようです

	リターゲット時にHips以外の移動アニメも有効に

	ロングタイムラインの上方中央にマウス操作対象ジョイント名を大きく表示
		ロングタイムラインの左側のジョイント名表示を止めた分　タイムラインを広範囲に

	Hipsジョイントの回転時は　自動的にGlobal軸に
		Hipsの移動も回転させるためにGlobal軸にする

	
	不具合修正
		LimitEulチェックを入れても　プレビュー時に角度制限が効いていなかった不具合修正(IK時には効いていた)

		マウス中ボタンクリック + マウスホイールでのフレーム選択が効かなくなっていたのを修正

		体全体を１８０度回転した時のRigの回転が反対回転することがある不具合を修正
			通常のIKと同様に

	使い方ヒント
		１フレームの間に変化できる最大角度は165度(未満)
			オイラー角を階段状にしないために必要
			大きな変化をするにはそれなりに長いフレーム範囲を選択しておく必要があります
		
		指のRigを操作するときにはLimitEulチェックだけでなく　WallScrapingIKチェックボックスもチェック
			WallScrapingIKは指Rig以外での使用はお勧めしません
	

2022/12/31
	EditMot 1.1.0.10

	オイラー角オーバー１８０対応
		+-180度の制限をやめ
		１フレームの間に180度から-180度へ変化してMayaのプレビューでくるっと回る不具合解消

	制限角度もオーバー１８０対応
		制限角度ダイアログをスライダーベースからエディットボックスベースへ
		FromCurrentMotionボタンの機能を修正　フルフレーム再計算することによりbefeulの値を正しく
		サンプルの制限角度設定は設定し直しの必要有(読込済モーションの可動範囲をワンボタンで制限角度として設定可能)

		設定のヒント
			制限角度についても１８０度オーバーで指定するようになった
			制限無しとして設定するには　下限値を-180度, 上限値を+180に設定する

	オイラー角数値をMayaライクに
		オイラー角がMayaと同じ表示になった
		リターゲット済モーション　モーションだけのバインドポーズ無しfbx　モーションだけのバインドポーズ有りfbx　でテスト

	新しいオイラー角のもとでのIKとリターゲット

	IK回転操作時に移動成分も回転するように
		Hipsの親ではなくHips自身を回転させたときにHipsの移動成分も回転　全体の回転と全体の移動の関係が保たれる
		ロボットの腕を　IK移動で引き伸ばして　腕を引き伸ばした状態で腕をぐるぐる回すことが可能
		４種類ほどのファイルでテストしたが　Hipsジョイントも含めてテストOK.

		操作のヒント
			移動が設定してあるHipsを回転する際には　ブラシにRect, 軸としてGlobalを選択, topposスライダーを0%に設定

	グラフ表示修正
		直感的操作に合わせた表示
		回転操作時にはIK(１つ親のジョイントのオイラー角表示)
		移動、拡大操作時にはFK(選択ジョイント自体の移動または拡大情報表示)

	サンプル更新
		制限角度設定のための更新
		Test/0_VRoid_Winter_B0
		Test/1_Test20221218_CB0
		Test/shadowboxing20221231


	ver. 1.1.0.10操作のヒント	
		IK, FK　と　オイラーグラフに表示する情報について
		　回転操作はIK(子供ジョイントをドラッグして親ジョイント中心に回転)
		　移動操作と拡大操作はFK(操作するジョイント自体をドラッグして　操作するジョイント自体の状態を編集)

		　上記のIKとFKの切り替えは　回転、移動、拡大に関する　直感的操作に基づくものと思っている

		　回転、移動、拡大を切り替えると　オイラーグラフに表示するジョイント情報も変わる
		　回転の時には　選択しているジョイントの親のジョイントのオイラー角を表示
		　移動、拡大時には　選択しているジョイント自身の　移動または拡大情報を表示
		　グラフ上段左側に　赤い字で　操作するジョイントの名前を表示


		オイラー角について
		　オイラー角の数値は　Mayaライク(こちらでテストした６種類ほどのfbxではMayaと一致)な　１種類のオイラー角
		　オイラー角は１種類だが　回転、移動、拡大する際のマニピュレータの軸は　４種類
		　マニピュレータ軸４種は　Current, Parent, Global, BindPoseであり　コンボボックスで選択可能
		　軸としてのBindPoseは今回新規
		　本来は　同じ姿勢でも計算時の軸が異なるとオイラー角も異なる(だがオイラー角は１種類の表示にしている)
		　オイラー角計算時の軸はBindPoseと同等(GLOBAL以外の場合には　軸にカレントボーンの姿勢を掛けて表示)
		　操作中、操作後にも各種軸はブレないことを確認


2022/11/30
	EditMot 1.0.0.35

	LimitDegチェックボックスとWallScrapingIKチェックボックスのアンドゥ処理修正
		チェックを入れてからアンドゥするとアンドゥ処理自体が保存されてしまい　アンドゥが先に進まなくなっていたのを修正

	VRoidの頭ジョイントを読み込み時に非表示設定
		髪の毛のジョイントが多くて　顔がみえなかったので対応
		頭ジョイントの表示をオンにするには　ToolWindowのジョイントスキップResetボタンを押す

	姿勢初期化の修正
		子供を持たないエンドジョイントの姿勢の初期化が出来ていなかったので修正

	bvhをFbxに変換する際のbindmatを無しに
		fbxを読み込む際に設定する
		(マニピュレータ軸とは別件)
	
	SSE2復活
		マニピュレータやリグマークとマウスの当たり判定が機能していなかった問題によりSSE2を止めていました
		SSE2による割り算の際のfloatの最小値を1e-5からFLT_MINにしたところ問題解消
		当たり判定時に　最小距離より近い場合にはそれだけで当りとする部分と　上記float最小値の問題だった

	VRoidモデルの制限角度設定　Test/0_VRoid_Winter_9
		bvh120, bvh103のモーションの可動範囲を制限角度として設定
		指は開閉モーションを作りその可動範囲を制限角度として設定

	VRoidモデルの指のリグ修正　Test/0_VRoid_Winter_9
		親指の動きを修正
		指のリグを制限角度付で操作するには　LimitEulチェックボックスだけではなくWallScrapingIKにもチェック

	アンドゥ直後のフレーム選択が正しくなかったのを修正

	プレイヤーボタンの　１フレームへジャンプボタンと　最終フレームへジャンプボタンを修正

	ThreadNumとhigh rpmの組み合わせの効果テスト
		効果の割合が大きいのは　PriciseOnPreviewチェックボックスにチェックを入れてプレビューしたとき
		4KTV接続で　ウインドウ大選択起動時　30fpsが70fpsになるくらいの効果があった



	使っていて不具合がどうしても気になったので直しました
		この後しばらくは新機能のことや新技術勉強などに時間を使います

	YouTubeチャンネル
		https://www.youtube.com/@ochakkolab

	おちゃっこLAB
		https://ochakkolab.jp/


2022/11/10
	EditMot 1.0.0.34

	SSE2の精度が足りないことで起こっていた不具合修正
		ここまでのまとめ版を作りたかったので　AVX2対応ではなく通常の演算に戻しました
		マニピュレータのピック不具合とRigマークのピック不具合が直りました
		UpdateThreadsスライダーでスレッド数を増やしてhigh rpmにしたときの効果が少なくなりました

	VRoidの指のRig設定追加
		Camera and IKプレートメニューのRigボタンを押すと手の場所に指を開閉する設定をしたRigマークが現れます
	
	モデル全体回転時の全体移動の回転をシンプルに
		RootあるいはReferenceが名前に付いているボーンが存在しない場合には原点にRootボーンを作成
		Hipsボーンで体中心の回転と移動をし　Rootボーンで全体を(移動成分も)回転することを想定

	アンドゥリドゥの不具合修正
		一番新しい保存から一番古い保存へのリドゥを禁止
		一番古い保存から一番新しい保存へのアンドゥを禁止
			保存している変更を全て適用する必要があり　意図と違うと思われるため
		
	BtRec停止時のタイムライン表示
		BtRecボタンで物理をモーションにベイクしてStopBtで停止した時にタイムライン表示がずれていたのを修正

	プレイヤーボタンの２重のVマークと２重の＾マーク
		選択範囲だけの履歴機能ボタンから　アンドゥリドゥ機能ボタンへと変更

	4KTV接続時にウインドウ大を選んだ場合
		Disp and Limitsプレートメニューのコンボボックスが見切れないように　３Dウインドウ上部に配置

	マニピュレータの種類の選択が効いていなかったのを修正
		軸がブレないことも確認

	コピー履歴ダイアログの修正
		ToolWindowからコピー履歴ダイアログを開いて　最新のコピーを選択チェックを外した後
		どれかコピーをクリックしないとペーストされない不具合を修正　
	



	1.0.0.33のときに予告しました通り
	このバージョンリリース後は　しばらくの間　メンテナンスよりも新技術勉強に力を入れる予定


2022/11/04
	EditMot 1.0.0.33

	ジョイントの向きの強制リセットをやめてfbxの情報を読み書きするように修正
		読み込めるfbxが増えました
	
	読み込み方が変わったのでリターゲットも修正
		モデル側０フレーム姿勢編集テスト済(０フレーム編集後はすぐに保存して読みなおしてください)
		モーション側０フレームに姿勢有のテスト済

	マニピュレータ改善
		自動的にボーンの軸がマニピュレータのX軸に向く機能を大幅改善
		０フレームにポーズが付いていても正常に機能
		親ジョイントにポーズを付けても　きちんとX軸を向く
		IK中にIK平面がブレない
		(今までのマニピュレータが冗談かと思うくらい　しっかり直りました)

	ライトの向き修正
		常に明るく
		カメラ位置からターゲット位置への向きに

	FileのOpenメニューのダイアログ不具合修正
	　フィルターボタン２つを交互に押してからキャンセルすると　プレートメニューが選択できなくなる不具合修正

	
	Testフォルダに制限角度確認用モデルを追加
		Test/0_VRoid_LimitEulTest
			通常再生では　モーキャプ精度問題により　足首の動きがありえませんが
			Display and LimitsプレートメニューのLimitEulにチェックを入れて再生すると
			足首が安全になります
			テストモーションは　ソファにしりもちをつきながらの　なんとかダンスです
			このテストデータの作り方は
				bvh120のモーションを全てリターゲットして
				LimitEulプレートメニューを実行
				LimitEulウインドウ(サイドウインドウ)の0Resetボタンを実行
				FromCurrentMotionを全てのモーションについて実行し制限角度設定
				不要なモデルと不要なモーションを削除
				プロジェクト保存
				bvh121をリターゲット
				LimitDegチェックをオン
				bvh120で作成した制限角度をbvh121に適用したことになります
				プロジェクト保存
				
			テストとして角度外に曲がらないように粗く制限角度を付けました
			実際に使用するには　その上で　モーションブラシ編集により　滑らかにする必要有


	このバージョンリリース後は　しばらくの間　メンテナンスよりも新技術勉強に力を入れる予定
		だが　まだ　Rig周りについて　気がかりではある、、、


	基本機能に不具合がみつかったのでメンテナンスして2022/11/16に1.0.0.34出します
		現時点で修正済(手元のソース)の1.0.0.34の内容
		マニピュレータのピック不具合修正
		Rigマークのピック不具合修正
		VRoidの指のRig設定追加
		アンドゥリドゥの不具合修正
		BtRecを止めたときのタイムラインずれの修正


2022/10/28
	EditMot 1.0.0.32

	リターゲット数式修正
		1.0.0.26までの数式とその後の1.0.0.31までの数式を修正して合体
		bvh側の０フレームアニメとmodel側の０フレームアニメの両方に対応

	プレビュー時GUI表示詳細モード追加
		DispAndLimitsプレートメニューにpreciseOnPreivewTooチェックボックス追加
		上記チェックボックスにチェックするとプレビュー時にもGUI表示を詳細に

	カメラが近づきすぎるとカメラが固まる不具合修正

	リターゲット設定ファイル(*.rtg)書き出し時にも履歴に追加


	サンプル修正と追加
		Test/1_Test20221029_C9
		Test/RetargetSettingFileExample/*.rtg


	完成度極大値バージョン？
		機能追加時期とデバッグ時期があるとすると　このバージョンの完成度は極大値だと思われる！？
		と思ったのだが
		次に記述している問題点対応がうまくいったようなので次の1.0.0.33が極大値！？


	#### 既知の問題点 ####
		ジョイントの向き(アニメーションでもIK用軸でもなくジョイント位置に影響する向き)が設定されている場合に
		それを反映できていない
		Mayaでならわかるのだがfbxsdkでどうやるのか不明
		しばらくの間　試行錯誤が必要であろう
	　解決
		1.0.0.33(2022/11/09公開予定)で対応済		


2022/10/22
	EditMot 1.0.0.31

	モーションが１つも無いfbxを読み込んだ場合の不具合修正
		モーションが無いfbxを読み込むとIK操作やリターゲットをしても全く動かない不具合を修正

	オイラーグラフの選択部分の後半部分の表示が更新されない不具合修正
		高速化の際に範囲指定を間違えていました

	モーションの最終フレームにモーションポイントが無い不具合修正
		最終フレーム番号の計算を修正
			複数回-1しているのが原因でした

	アンドゥリドゥ不具合修正
		最終フレームまで選択ボタンで選択した場合にアンドゥ用の保存をしていなかったのを修正
			最終フレームにモーションポイントが作成されていないためアンドゥが無効化されていました
		EditMotのアンドゥはモーション編集に関してのアンドゥということを再確認
		モーション編集に関わるブラシパラメータ(Brushプレートメニューで表示されるGUI設定)もアンドゥ対象に追加

	アンドゥの最大回数を２００回から９９９回に変更

	GUIメニュープレートの配置を改善
		プレート文字を意味が分かる文字列に変更
		配置もプレート文字の意味に従って配置し直し

	BtStop(物理停止ボタン)でLimitDeg(制限角度)のチェックが外れる不具合修正

	TopPosスライダーの両端の値(０％のときと１００％の時のフレーム位置)がずれている不具合修正
		計算式を見直し
		
	ツールウインドウに１８０度補正ボタンを追加
		まだ試験的実装

	オイラーグラフの選択範囲をみやすく
		選択範囲の両端とTopPosのフレーム部分に垂直ラインを描画
		どこからどこまで選択したのかの確認が楽に

	プレビュー時のフレーム番号表示をみやすく
		プレビュー時にはメモリの範囲ではなくカレントフレーム番号を表示

	VSyncプレートメニュー
		VSyncのオンオフを切り替えるチェックボックスを追加

	VRoidのサンプルモデルを冬用に変更
		Test/0_VRoid_Winter_8 ディレクトリ
		物理の設定もしておきました

	
	動画
	【モーキャプツール】EditMot 1.0.0.31【１分紹介】
	https://youtu.be/3Azcq_we_B0



	#### ver1.0.0.32 予告 ####
	リターゲット数式が修正されます
		1.0.0.26までは
			bvh側の０フレームにモーションが付いていても正しくリターゲット
		1.0.0.27から1.0.0.31までは
			model側の０フレームモーションに対応しようとしていました
		1.0.0.32では
			bvh側とmodel側両方に０フレームモーションがあっても正しくリターゲット
			手元のバージョンでは既に直っていますが公開は2022/11/2(水)夕方の予定

			

2022/10/19
	EditMot 1.0.0.30

	制限角度付プレビューを滑らかに高速に
		通常のプレビューと同様にdoubleの時間に対応してプレビュー
		制限角度時の計算を効率化して通常プレビューとあまり変わらない速度でプレビュー
		
	プレビュー高速化
		行列とベクトルの演算についてSIMD(SSE2)対応
		効果が分かりやすいようにVSync解除中

	１秒間の描画回数fpsをスプライト表示でみやすく

	アンドゥリドゥの不具合修正

	アンドゥリドゥ用のGUI
		アンドゥの番号をみてどの状態に戻るかわかるようにGUI表示
		R:***はアンドゥ読み込みポイントを表示
		W:***はアンドゥ書き込みポイントを表示
		アンドゥリドゥ実行用のGUIも追加

	プレビュー時のオイラーグラフ表示
		重くならないように例のアニメのワープタイミングモニタ風に

	オイラーグラフの不具合修正
		最大値と最小値の幅が小さすぎる場合に目盛り文字が重なっていたのを修正

	High rpmモードの挙動修正
		High rpmにチェックを入れていても高回転モードはプレビュー時のみ有効
		プレビュー時以外はecoモードに

	Thraed numの最大値変更
		Windows11のアップデートによりCPUビジー時にもマウス応答が良くなったので
		スレッド数上限をモデル当たり４だったのを８に増やした


　　【告知】EditMot 1.0.0.30【モーキャプ編集ソフト】
　　　動画リンク
　　　https://youtu.be/1hE2d4g_Ijw
	

2022/10/02
	約半年分の更新の説明
	https://ochakkolab.jp/diary_win.html#OSS_20221002_1

2022/09/20
	EditMot 1.0.0.29 RC2

	リターゲット後のモーションのルートボーンを回転する場合の不具合修正
		bvhをリターゲットしたモーションで移動成分が回転しない不具合が直りました
		直すためには1.0.0.29以降でリターゲットし直す必要があります

	１クリック目の不具合修正
		ロングタイムラインなどにおいて１クリック目が正しく機能していなかった不具合解消


2022/09/17
	EditMot 1.0.0.28

	ChaVecCalcにリファクタリング用の関数を追加
		ChaVector3クラスに回転、スケール、移動行列を返す関数追加
		ChaMatrixクラスにChaVector3などを渡して回転、スケール、移動行列をセットする関数追加

	バインドポーズが無いfbxの保存が出来るように

	タイムラインの選択フレームの色変更
		プレビュー時に選択色が解除されないように

	タイムラインのキーをフルフレームインデックス化
		１万フレームを越えるモーション編集時にジョイント選択がとても遅くなる症状が無くなりました
			編集についても高速化
		プレビュー速度も多少速くなりました

	アンドゥーリドゥの改善
		編集部分だけをアンドゥリドゥすることにより大幅に高速化
		選択範囲とブラシ設定も復元
		２００回まではアンドゥ済の情報も保存したままにするように修正
		読み出しポイントと書き出しポイントを別管理することにより使いやすく
		UndoとRedoを　3DウインドウのSpriteIKグループの　スプライトスイッチに

	オイラーグラフ表示高速化
		１秒間の描画回数fpsは環境依存であって目安でしかないですが
		こちらの環境において4KTV表示時にもプレビューが60fps出るようになりました
		表示解像度は小さいほど表示が速くなりますが4KTVでも使えるようになりました

	リターゲットファイル読み込みダイアログに履歴機能追加
		リターゲットウインドウのLoad rtg fileボタンを押したときのダイアログに履歴を追加

	モデル側の１番目のモーションを削除するとリターゲット結果が全て初期姿勢になる不具合修正

	リターゲット時にbvh側の指定をし直した場合にはジョイント名対応表を初期化

	ToolWindowにSkipBoneMark, ResetBoneMarkを追加
		選択中のボーンとその子供ボーンのボーンマークの非表示表示切り替え
		ボーンマークをスキップしているボーンはマウスで掴めないように

	モーションを切り替えてもモーションスピードスライダーの設定値を保持するように


2022/09/01
	EditMot 1.0.0.27

	０フレーム編集
		０フレーム編集はモデルの最初のモーションの０フレームに対して行う仕様
		０フレーム編集して保存したfbxをMayaで読み込みOK
		０フレーム編集結果をモーション新規作成時に適用
		リターゲット時にモデル側０フレームアニメーション考慮、結果をMayaで確認OK
		Tool Windowに "Edit 0 Frame" ボタンを追加

	ToolWindowの補間ボタン修正
		補間の効果がオイラーグラフと１階層分ずれていたのを修正
		
	リターゲット処理改良
		リターゲットファイル(*.rtg)を読み込む際、ジョイント名に"_Joint"が入っている場合と入っていない場合両方検索
			"_Joint" はジョイント名の予約語扱い
		リターゲットウインドウで対応ジョイントを指定した後にNotSetに指定を戻せるようにした

	サンプル追加
		Testディレクトリ

	バインドポーズの無いfbx読み込み改善

	Rokokoなどのバインドポーズの無いfbxの保存は改変せずに元のfbxをコピーするだけに。
		(リターゲットは出来ます。)


2022/08/22
	EditMot 1.0.0.26

	(訳あって)ソフト名を　EditMot　に変更


	物理シミュレーションの高速化
		物理IKだけで必要な処理を条件文内に入れた

	ゲームパッドをつないでいないときのファイルダイアログをエクスプローラ形式に
		どうしても長いファイル名があるから


	姿勢計算のマルチスレッド化(プレビュー時の描画速度の高速化)
		3Dウインドウに新たにhigh rpmチェックボックスとUpdateMatrixThreadsスライダーが加わりました
		high rpmチェックボックスとUpdateMatrixThreadsスライダーはペアで使います。

		UpdateMatrixThreadsスライダーは
		UpdateMatrix計算時のスレッドの数を指定するためのもので１から４まであります
		スレッドの数は１モデルあたりのスレッド数です

		high rpmはスレッドを高回転させるかどうかを指定します
		スレッド数を増やすだけでは表示速度は速くならないことが多い
		スレッド数を適切に増やしてhigh rpmをオンにすると高速化することが多い
		高速化する場合にはその分CPUの稼働率は高くなります

		制限角度(LimitEul)をオンにした場合についても最適化済


	Fbxアニメーション読み込みのマルチスレッド化
		テスト例：１０秒かかっていた読み込みが６秒になったのを確認
		

	fps表示を60回描画時間の平均値に


	リターゲットウインドウを分かりやすく
		適用される側のモデルの選択ボタンをやめて現在選択中モデルを自動セット


	サンプルのyuriちゃんのTポーズを修正して腕が閉じすぎないように
		Test/Test20220818_C6


	C++14標準からC++20標準にバージョンアップ
		ただしEffect11はC++17


2022/08
	MotionBrushFree 1.0.0.25

	フリーウェア化して名前をMotionBrushからMotionBrushFreeに変更


	Toolウインドウの補間ボタンのバージョンアップ
		モーションの補間時に選択中のブラシカーブを適用するように。
	
	1メッシュに付き複数マテリアルが指定されていても読み込めるように。
		VRoidのvrmファイルから変換したfbxファイルも読み込めるように。
		VRoid1.4.1以降のHair1からHair6のジョイントに自動で物理シミュ設定。

	エンドジョイントも物理シミュ対応
		エンドジョイントが頂点に対して影響度を持っている場合にも物理シミュが機能。


	商用モーキャプfbxデータ(RokokoMotionLibrary)の読み書き編集リターゲットに対応
		バインドポーズを持たないfbxの読み込みを　更に　改善
			０フレームにアニメーションが設定してあってもリターゲット可能
			モーション編集も通常通り行うことが出来る


	Punch1ブラシとPunch2ブラシのデバッグ
		
	RigidParams設定ウインドウ
		rotSpring CustomValueの最小値(10.0)を2.0に変更

	Testフォルダにサンプル追加
		Test/VRoid_131追加
			VRoidから変換したfbxのサンプル。chaファイルをオープンしてご覧ください。

		Test/RetargetSettingFileExample/vroid141_bvh131.rtg追加
			VRoidから変換したfbxに対するリターゲット設定ファイルとして使用ください

	FileメニューのOpen時のダイアログ改良
		履歴１０件を２０件に変更
		Filter *.chaボタンとFilter *.fbxボタンを追加。履歴に拡張子フィルター。

	重要文字を赤で
		タイムラインのテキストカラー
		リターゲットウインドウのテキストカラー

	ツールウインドウの補間ボタンを３種類に増
		(ボーンごとの補間が可能に)
		補間(all)
		補間(one)
		補間(deeper)
		

	VCランタイムを実行ファイル自身に持つようにビルド
		VC_redist.x64.exeをインストールしなくても動くように


2022/05/18
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24


	LimitEulはデフォルトでオフ
		オンにする場合はBasicSettings2を押してからLimitEulにチェックを入れる


2022/05/17　その２
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24


	プレビュー時の事前計算はLimitEulにチェックを入れているときだけ行う

	
2022/05/17
	MotionBrush 1.0.0.24へ向けて、あるいはこれが1.0.0.24

	オイラー角計算修正
		オイラー角90度をまたぐときの問題が解決
		(キャプチャ精度依存やノイズ依存の乱れは直りません)

		ほとんどすべての機能に関係します
		bvh2fbxなどの結果にも影響します		
		
	プレビュー時の事前計算部分ThreadFunc_CalcLimitedWM部分をif(0)に
		制限角度有効時にどうしても遅い場合にThreadFunc_CalcLimitedWM部分をif(1)にすること
		

2022/01/11
	MotionBrush ver1.0.0.23RC6(リリース候補6)


	リターゲット後に物理シミュをすると重くてカクカクして揺れない不具合を修正
		短いモーションが混ざっている場合に頻繁にシミュ用オブジェクト作成処理が走ることが原因だったので対応


	制限角度変更時に事前計算のフラグがクリアされていなかったのを修正


	制限角度事前計算中は表示しないように

	指をリグで開閉していると動かなくなる部分があることに対してトラブルシューティング追加
		WallScrapingIKをオンにすると解決します


	リドゥー時にフレーム選択範囲がタイムラインの中央に来ない不具合修正
		Ctrl + Shiftがマウス中ボタン機能に割り当てられていたのを止めた

	

	テスト項目
	bvh2Fbx batchテスト済
	リターゲットバッチテスト済
	壁すりIK(WallScrapingIK)オンオフでIKテスト済
	制限角度有り無しモーション再生チェック済
	物理シミュテスト済
	保存読み込みテスト済
	スケール保存読み込みテスト済
	平滑化テスト済
	補間テスト済
	物理ベイクテスト(PhysRec)済	
	剛体パラメータ設定テスト済
	モーションから制限角度設定テスト済
	制限角度リセットテスト済
	コピーペーストテスト済
	操作対象ボーン設定後のコピーペーストテスト済
	リグ操作保存読み込みテスト済
	リファレンスポーズ軌跡表示機能テスト済
	アンドゥリドゥテスト済
	アンドゥ履歴ボタンテスト済
	ゲームパッド操作テスト済
	複数キャラ読み込み操作テスト済
	MotionBrushC4.exeテスト済


	(最新exeは付いていません)
	

2022/01/09
	MotionBrush ver1.0.0.23RC5(リリース候補5)


	新規にリグを作成してもジョイント名が緑色にならない不具合修正
	

	カスタムリグを右クリックメニューから削除(無効化)出来るように


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2022/01/07
	MotionBrush ver1.0.0.23RC2(リリース候補２)

	コピー履歴ダイアログでコピーを選択後にOKボタンを押さなくても選択を反映

	４KTV表示時のGUIを画面中央寄せ

	WallScrapingIKはデフォルトではオフに

	オイラーグラフにおけるモーションブラシ表示の範囲を-1から+1までに

	GUIフォントのWを少し修正

	サイドウインドウの上部の４つのメニューボタンを使用頻度の高い４つに選定しなおし

	階層エディタにおいてRigが設定してあるジョイント名は緑色で表示

	初回クリック時にブレットオブジェクト作成せずにモデル選択時とFBX読み込み時に作成

	プロジェクトファイル(*.cha)でモデルの位置を設定している場合のマニピュレータ位置計算修正	

	コピーライト更新
		2021-->2022
		info@ochakkolab.moo.jp-->info@ochakkolab.jp
		https://moo-ochakkolab.ssl-lolipop.jp-->https://ochakkolab.jp


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2022/01/06
	ver1.0.0.23へ向けて

	プレビュー開始時の制限角度事前計算をマルチスレッド化


	バッチ処理のマルチスレッド処理のリファクタリング


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2022/01/05_2
	ver1.0.0.23へ向けて

	アンドゥーリドゥ(Ctrl + Z, Ctrl + Shift + Z)時にフレーム選択を復元


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2022/01/05
	ver1.0.0.23へ向けて

	タイムライン上の選択位置がセンターになるようにcalcShowPosTime
			
	プレイヤーボタンの中の選択範囲履歴ボタンを押して選択範囲復元時に
	選択フレームがタイムラインの中央に来るように

	MotionBrushC4.exeの終了時のお行儀を良く
		4KTVに接続していない場合の終了時にメッセージを表示
		終了時の処理を修正して起動していた分のMotionBrush*.iniファイルが出力されるように修正


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/12/25
	MotionBrush 1.0.0.23に向けて
	

	初回の物理シミュレーションが乱れる不具合を修正	


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/12/24
	MotionBrush 1.0.0.22DX2(特別版)
	
	久しぶりに１２キャラを読み込んで再生したら遅かったので高速化

		ボトルネック特定
		UpdateMatrix内で姿勢に制限角度を適用している部分が遅かった
		制限角度をダーティフラグ付きで事前計算
		再生ボタンを押したときとBtStartボタンを押したときに事前計算してから再生することで再生が速い
		２回目以降の再生は事前計算も速い
		こちらの環境では２倍速から３倍速に高速化


	タイムラインのアップデートはマルチスレッドに


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/12/09
  Information
　　物理ブラシについてのメモ
　　https://ochakkolab.jp/diary_win.html#MotionBrush_20211209_1

2021/12/08
  Information
    MotionBrush 1.0.0.22
    1.0.0.1, 1.0.0.7に続く３度目の完成版公開開始！！
    Vector様のサイトにて配布中
　  https://www.vector.co.jp/soft/winnt/art/se523002.html


  　日記更新
　  カスタムリグについてメモ
  　https://ochakkolab.jp/diary_win.html#MotionBrush_20211208_1

  　おちゃっこLAB
    https://ochakkolab.jp/

    おちゃっこLABのMameBake3Dのページ
    https://ochakkolab.jp/LABMenu/MameBake3D.html

2021/12/06
	Information
	日記：アンドゥとリドゥについてメモ
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211206_1

2021/12/05
	Information
	日記：制限角度の設定と制限角度下でのIKについてメモ
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211205_1

2021/12/03_3
	MotionBrushはver1.0.0.7に続きver1.0.0.22で２回目の完成！！
	お疲れさまでした！！
	やること候補リストは増えていますが
	致命的エラーがみつからなければ対応しない可能性
	動画や日記は続く予定

	Information
	  MotoinBrush 1.0.0.22実行ファイル2021/12/08夕方公開予定
	　(現在ver1.0.0.21公開中)
	  https://www.vector.co.jp/soft/winnt/art/se523002.html

	  日記：Unity3DとVRoid正式版との連携方法について
	  https://ochakkolab.jp/diary_win.html#MotionBrush_20211114

	  日記：コピー履歴機能の使い方メモ
	  https://ochakkolab.jp/diary_win.html#MotionBrush_20211203_1

	  おちゃっこLAB　MotionBrush(MameBake3D)のページ
	  https://ochakkolab.jp/LABMenu/MameBake3D.html


2021/12/03
	MotoinBrush 1.0.0.22正式版

	iniファイルにロード時とセーブ時のマテリアル倍率項目を追加

	Documents/TroubleShootingフォルダにドキュメント追加
		DifferenceMaterialBetweenMotionBrushAndMaya.docx


	サンプルマテリアル調整


	基本機能のテスト済


	(最新exeは付いていません)


2021/12/02_2
	1.0.0.22RC8

	リグダイアログを開いたままリグを操作してからダイアログのApplyボタンを押すと
	異なるリグに保存することがある不具合修正


	サンプルの手のリグの修正


	サンプルの手の制限角度の修正


	GUIプレートのフォント統一(前回更新時の残りのものも作り直し)	


	Documents/TroubleShootingフォルダにドキュメント追加
		ACaseNotMoveToZeroFrameThoughRollMouseWheelToZeroframe.docx
		ACaseNotRestoreSelectionOfFramesAfterUndoOperation.docx


	bvh2Fbx batchテスト済
	リターゲットバッチテスト済
	壁すりIK(WallScrapingIK)オンオフでIKテスト済
	制限角度有り無しモーション再生チェック済
	物理シミュテスト済
	保存読み込みテスト済
	スケール保存読み込みテスト済
	平滑化テスト
	補間テスト
	物理ベイクテスト(PhysRec)	
	剛体パラメータ設定テスト
	モーションから制限角度設定テスト
	制限角度リセットテスト
	コピーペーストテスト
	操作対象ボーン設定後のコピーペーストテスト
	リグ操作保存読み込みテスト
	リファレンスポーズ軌跡表示機能テスト
	アンドゥリドゥテスト
	アンドゥ履歴ボタンテスト


	テスト中


	(最新exeは付いていません)



2021/12/02_1
	1.0.0.22RC7

	既存モーションの可動範囲を制限角度に設定するボタン追加
		制限角度の設定が簡単になりました
		既存モーションで実際に動いている範囲を制限角度にします
		Additive(追加設定)仕様なので初回実行時の前にリセット０ボタンを押します
		Additive(追加設定)仕様なので複数のモーションの最大可動範囲を制限角度に出来ます
		
		リセットボタンもあります

	Testフォルダの制限角度ファイル更新
		モーションキャプチャデータから制限角度を設定


	テスト中


	(最新exeは付いていません)


2021/12/01_3
	1.0.0.22RC5

	拡大縮小アニメにおいて元の大きさよりも縮小出来なかった不具合を修正
	

	プロジェクト保存時の制限角度をベイクするチェックボックスにチェックしていても
	３DウインドウのLimitEulチェックを外していると制限角度がベイクされない不具合を修正
	

	

	テスト中


	(最新exeは付いていません)


2021/12/01_2
	1.0.0.22RC2

	ロングタイムライン上でマウス中ボタンを押したときに３Dウインドウにマウスマーク表示
		ロングタイムライン上でMボタン-->ホイール-->Mボタンでフレーム選択可能

	ゲームパッド使用時に３Dウインドウがアクティブの時に出る電球マークが表示されていなかったのを修正


	ウインドウの大きさが微妙に違っていたのを修正


	GUIプレートの大きさとピック判定数値修正
	

	テスト中


	(最新exeは付いていません)


2021/12/01
	ver1.0.0.22へ向けて


	新ブラシ追加
		Punch_1, Punch_2, X2Cap, X2Needle


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/30
	ver1.0.0.22へ向けて

	GUIプレート内のテキスト修正

	GUIプレートの色を調整


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_3
	ver1.0.0.22へ向けて

	ウインドウがデスクトップの中央に出るように

	MotionBrush.iniファイルの読み込み書き込み
		設定を指定、保存
	
	物理IKは使い方が難しいのでオプションに
		iniファイルで指定した時のみ物理IKのボタンが出るように
		物理IK時は制限角度チェックボックスを外すようにした


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_2
	ver1.0.0.22へ向けて

	Documents/TroubleShootingにドキュメント追加
	WhyYZEulValueIsChangeWhenDragX.docx追加
	(X軸をドラッグした時になぜY軸とZ軸のオイラー角が変化するのかについて)

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/29_1
	ver1.0.0.22へ向けて

	操作中にブラシメモリのアクセス違反が起こることがあったのを修正
		モーション長とブラシメモリ長の不一致時の不具合
		アクセス時にブラシメモリの長さをチェックするように

	3DウインドウのPseudoLocalのチェックボックスは画面に出なくなりました
		PseudoLocalIKは常にオンになります

	3Dウインドウに新たにWallScrapingIKチェックボックスが加わりました
		壁すりIKのオンとオフを指定するためのものです
		壁すりIKとは
		制限角度を越えてIK操作を行おうとした場合に
		制限に達した成分以外は変化させるIKのことです
		壁すりIKをオンにすることで制限角度下でも動かしやすいIK操作が可能です
		言い方を変えると
		壁すりIKをオフにするとXYZどれかの軸が制限値に達した場合にIKで動かすことが難しくなります


	LimitEulerダイアログでの制限角度設定の結果がオイラーグラフにリアルタイムで反映されるように

	4KTV表示以外の場合GUIプレートの右端が見切れていたのを修正

	4KTV接続時にも小さい画面で起動可能なように大小を選択可能なダイアログを起動時に出すようにしました
		4KTV接続時のみ大小選択ダイアログが出ます

	
	MotionBrushC4.exe起動時の縦横選択ダイアログがデスクトップ中央に出るように修正


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/26_3
	MotionBrush ver1.0.0.21正式版


	テスト

	サンプルデータ更新
		Hip_Jointの制限角度を制限無しに

	
	(最新exeは付いていません)


2021/11/26_2
	ver1.0.0.21RC3


	Documents/TroubleShootingにトラブルシューティングを４つ追加


	
	(最新exeは付いていません)


2021/11/26_1
	ver1.0.0.21RC2

	プロジェクト保存ダイアログに制限角度をベイクオプションを追加
		制限角度をベイクオプションにチェックを入れると
		3DウインドウのLimitEulチェックボックスにチェックを入れてプレビューしたときと同様のモーションをfbxに保存します


	リグ設定テストアンドデバッグ
		サンプルのrigファイル更新
		リグ設定ダイアログを開くときに古いリグ設定ファイルを閉じるように修正

	制限角度下におけるIKについて
		とにかくゆっくり動かすのが基本
		大きく上に大きく下に動かすと
		オイラーグラフ上で上向きの山と下向きの山の足し算になり端の方にクサビが生じやすい
		とにかくゆっくり動かす！！！

	EditRate初期値を0.3に

	遊び付き制限角度IKの遊びを５度から２度に

	
	(最新exeは付いていません)


2021/11/25_3
	ver1.0.0.21RC1

	制限角度IK時に１８０度線をまたいでしまうことについて
		１８０度線を越えたくない場合の制限角度ファイルは+-170度設定に。
		１８０度線をまたいでしまう理由はマウスの移動量が大きすぎるため
		基本的にはゆっくりマウスを動かしてIKする他無い
		Ctrlキーを押しながらマニピュレータの軸をドラッグするとマウス移動量は0.25倍計算されてまたぎにくくなる
		３DウインドウのPhysicsIKプレートを押しEditRateスライダーを調整することによっても変化量を調整可能
		複数フレーム選択するほど処理は重くなるので計算回数を増やすプログラミングはしなかった
	
	Testフォルダのサンプルの制限角度ファイル更新

	4Kテレビで表示時のInfoWindowの画面内デバッグ出力を10行に

	矢印キーで階層選択移動する際にマウスが階層エディタ上に無い場合には選択変更箇所へカーソルを飛ばさないようにした
		他のダイアログ設定時にカーソルが階層エディタへ行ってしまわないように


	初回のIKで乱れやすい不具合を修正


	bvh2fbxバッチテスト
	リターゲットバッチテスト
	IKテスト
	リグテスト	


	(最新exeは付いていません)


2021/11/25_2
	ver1.0.0.21へ向けて


	リターゲットのテストアンドデバッグ
		リターゲットで不具合が出ていたのを修正


	＊制限角度について
	3DウインドウのLeft2ndプレートを押して出てくるLimitEulチェックボックスで
	制限角度のオンオフ出来ます
	Testフォルダのサンプルには制限角度を設定しておきましたが
	どんなモーションにも適切な制限角度というのは難しいです
	ケースバイケースでオンオフしたり設定を変えてください
	設定を変えるには3Dウインドウの変えるボタンを２回押すと出てくるLimitEulプレートをクリックします


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/11/25_1
	ver1.0.0.21へ向けて


	遊び付きリミテッドIK
		制限角度下でも操作しやすいIK



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/24_1
	ver1.0.0.21へ向けて

	制限角度に５度の遊びを設けた
		IKが動きにくくなったので遊びを付けた

		IK操作において
		制限角度内にドラッグしているのに動かないときには
		他の軸の値が制限値に引っ掛かっているときなので他の軸を少し動かすと動きやすい		

	制限角度設定ダイアログのアップデート
		CopyToSymBoneボタンとCopyFromSymBoneボタンを追加
		CopyボタンとPasteボタンを追加

	リグマークが大きすぎたので修正
		指先に表示されても邪魔にならないくらいの大きさに統一

		手などはカメラの虫眼鏡ドラッグで大きく表示して操作することを想定

	ToolWndのプロパティボタンでモーション長を長くしたときに落ちる不具合を修正	


	リグ設定ダイアログの大きさと位置の修正


	ボクシング棒のサンプルに制限角度を付けた
	動画(35sec.)
	https://twitter.com/ochakkolab/status/1463335325355307013?s=20


	左右対称ジョイント名の規則
		ジョイントの名前がLeft$1とRight$1の場合
		あるいは
		ジョイントの名前が$1_L_$2と$1_R_$2の場合



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/23_1
	ver1.0.0.21へ向けて

	コピー履歴の時間比較をローカルタイムで統一
		GUI指定のローカルタイムとファイルのシステムタイムを比較していたのを修正

	４KTV以外で表示した時のRigマークが大きすぎたのを修正
		Rigマークはモデルの大きさに対する比率で表示し、その比率はディスプレイの大きさに関係無し


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/22_2
	ver1.0.0.21へ向けて

	モーション再生を高速化
		モーションポイント検索関数をチェイン方式からインデックス方式に変更続き
			モーションIDごとにインデックス作成
			モーション読み込み時などインデックスの準備が出来ていないときにも対応


	リターゲットバッチテスト
		OK


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/22_1
	ver1.0.0.21へ向けて

	モーション再生を高速化
		モーションポイント検索関数をチェイン方式からインデックス方式に変更


	リファレンスポーズ軌跡表示機能の高速化
		必要最小限のHierarchyRouteの姿勢だけ計算


	リファレンスポーズ軌跡表示機能はデフォルト状態でオフ
		３DウインドウのGUIスプライトスイッチでオンオフ

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/19_1
	MotionBrush ver1.0.0.20正式版


	基本機能のテストアンドデバッグ
		RigモードでRigオブジェクトをマウスでドラッグした際に選択ボーンの更新がされなかった不具合を修正

		マニピュレータの大きさ調整
			単純にモデル全体のバウンダリー半径に対する比率にしました

	制限角度モーションプレビュー対応のテスト動画
		https://twitter.com/ochakkolab/status/1461487698229612545?s=20


	(最新exeは付いていません)


2021/11/19_1
	ver1.0.0.20へ向けて

	制限角度ダイアログのアップデート
		各軸の制限角度スライダーの下に現在のチェックをするためのスライダーを設置
		チェックスライダーはタイムラインをマウスで操作した結果を反映する
		チェックスライダーは参照用で操作用ではない

		制限角度反映はモーションの元のデータを上書きせずに行うので
		制限角度をきつくして動かした後に制限角度を緩くすると緩い制限角度で動きます


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/18_1
	ver1.0.0.20へ向けて

	制限角度ダイアログのアップデート
		IK操作時だけではなくプレビュー時(モーション再生時)にも制限角度を反映するようになりました

		プレビュー時の制限角度反映は元のデータを上書きせずに行いますので
		制限角度をきつくして動かした後に制限角度を緩くすると緩い制限角度で動きます

		設定した制限角度はプロジェクト保存時にlmtファイルとして保存されます


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/17_1
	ver1.0.0.20へ向けて

	LimitEulerダイアログのアップデート
		各軸の制限角度スライダーの下に回転可動チェックするためのスライダーを設置
		チェックスライダーの右横のApplyチェックボックスにチェックするとスライダーを動かすことが出来る
		チェックスライダーはタイムラインをマウスで操作した結果も反映する
		チェックスライダーはプレビュー中は動かない

		チェックスライダーは設定時のチェック用でありリアルタイム用なのでlmtファイルには変更なし
	
		*LimitEulerダイアログもオイラーグラフもIK操作を仮定して使いやすいようにしている
		クリックしたジョイントの親のジョイントのオイラー角度と制限角度を表示している
	
		テスト動画
		https://twitter.com/ochakkolab/status/1460873862808162308?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/16_3
	ver1.0.0.20へ向けて

	物理シミュレーション用のサンプル追加
		Test/shadowBoxing20211116_6
		chaファイルを読み込んでBtStartボタンを押すと始まります

		こちらでシミュレーションした時の動画リンク
		https://twitter.com/ochakkolab/status/1460543856571654152?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/16_2
	ver1.0.0.20へ向けて

	物理シミュレーション再生のスタート時に物理をリセット
		モーションの最終フレームから最初のフレームにジャンプすると物理が動かなくなる症状に対応


	4Kテレビ対応時のウインドウの大きさを修正


	モーションの最初のフレームは０ではなく１
		０フレームは特別な役目を持つバインドポーズ
	

	プロジェクトオープンダイアログの履歴表示件数を５件から１０件に


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/16_1
	ver1.0.0.20へ向けて

	Windows11対応
		Windows11でテスト
		ダイアログの大きさ調整

	ウインドウの大きさ調整とウインドウの大きさに関するリファクタリング


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/14
	おちゃっこLAB日記：Unity上でVRoidモデルにモーキャプデータを再生させる方法
	https://ochakkolab.jp/diary_win.html#MotionBrush_20211114

2021/11/11_2
	ver1.0.0.19正式版


	RigidWindowの修正
		ThicknessToAllボタンが押せなかったのを修正
	
	コピー履歴ウインドウでラジオボタンを押してコピーを選択したときの処理を修正
		OKボタンを押さなくてもコピー選択処理


	基本機能を一通りテスト

		
	(最新exeは付いていません)

2021/11/11_1
	ver1.0.0.19RC3


	マニピュレータとRig操作用オブジェクトの大きさ調整
		モデルデータの大きさに対する比率を保つようにしました

	マウス中ボタン＋ホイールでフレーム選択した時にブラシが設定されない不具合を修正



	TestAndDebug中(今度こそたぶんver1.0.0.19正式版)

		
	(最新exeは付いていません)


2021/11/09_3
	ver1.0.0.19RC2


	再生停止時のフレーム選択修正
	マウスホイール選択修正
	中ボタン＋マウスホイール選択修正


	TestAndDebug中(たぶんver1.0.0.19正式版)

		
	(最新exeは付いていません)

2021/11/09_3
	ver1.0.0.19RC1


	コピー履歴ダイアログ、軸指定ダイアログ、リグ設定ダイアログの表示位置をサイドウインドウの位置に



	TestAndDebug中


		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/09_2
	ver1.0.0.19へむけて


	履歴ファイルが１つもなかった場合の処理を修正		

	１フレーム長選択が可能に
		ToolWindowのボタンで１フレームだけの姿勢初期化も可能

	解像度によっては
	Leftプレートを押したときのGUIコントロールの上下位置がおかしかったのを調整


	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	

2021/11/09_1
	ver1.0.0.19へむけて


	解像度が４K対応かどうかをチェックして
	4K対応の場合には自動的にウインドウサイズを大きくすることにしました


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/08_3
	ver1.0.0.19へむけて


	オプション追加
	DoubleWinSize.hをmain.cppとOrgWindow.hで読み込むと
	ウインドウサイズが縦横２倍になるようにしました

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/08_2
	ver1.0.0.19へむけて

	サンプルのyuriちゃんの左手とマテリアルをmaya2022で修正
	修正したfbxにMotionBrushでモーションをリターゲット
	Testフォルダのサンプル更新
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/08_1
	ver1.0.0.19へむけて

	リグの設定画面の操作用表示位置にオプションとして位置反転チェックボックスを追加
		各軸のマイナス側に操作用オブジェクトを表示


	サンプルのrigファイル更新


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/07_2
	ver1.0.0.19へむけて

	ジョイント右クリックのCreateNewRigメニューが機能しなくなっていたのを修正

	サンプルのrigファイル更新


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/07_1
	ver1.0.0.19へむけて

	リグモード仕様変更
		Rigをオンオフするためのスプライトボタンは常に表示
		Rigをオンにした時には設定済のすべてのリグを表示
		表示してあるRigはマウスでドラッグ可能
		Rigの設定項目にXYZの軸と0,1,2のジョイントからの距離を追加

	*rigの設定の仕方は以前と同じ
		設定したいジョイントを右クリックでRigのメニューを実行


	テスト動画
	https://twitter.com/ochakkolab/status/1457216434463903746?s=20

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/06
	ver1.0.0.19へむけて

	リファレンスポーズジョイント位置軌跡機能修正
		オンオフ用のスプライトスイッチ追加
		リファレンスポーズはライティング無しのdiffuse色表示で見やすく


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/11/05
	ver1.0.0.19へむけて

	リファレンスポーズジョイント位置軌跡機能
		マウスで複数フレームを選択
		RefPosスライダーでリファレンスポーズのフレームを決定
		RefPosスライダーの１つしたのスライダーでジョイント位置軌跡の太さを決定
		階層エディタでジョイントを選択するとそのジョイントの軌跡が表示される
		IK操作中にブラシの比率によってリファレンスポーズもリアルタイムで変化

		軌跡の太さはフレーム間の移動の長さの程度を意味する
		
		
		テスト動画
		https://twitter.com/ochakkolab/status/1456544566698405890?s=20


	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/11/04_2
	ver1.0.0.19へむけて

	ゲームパッドDualSenceが接続されていない場合
		キーボードの矢印キーで階層構造エディタの選択移動
		上下矢印はペアレント、チャイルドへの移動
		左右矢印はシスター、ブラザーへの移動
			シスター、ブラザーの選択は階層構造的分岐点である場合には分岐間移動
			階層構造的に分岐点ではない場合には名前の中のLeftとRightを置き換えてその名前のボーンがあればそこに移動
			(例：LeftKnee_JointからRightKnee_Jointへ選択移動)

	少ししかテストしていないdevelop版

	(最新exeは付いていません)




	ver1.0.0.18のテスト結果の一部
		MotionBrushのfbxをUnity3D 2020.3で読み込み再生テストのスクリーンショット
		https://twitter.com/ochakkolab/status/1455366755623202819?s=20

		Unity3D上でVRoid正式版のvrmにMotionBrushのfbxモーションをリターゲットしたテスト動画
		https://twitter.com/ochakkolab/status/1455745440763187202?s=20

2021/11/04_1
	ver1.0.0.18RC1

	TestAndDebug
		IKモードを変えるためのスプライトボタンを押した際に
		オイラーグラフが更新されない不具合修正

		タイムライン上でSキー+マウスホイールでスクロールする場合に
		タイムラインだけスクロールしてオイラーグラフがスクロールしていない不具合修正


	表示-->設定パネルメニューで出るダイアログの背景色にグレー(Gray)を追加


	(最新exeは付いていません)

2021/11/01_1
	ver1.0.0.18へむけての続き


	SpriteFKプレートを押したときのスプライトボタンを一新
		カメラ操作とボーン操作のボタンの違いが一目瞭然に
		リグを使用するとリグのボタンも出ます（使用しないと出ません）


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/31_3
	ver1.0.0.18へむけての続き

	コピー履歴選択機能修正
		検索年月日範囲の時間を
		開始年月日の0:00、終了年月日の23:59にしました。
		開始年月日と終了年月日を同じにするとその日一日の間の履歴がヒットします。

		
		ただしダイアログコントロールの年月日にはすべての月に対して３１日まであります
		### カレンダーをみながら使用してください ###


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/10/31_2
	ver1.0.0.18へむけての続き

	コピー履歴選択機能とりあえず完成
		2021/10/31_1の機能に更に履歴検索機能を追加しました
		
		fbx名、motion名、bvhタイプ、年月日の範囲で検索可能
		
		ただしダイアログコントロールの年月日にはすべての月に対して３１日まであります
		### カレンダーをみながら使用してください ###


	少ししかテストしていないdevelop版

	(最新exeは付いていません)



2021/10/31_1
	ver1.0.0.18へむけての続き

	コピー履歴選択機能更新中（!!! UnderConstructing !!!）
		コピーをするときにコピー結果に対してコメントを入力するダイアログが出ます

		ToolWindowのコピー履歴選択ボタンを押したときに
		コピー時に入力したコメントも表示されます
		他にもfbx名、motion名、開始フレーム番号、コピーフレーム数が自動的に表示されます

		
		ダイアログに一番下の　最新のコピーを選択(select the most recent one.)にチェックを入れると
		ラジオボタンで何を選んでいても常に最新のコピー結果がペースト時に使用されます

		最新のコピーを選択(select the most recent one.)にチェックを外して
		コピー日時を選択すると
		ペーストの度に選択した日時のコピー結果がペーストに使用されます			

		

		履歴の検索機能は次回以降に付けます
			ダイアログにボタン位置の予約だけしてあります



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/28_2
	ver1.0.0.18へむけての続き

	コピー履歴選択機能追加
		ToolWindowのコピー履歴選択ボタンを押すと履歴選択ダイアログが出ます
			ダイアログに一番下の　最新のコピーを選択(select the most recent one.)にチェックを入れると
			ラジオボタンで何を選んでいても常に最新のコピー結果がペースト時に使用されます

			最新のコピーを選択(select the most recent one.)にチェックを外して
			コピー日時を選択すると
			ペーストの度に選択した日時のコピー結果がペーストに使用されます			



	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/28_1
	ver1.0.0.18へむけて

	ロングタイムライン上で
		マウスホイール：時間カーソル
		Sキー＋マウスホイール：時間カーソルがはみ出ない範囲で時間表示範囲を左右にスクロール、選択はそのまま。


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/27_2
	ver1.0.0.17確定版

	motion cache batchメニューを削除
		egpキャッシュファイルが不要になったため

	スケール設定後の保存と読み込みテスト
		スケール設定時の移動成分もチェック

		Maya2022でも正常に読み込み
		

	Toolウインドウの姿勢の初期化のInitScaleの修正とテスト
		スケールの初期化が正しくなりました
		スケール設定してある場合の回転と移動の初期化も正しくなりました
	
	bvh2Fbx batchメニュー、Retarget batchメニュー実行テスト

	モーションブラシによるIK操作テスト

	物理シミュレーションテスト


	(最新exeは付いていません)

2021/10/26_3
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D



	CModel::GetFbxAnim関数に姿勢計算についてのコメント分追加


	ツールウインドウの姿勢初期化ボタンのInitScaleメニュー実行についての修正
		スケールの初期化も正しくなりました

	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/26_2
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D

	fbxファイルのモーション読み込みを書き直し
		ローカル情報からグローバル姿勢を組み立てることに成功

		egpキャッシュファイルは不要に

		スケール設定した時の姿勢が正しくなった
			2021/10/26_1のバージョンはスケール設定時の移動成分の "読み込み" が間違っていた
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/26_1
	ver1.0.0.17に向けての続き

	develop版(非リリース版)　MameBake3D


	EvaluateGlobalPositionキャッシュファイルEGP ver0.0.0.2
		FbxAMatrixを書き出すのをやめてChaMatrixを書き出し
		
		ファイルサイズがヘッダ情報と合わずに
		キャッシュが不正扱いされて使えないことがあったがFlushとSetEndOfFileを加えることで直った	
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/25
	ver1.0.0.17に向けて

	develop版(非リリース版)　MameBake3D

	スケールアニメを設定してあるfbxを読み込んだ時にスケールが正しくない不具合を修正
		症状
			ver1.0.0.16でスケール設定をして保存したfbxファイルはMaya2022で正しく読み込めました
			しかしMameBake3D(MotionBrush)で読み込むとスケールが間違っていました
		対処
			読み込み処理を修正

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/20
	ver1.0.0.16確定版

	OrgWindowの色を調整
		スクロールバー
		ツリービューのラインの選択色

	ゲームパッド仕様修正：
	メインウインドウのプレート上で〇ボタンを押したときには
	マウスがコントロール位置へジャンプしないように

	テスト

	#####################################################################
	最新exeは付いていません
	最新exeは2021/10/27夕方 ver1.0.0.16 ベクター様のサイトにて公開　予定
	https://www.vector.co.jp/soft/winnt/art/se523002.html
	#####################################################################

2021/10/19_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D



	ModelPanel, MotionPanelの表示非表示に関する不具合修正

	ModelPanel, MotionPanelの起動後の表示位置を保持するように


	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/19_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D


	VisualStudio2019のビルドセッティングを修正 ４
		実行速度優先設定
		libのサイズもsmaller

	リターゲット関数をmain.cppからMameBake3DLibのRetarget.h, Retarget.cppに移動

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_4
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正 ３
		BulletPhysicsLibプロジェクトをadd
		bulletのソース位置はそのままでstatic libraryプロジェクト化
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_3
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正 ２
		bullet physicsの多重定義警告の原因判明
		btBulletCollisionAll.cpp, btBulletDynamicsAll.cpp, btLinearMathAll.cppを
		プロジェクトから除外
		リンク時警告がほとんど出なくなった
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	VisualStudio2019のビルドセッティングを修正
		libfbxsdk-md.libではなくlibfbxsdk.libをリンク
		exeサイズが7MB分小さく
		(動作が軽くなった？)
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/18_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D




	ブラック(black)


		
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/17_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	Update VisualStudio BuildSettings
		FBX SDKへのリンクが古いものが混ざっていたのをFBXSDK2020.2に修正
		デバッグビルドがビルドできなくなっていたのを修正

	OrgWindow
		for分の条件文でstlを宣言するのを止めてforの外で宣言
		Listnerの初期値をdummyfuncからNULLに変更
		ifの条件に()を出来る限り付けた
		基底クラスのコンストラクタ呼び出しミスを修正

	CRetargetFile
		基底クラスのコンストラクタ呼び出しミスを修正
		
	ModelPanel, MotionPanel
		連続して消すと落ちることがある不具合を修正
		連続して選択を切り替えると落ちることがある不具合を修正
		
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/17_1
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D


	strlen ,wcslenを呼ぶ前に文字列を終端


	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/16_2
	ver1.0.0.16に向けての続き

	develop版(非リリース版)　MameBake3D

	マテリアルのShininess (power)処理修正
	サンプルC3, C4 保存し直し
	yuriちゃんデータのライティングをMaya2022で確認
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/16
	ver1.0.0.16に向けて

	develop版(非リリース版)　MameBake3D

	警告(C26451)が出ていたポインタオフセット計算をsize_tに

	保存したfbxをMaya2022で開いた時のマテリアルが白すぎてライティングが分からなかったのを修正
	マテリアルのAmbientFactorを1.0から0.1に
	マテリアルのEmissiveFactorを0.1に
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/13
	develop版(非リリース版)　MameBake3D

	リターゲットバッチを実行した後、モデルパネルが表示されない不具合を修正

	OrgWindowのNULLチェック追加
	

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/12_1
	develop版(非リリース版)　MameBake3D

	ModifyEulerXYZによる180度裏返り補正はbvhファイルをfbxファイルに変換するときのみ実行
	多重回数裏返り処理防止によりIK操作時に瞬時にボーンが180度裏返る現象が無くなった

	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/12_1
	develop版(非リリース版)　MameBake3D

	T+Wheelモードが終了しない不具合修正
	(ブラシ適用位置が更新されなくなっていました)

	モーションパネルでモーション選択が常に初期化されていた不具合修正
	
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/11_2
	develop版(非リリース版)　MameBake3D

	ジョイントを選択した後、Tキーを押しながらマウスホイールでボーン軸のツイスト回転
	SelectJoint-->T Key + MouseWheel --> BoneAxisTwist

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/11_1
	develop版(非リリース版)　MameBake3D

	モーションキャプチャファイルbvhを扱う際に姿勢が180度裏返ることがあったのを修正
	足が180度近く上がったときなどに症状が出ていました
	Explain about ModifyEulerXYZ.
	https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20211010

	表示(disp)-->モデルパネル(model)メニューで表示されるモデルパネルに
	deleteボタンを追加しモデルの削除をパネルから行えるようにしました

	表示(disp)-->モーションパネル(motion)メニューでモーションパネルを表示
	deleteボタン付き

	トラブルシューティングの
	MotionBrushのマニピュレータの軸の向きは合っているのか.docxを更新

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/10
	develop版(非リリース版)　MameBake3D

	Explain about ModifyEulerXYZ.
	https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20211010
	
2021/10/06
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		今までで一番良い出来　試行錯誤の結果をまとめて書き直した

		Best_ModifyEulerXYZ_RecapTheResultOfTrialAndError
		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/04
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		呼び出し側でBEFEUL_BEFFRAME指定
		
		180度以上回転するとうまく行かない部分が出てくるが
		本筋が分かりやすくなりツールの補間で比較的簡単に修正可能
		モーキャプデータ修正作業は無くならなかった
		
	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/04
	develop版(非リリース版)　MameBake3Dアップデート

	ModifyEulerXYZ改良
		180度チェックをそれぞれの軸に対して行うことが出来た
		(比較的)安定（今はこれ以上は難しい）

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/10/03
	develop版(非リリース版)　MameBake3Dアップデート

	2021/09/30_1と2021/10/01で生じた不具合の修正
		オイラー角のXとZが入れ替わる不具合修正
		履歴ファイル名の変更に対応できていない不具合修正
	
	ModifyEulerXYZにおける試行錯誤
		(比較的)安定（今はこれ以上は難しい）


	少ししかテストしていないdevelop版

	(最新exeは付いていません)


2021/10/01
	develop版(非リリース版)　MameBake3Dアップデート

	VisualStudioが出力する膨大な量のwarningを解決する作業開始の続き
		bullet physicsのコンパイル時警告を解決
		対応した警告は主に以下の３つ
			1. 未初期化変数使用警告
			2. NULLポインタ警告
			3. バッファーオーバーラン警告
		その他の警告は無視する設定
			例えば異なるスコープで同名変数をわざと使用している箇所への警告や
			暗黙の型変換をわざと使用している箇所への警告は無視する設定にしました

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/09/30_1
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalc::ModifyEulerXYZ更新
		モーションキャプチャデータの末端のボーン例えばつま先(toe)のボーンが裏返るのを防止するコードを追加

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/09/28
	develop版(非リリース版)　MameBake3Dアップデート

	CPolyMesh3::m_n3pを構造体からクラスに変更しDestroyObjsで警告が出ないように

	ChaVecCalc::ModifyEulerXYZの内容を新しく
		９０度以上回転した時にも以前よりもオイラーグラフのラインが本筋ラインにラインに

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/27
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalcの途中計算をdoubleに	

	VisualStudioが出力する膨大な量のwarningを解決する作業開始
		bullet physicsの部分以外はほぼ解決？

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/22
	MotionBrush ver1.0.0.14

	大きいフレーム番号を複数フレーム選択した状態で小さいフレーム数のfbxを読み込むとエラーで落ちる不具合を修正

	fbx読み込みエラーのときの処理を修正

	モーション編集時にinfoウインドウに表示するオイラー角はアプライフレーム(TopPosフレーム)だけ表示するように修正
		infoウインドウのオイラー角とオイラーグラフの一致が分かりやすくなりました

	モーションの名前を一括で設定するためのファイルを追加
		MotionNameListFile、拡張子は*.mnl
		Fileメニューからの読み書きに対応
		使い方
			model-->selectメニューでモデルを選択
			File-->Save-->MotionNameListFile(*.mnl)メニューでmnlファイルを書き出し
			書き出したmnlファイルのモーション名を編集
			File-->Openメニューを実行しダイアログの参照ボタンを押し、拡張子リストで*.mnlを選択
			先ほど編集した方のmnlファイルを選択して読み込む

	補足
		リターゲットバッチ手順が分かりにくかったようなので補足
		形状側のプロジェクトを読み込み、適用される側のモデルをmodel-->selectメニューで選択
		bvhから作ったfbxが入っているディレクトリにretarget.rtgファイル(名前の対応表のファイル)を１つ配置する
		File-->Retarget batchメニューを実行しbvhから作ったfbxファイルが入っているディレクトリを指定
		長いキャプチャデータをたくさん読み込むにはかなりのメモリを使います。
		数千フレームフルフレーム(再生時間にして約１分)のキャプチャデータを４０個ほど読むにはメモリを十数GB以上(MotionBrush.exeとしての使用量)使うこともあります。
		コンピュータのメモリ搭載量などを考慮してディレクトリに入れるfbxの数を調整してください。

	補足その２　モーションの順番は変わることがある件
		読み込み済のモーションはmotion-->selectメニュー実行時のドロップダウンリストに表示されます。
		このドロップダウンリストに表示されるモーションの順番は変わることがあります。
		どういう場合に変わるかというと
		リターゲットバッチを実行した後の状態とそれを保存した後の状態とでモーションの順番が変わります。
		リターゲットバッチを実行した直後のモーションの順番は読み込み順です。
		fbxに保存するときのモーションの順番はモーション長が短いものから先に保存します。
		よってリターゲット直後とそれを保存した後ではモーションの順番が変わることがあります。

2021/09/15
	MotionBrush ver1.0.0.13

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなることがある不具合の更なる調査の結果
		マウスレスポンスが悪くなった場合、
		それぞれのMotionBrushのタイトルバーの文字の部分つまりMotionBrush ver1.0.0.13 No.* :と書いてある文字の上をクリックすることにより
		いまのところ１００発１００中の確率でマウスに対して応答がありました
		タイトルバーの文字の上をクリックしてください

	拡大縮小モーションを編集可能に
		3DウインドウのIKRot, IKMove, IKScaleのコンボボックスからIKScaleを選択すると拡大縮小編集モード
		操作方法：
			IKScaleモードにてマニピュレータの中央をドラッグする場合
				XYZ各軸の内一番大きい移動量の移動方向がプラスなら全軸均等拡大、一番大きい移動量の移動方向がマイナスなら全軸均等縮小
			IKScaleモードにてマニピュレータの各軸をドラッグする場合
				ドラッグした軸の移動方向がプラスならドラッグ軸限定の拡大、移動方向がマイナスならドラッグ軸限定縮小
				 
	RigidParams剛体設定ウインドウの調整
		ボタン１つで全ての剛体に設定するToAllボタンをそれぞれの項目の下に色を変えて配置

	リターゲットウインドウのジョイント対応付けボタンを押しても候補のドロップダウンリストが出てこなくなっていた不具合を修正
	(Retarget batch機能とrtgファイル読み込みでのリターゲットは動いていました)

	編集したモーションを確認しやすく（フレーム選択を解除せずに編集結果をゆっくり確認）
		ロングタイムラインウインドウのプレイヤーボタンに"１"ボタンを追加
		"１"ボタンを押すたびに1fps-->2fps-->通常モードに切り替わり３Dウインドウにテキスト表示されます。
		プレイヤーボタンの再生ボタンを押すと機能します。
		再生を停止すると複数フレーム選択が復元されます。

	MotionBrush.exeが置いてあるディレクトリにデバッグ情報出力用のdbg.txtとinfo*.txtがあります
	MotionBrushC4.exeから複数のMotionBrush.exeを立ち上げた場合に
	それぞれのMotionBrush.exeで異なる名前のファイルを出力するようにしました


	ワンポイント
		fbxが更新されるような操作をした後(プロジェクトファイルやfbxを保存した時、bvhからfbxを作った後など)には
		fileメニューのMotionCache(egp)batchメニューを実行する(この操作完了には時間がかかるが、その後の読み込み時間が何倍にも速くなる。)

2021/09_2
	MotionBrush ver1.0.0.12

	IKモードがIKRotの場合にはオイラーグラフ、IKMoveの場合には位置グラフを表示
	
	プレイヤーボタンにオイラーグラフ操作ボタン(拡大縮小、オフセット上下、リセットのボタン)を追加

	一番親のジョイントをドラッグした場合にもモーション編集可能に

	オープンファイルダイアログのデフォルトディレクトリをサンプルが置いてあるTestディレクトリに

	MotionBrushC4.exeを使う場合にはゲームパッド対応無し
	MotionBrushC4.exeからMotionBrush.exeを複数立ち上げた直後のマウスレスポンスが更に改善

	ver1.0.0.12動画
	https://youtu.be/Ml85Avo0vjw

2021/09_1
	MotionBrush ver1.0.0.11

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなる不具合を修正
	ゲームパッド対応を１つのMotionBrush.exeに限定することで大分改善しました。

		しかしそれでもMotionBrushC4.exe起動直後にマウスレスポンスが悪くなることはたまに起きました。
		その場合の対応として以下の３つのことをしました。
		以下の３つのことをすれば大抵の場合マウスを受け付けるようになりました。
		１，MotionBrush.exeを単体で起動して終了してからMotionBrushC4.exeの起動を試す。
		２，MotionBrushC4.exeを起動してからしばらく待つ(10秒間とか20秒間とか)
		３, 複数個あるMotionBrush.exeのタイトルバーとメニューバーと黒いウインドウ（３Dウインドウ）をクリックする
		４，それでもマウスを受け付けない場合にはMotionBrushC4.exeを起動しなおす

	タイムラインのキーオブジェクトもメモリ使いまわし方式に。

	メモリ使いまわし部分デバッグ

	モーション数が多いfbxの読み込みを更に少し高速化

	モーションメニューからのモーションの選択の高速化、アンドゥの高速化
	モーション選択とアンドゥ時の待ち時間がほとんど無くなりました。

	モーションメニューの編集中のモーションを削除機能のデバッグ


2021/08_2
	MotionBrush ver1.0.0.10
		完成版ver1.0.0.9のデバッグ版
	
	ver1.0.0.9での最適化高速化の際に生じた不具合を修正
		フレームの選択範囲とモーションブラシの選択範囲がずれる不具合がありました
		モーションメニューからモーションを選択すると直るのですが
		プログラムの不具合を修正しました

	保存するたびにマテリアル名の後ろに数字がたくさんついていく不具合を修正
		マテリアル名の後ろに１つだけ _数字 を付けます

	*.rtgファイルと*.tboファイルのver1.0.0.7からver1.0.0.9のどれでも読み込めるようにしました

2021/08
	MotionBrush ver1.0.0.9
		完成版ver1.0.0.7の読み込み最適化高速化版

	こちらの環境にて
		２０００フレームとか５０００フレームの38個のモーキャプデータ入りのfbxファイル読み込み時間が
		ver1.0.0.8では１６分かかっていたのが５５秒で読み込めるようになりました。（両方ともegpファイル有で比較）

	ワンポイント
		物理シミュレーション中には読み込んでいるすべてのモデルがシミュレーション対象になります。
		bvhからfbxにしたものを読み込んでいると姿は見えませんがシミュレーションしています。
		物理シミュレーションが遅い場合にはこのことを疑ってください。
		chaファイルをコピーしてバックアップした後、テキストエディタで開き、
		CharaNumの値を１にしてゆりちゃん以外のCharaチャンクを消して保存しそれを読み込むと上記への対策が出来ます。

	動画追加
		動画【モーションツール】ver1.0.0.7完成版のいいところ【完成しますた】
		https://youtu.be/nApvd9___mQ

	関連日記
		https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20210718

2021/07/21
	MotionBrush ver1.0.0.8
		完成版ver1.0.0.7のデバッグ版

	デバッグ
		リターゲットバッチが落ちやすすぎるので落ちないように。
			処理中はGUI表示をオフにしました（バッチ処理中にキラキラしなくなりました）。

	ワンポイント
		前からですが
		フレームを１フレームずつマウスで変化させたい場合には
		マウスをロングタイムラインに当ててctrlキーを押しながらマウスホイールを回します。

2021/07/07
	MotionBrush ver1.0.0.6にてMotionBrush完成！！
	モーションキャプチャファイルの任意のボーンの任意の連続複数フレームのモーションを任意の連続複数にコピーペースト可能
	これが私が思う最強のモーション編集ツール！！！



	モーションのコピーとモーションのペーストとで指定フレーム数が異なっていてもコピーペースト可能。

	２個のMotionBrush.exeを立ち上げて
	片方でモーションのコピーを行い、他方へモーションのペーストをすることが可能です。

	コピーの前にオペレーションターゲットボーンツリーを選択可能なので
	任意のボーンのモーションのコピーペーストが出来ます。
	オペレーションターゲットボーンの指定はペースト時に適用されます。

	オペレーションターゲットボーンはToolWindowのコマンド対象ボーンボタンを押して出てくるダイアログにて保存読み込み可能
	オペレーションターゲットボーンツリーには１０個のスロットが用意されていてコンボボックスでスロット切り替え可能です。


2021/06/24
	OSS版より（もっと）進歩させるために
	バージョンアップしました

	ブラシをプラグインdll化
		MotionBrushPlusinsSDKを同梱
		サンプルとして-CosXブラシ、-CosX^2ブラシ、Sawブラシ、RectブラシをOSSにて同梱
		選択フレームの個々のフレームにおけるIK操作結果に対する重みをカスタマイズ可能
		
	ブラシのオプション指定用のGUIを修正追加
		ブラシコンボボックスはBrushesFolderの中のdllを読み込んで自動的に設定
		ブラシトップ位置指定スライダー
		ブラシ繰り返し回数指定スライダー
		ブラシミラーUチェックボックス
		ブラシミラーVチェックボックス
		ブラシミラーVのオプションとしてDiv2チェックボックス

	ReadMeフォルダにMotionBrush_ExplainGraphOfBrushes.docxを追加
		モーションブラシがブラシであることの説明を書きました


2021/06/18 ver1.0.0.4
	ジョイントをマウスでドラッグするIK処理の処理速度が２０倍速になりました
		全てのフレーム（０フレームは除外することをお勧め）を選択してのIK操作がリアルタイムで可能
		bvhをリターゲットした後、全部れーむの腕の開き方を調整する際にもリアルタイムで編集可能

	ライセンス表記
		オープンソースのライセンスはLGPLです
		というように
		「オープンソースの」という断り書きを追加

	プライヤーボタン（ロングタイムラインの上に付いているラジカセ風ボタン）のデバッグ
		「| |」ボタンは現在のフレーム一から最後のフレームまでを１ボタンで選択するボタン
			選択が不完全だったのを修正

		「--」ボタンは物理シミュレーション中に押すと、物理のシミュレーションをしながら物理の揺れをリセットします
			機能していなかったのを機能するようにしました

		（　「--」ボタンの隣の２つの三角のボタンは選択範囲の履歴ボタンです　）


	今回のver1.0.0.4で
	MotionBrush単体プログラムとしては
	当面の間完成版という扱いになります（予定）


2021/06/10 ver1.0.0.3
	リターゲット設定ファイルの保存と読み込み
		GUIで設定したリターゲットのジョイント対応表をファイルに保存、読み込み可能。
		リターゲット設定ファイルの拡張子は".rtg"
		配布ディレクトリのRetargetSettigFileExampleに設定例有り。
		
	FileMenuにマルチスレッドバッチ処理メニューを３つ追加
		bvh2Fbx Batch
			bvhファイルが入っているディレクトリを指定して一括で変換。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Make MotionCacheFile Batch
			fbxファイルが入っているディレクトリを指定して一括処理。
			モーションキャッシュファイルegpを作成することにより読み込み速度は４倍ほど高速（こちらのテスト環境においては）。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Retarget Batch
			bvhから作ったfbxのモーションを読み込済の形状に対してリターゲット。
			fbxが入っているディレクトリを指定して一括処理。
			子供ディレクトリも再帰的に処理。
			fbxが置いてあるディレクトリにはretarget.rtgファイルが１つ配置されていることが必要。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。		

	オープン履歴機能修正
		bvh2FBXのときにはbvhの履歴を表示（*.chaファイルではなく）。

	ブロックアロケートメモリ機能のメモリ使いまわし部分を検証してデバッグ
		メモリの使いまわしが正常化。

	egpファイルと同様にlmtファイルについてもfbx内のコメントとlmtファイル内のコメントが一致した時だけ読み込むように。
		fbxのジョイント位置を変更しても反映されずに読み込まれる不具合解消。

	Testディレクトリのサンプルを更新
		新しいバージョンで保存し直し。


2021/05/29 ver1.0.0.2
	サンプルデータの足のジョイント位置がおかしかったので修正
	インストールに必要なVisualStudio2019ランタイムインストーラを同梱
	物理IKをした後にBtStartすると手の動きがおかしくなる不具合を修正

2021/05/19 ver1.0.0.1



