2021/09/30_1
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalc::ModifyEulerXYZ更新
		モーションキャプチャデータの末端のボーン例えばつま先(toe)のボーンが裏返るのを防止するコードを追加

	少ししかテストしていないdevelop版

	(最新exeは付いていません)

2021/09/28
	develop版(非リリース版)　MameBake3Dアップデート

	CPolyMesh3::m_n3pを構造体からクラスに変更しDestroyObjsで警告が出ないように

	ChaVecCalc::ModifyEulerXYZの内容を新しく
		９０度以上回転した時にも以前よりもオイラーグラフのラインが本筋ラインにラインに

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/27
	develop版(非リリース版)　MameBake3Dアップデート

	ChaVecCalcの途中計算をdoubleに	

	VisualStudioが出力する膨大な量のwarningを解決する作業開始
		bullet physicsの部分以外はほぼ解決？

	少ししかテストしていないdevelop版

	(最新exeは付いていません)
	
2021/09/22
	MotionBrush ver1.0.0.14

	大きいフレーム番号を複数フレーム選択した状態で小さいフレーム数のfbxを読み込むとエラーで落ちる不具合を修正

	fbx読み込みエラーのときの処理を修正

	モーション編集時にinfoウインドウに表示するオイラー角はアプライフレーム(TopPosフレーム)だけ表示するように修正
		infoウインドウのオイラー角とオイラーグラフの一致が分かりやすくなりました

	モーションの名前を一括で設定するためのファイルを追加
		MotionNameListFile、拡張子は*.mnl
		Fileメニューからの読み書きに対応
		使い方
			model-->selectメニューでモデルを選択
			File-->Save-->MotionNameListFile(*.mnl)メニューでmnlファイルを書き出し
			書き出したmnlファイルのモーション名を編集
			File-->Openメニューを実行しダイアログの参照ボタンを押し、拡張子リストで*.mnlを選択
			先ほど編集した方のmnlファイルを選択して読み込む

	補足
		リターゲットバッチ手順が分かりにくかったようなので補足
		形状側のプロジェクトを読み込み、適用される側のモデルをmodel-->selectメニューで選択
		bvhから作ったfbxが入っているディレクトリにretarget.rtgファイル(名前の対応表のファイル)を１つ配置する
		File-->Retarget batchメニューを実行しbvhから作ったfbxファイルが入っているディレクトリを指定
		長いキャプチャデータをたくさん読み込むにはかなりのメモリを使います。
		数千フレームフルフレーム(再生時間にして約１分)のキャプチャデータを４０個ほど読むにはメモリを十数GB以上(MotionBrush.exeとしての使用量)使うこともあります。
		コンピュータのメモリ搭載量などを考慮してディレクトリに入れるfbxの数を調整してください。

	補足その２　モーションの順番は変わることがある件
		読み込み済のモーションはmotion-->selectメニュー実行時のドロップダウンリストに表示されます。
		このドロップダウンリストに表示されるモーションの順番は変わることがあります。
		どういう場合に変わるかというと
		リターゲットバッチを実行した後の状態とそれを保存した後の状態とでモーションの順番が変わります。
		リターゲットバッチを実行した直後のモーションの順番は読み込み順です。
		fbxに保存するときのモーションの順番はモーション長が短いものから先に保存します。
		よってリターゲット直後とそれを保存した後ではモーションの順番が変わることがあります。

2021/09/15
	MotionBrush ver1.0.0.13

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなることがある不具合の更なる調査の結果
		マウスレスポンスが悪くなった場合、
		それぞれのMotionBrushのタイトルバーの文字の部分つまりMotionBrush ver1.0.0.13 No.* :と書いてある文字の上をクリックすることにより
		いまのところ１００発１００中の確率でマウスに対して応答がありました
		タイトルバーの文字の上をクリックしてください

	拡大縮小モーションを編集可能に
		3DウインドウのIKRot, IKMove, IKScaleのコンボボックスからIKScaleを選択すると拡大縮小編集モード
		操作方法：
			IKScaleモードにてマニピュレータの中央をドラッグする場合
				XYZ各軸の内一番大きい移動量の移動方向がプラスなら全軸均等拡大、一番大きい移動量の移動方向がマイナスなら全軸均等縮小
			IKScaleモードにてマニピュレータの各軸をドラッグする場合
				ドラッグした軸の移動方向がプラスならドラッグ軸限定の拡大、移動方向がマイナスならドラッグ軸限定縮小
				 
	RigidParams剛体設定ウインドウの調整
		ボタン１つで全ての剛体に設定するToAllボタンをそれぞれの項目の下に色を変えて配置

	リターゲットウインドウのジョイント対応付けボタンを押しても候補のドロップダウンリストが出てこなくなっていた不具合を修正
	(Retarget batch機能とrtgファイル読み込みでのリターゲットは動いていました)

	編集したモーションを確認しやすく（フレーム選択を解除せずに編集結果をゆっくり確認）
		ロングタイムラインウインドウのプレイヤーボタンに"１"ボタンを追加
		"１"ボタンを押すたびに1fps-->2fps-->通常モードに切り替わり３Dウインドウにテキスト表示されます。
		プレイヤーボタンの再生ボタンを押すと機能します。
		再生を停止すると複数フレーム選択が復元されます。

	MotionBrush.exeが置いてあるディレクトリにデバッグ情報出力用のdbg.txtとinfo*.txtがあります
	MotionBrushC4.exeから複数のMotionBrush.exeを立ち上げた場合に
	それぞれのMotionBrush.exeで異なる名前のファイルを出力するようにしました


	ワンポイント
		fbxが更新されるような操作をした後(プロジェクトファイルやfbxを保存した時、bvhからfbxを作った後など)には
		fileメニューのMotionCache(egp)batchメニューを実行する(この操作完了には時間がかかるが、その後の読み込み時間が何倍にも速くなる。)

2021/09_2
	MotionBrush ver1.0.0.12

	IKモードがIKRotの場合にはオイラーグラフ、IKMoveの場合には位置グラフを表示
	
	プレイヤーボタンにオイラーグラフ操作ボタン(拡大縮小、オフセット上下、リセットのボタン)を追加

	一番親のジョイントをドラッグした場合にもモーション編集可能に

	オープンファイルダイアログのデフォルトディレクトリをサンプルが置いてあるTestディレクトリに

	MotionBrushC4.exeを使う場合にはゲームパッド対応無し
	MotionBrushC4.exeからMotionBrush.exeを複数立ち上げた直後のマウスレスポンスが更に改善

	ver1.0.0.12動画
	https://youtu.be/Ml85Avo0vjw

2021/09_1
	MotionBrush ver1.0.0.11

	MotionBrushC4.exeで複数個のMotionBrush.exeを立ち上げた直後に
	マウスレスポンスが悪くなる不具合を修正
	ゲームパッド対応を１つのMotionBrush.exeに限定することで大分改善しました。

		しかしそれでもMotionBrushC4.exe起動直後にマウスレスポンスが悪くなることはたまに起きました。
		その場合の対応として以下の３つのことをしました。
		以下の３つのことをすれば大抵の場合マウスを受け付けるようになりました。
		１，MotionBrush.exeを単体で起動して終了してからMotionBrushC4.exeの起動を試す。
		２，MotionBrushC4.exeを起動してからしばらく待つ(10秒間とか20秒間とか)
		３, 複数個あるMotionBrush.exeのタイトルバーとメニューバーと黒いウインドウ（３Dウインドウ）をクリックする
		４，それでもマウスを受け付けない場合にはMotionBrushC4.exeを起動しなおす

	タイムラインのキーオブジェクトもメモリ使いまわし方式に。

	メモリ使いまわし部分デバッグ

	モーション数が多いfbxの読み込みを更に少し高速化

	モーションメニューからのモーションの選択の高速化、アンドゥの高速化
	モーション選択とアンドゥ時の待ち時間がほとんど無くなりました。

	モーションメニューの編集中のモーションを削除機能のデバッグ


2021/08_2
	MotionBrush ver1.0.0.10
		完成版ver1.0.0.9のデバッグ版
	
	ver1.0.0.9での最適化高速化の際に生じた不具合を修正
		フレームの選択範囲とモーションブラシの選択範囲がずれる不具合がありました
		モーションメニューからモーションを選択すると直るのですが
		プログラムの不具合を修正しました

	保存するたびにマテリアル名の後ろに数字がたくさんついていく不具合を修正
		マテリアル名の後ろに１つだけ _数字 を付けます

	*.rtgファイルと*.tboファイルのver1.0.0.7からver1.0.0.9のどれでも読み込めるようにしました

2021/08
	MotionBrush ver1.0.0.9
		完成版ver1.0.0.7の読み込み最適化高速化版

	こちらの環境にて
		２０００フレームとか５０００フレームの38個のモーキャプデータ入りのfbxファイル読み込み時間が
		ver1.0.0.8では１６分かかっていたのが５５秒で読み込めるようになりました。（両方ともegpファイル有で比較）

	ワンポイント
		物理シミュレーション中には読み込んでいるすべてのモデルがシミュレーション対象になります。
		bvhからfbxにしたものを読み込んでいると姿は見えませんがシミュレーションしています。
		物理シミュレーションが遅い場合にはこのことを疑ってください。
		chaファイルをコピーしてバックアップした後、テキストエディタで開き、
		CharaNumの値を１にしてゆりちゃん以外のCharaチャンクを消して保存しそれを読み込むと上記への対策が出来ます。

	動画追加
		動画【モーションツール】ver1.0.0.7完成版のいいところ【完成しますた】
		https://youtu.be/nApvd9___mQ

	関連日記
		https://moo-ochakkolab.ssl-lolipop.jp/diary_win.html#MotionBrush_20210718

2021/07/21
	MotionBrush ver1.0.0.8
		完成版ver1.0.0.7のデバッグ版

	デバッグ
		リターゲットバッチが落ちやすすぎるので落ちないように。
			処理中はGUI表示をオフにしました（バッチ処理中にキラキラしなくなりました）。

	ワンポイント
		前からですが
		フレームを１フレームずつマウスで変化させたい場合には
		マウスをロングタイムラインに当ててctrlキーを押しながらマウスホイールを回します。

2021/07/07
	MotionBrush ver1.0.0.6にてMotionBrush完成！！
	モーションキャプチャファイルの任意のボーンの任意の連続複数フレームのモーションを任意の連続複数にコピーペースト可能
	これが私が思う最強のモーション編集ツール！！！



	モーションのコピーとモーションのペーストとで指定フレーム数が異なっていてもコピーペースト可能。

	２個のMotionBrush.exeを立ち上げて
	片方でモーションのコピーを行い、他方へモーションのペーストをすることが可能です。

	コピーの前にオペレーションターゲットボーンツリーを選択可能なので
	任意のボーンのモーションのコピーペーストが出来ます。
	オペレーションターゲットボーンの指定はペースト時に適用されます。

	オペレーションターゲットボーンはToolWindowのコマンド対象ボーンボタンを押して出てくるダイアログにて保存読み込み可能
	オペレーションターゲットボーンツリーには１０個のスロットが用意されていてコンボボックスでスロット切り替え可能です。


2021/06/24
	OSS版より（もっと）進歩させるために
	バージョンアップしました

	ブラシをプラグインdll化
		MotionBrushPlusinsSDKを同梱
		サンプルとして-CosXブラシ、-CosX^2ブラシ、Sawブラシ、RectブラシをOSSにて同梱
		選択フレームの個々のフレームにおけるIK操作結果に対する重みをカスタマイズ可能
		
	ブラシのオプション指定用のGUIを修正追加
		ブラシコンボボックスはBrushesFolderの中のdllを読み込んで自動的に設定
		ブラシトップ位置指定スライダー
		ブラシ繰り返し回数指定スライダー
		ブラシミラーUチェックボックス
		ブラシミラーVチェックボックス
		ブラシミラーVのオプションとしてDiv2チェックボックス

	ReadMeフォルダにMotionBrush_ExplainGraphOfBrushes.docxを追加
		モーションブラシがブラシであることの説明を書きました


2021/06/18 ver1.0.0.4
	ジョイントをマウスでドラッグするIK処理の処理速度が２０倍速になりました
		全てのフレーム（０フレームは除外することをお勧め）を選択してのIK操作がリアルタイムで可能
		bvhをリターゲットした後、全部れーむの腕の開き方を調整する際にもリアルタイムで編集可能

	ライセンス表記
		オープンソースのライセンスはLGPLです
		というように
		「オープンソースの」という断り書きを追加

	プライヤーボタン（ロングタイムラインの上に付いているラジカセ風ボタン）のデバッグ
		「| |」ボタンは現在のフレーム一から最後のフレームまでを１ボタンで選択するボタン
			選択が不完全だったのを修正

		「--」ボタンは物理シミュレーション中に押すと、物理のシミュレーションをしながら物理の揺れをリセットします
			機能していなかったのを機能するようにしました

		（　「--」ボタンの隣の２つの三角のボタンは選択範囲の履歴ボタンです　）


	今回のver1.0.0.4で
	MotionBrush単体プログラムとしては
	当面の間完成版という扱いになります（予定）


2021/06/10 ver1.0.0.3
	リターゲット設定ファイルの保存と読み込み
		GUIで設定したリターゲットのジョイント対応表をファイルに保存、読み込み可能。
		リターゲット設定ファイルの拡張子は".rtg"
		配布ディレクトリのRetargetSettigFileExampleに設定例有り。
		
	FileMenuにマルチスレッドバッチ処理メニューを３つ追加
		bvh2Fbx Batch
			bvhファイルが入っているディレクトリを指定して一括で変換。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Make MotionCacheFile Batch
			fbxファイルが入っているディレクトリを指定して一括処理。
			モーションキャッシュファイルegpを作成することにより読み込み速度は４倍ほど高速（こちらのテスト環境においては）。
			子供ディレクトリも再帰的に処理。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。
		Retarget Batch
			bvhから作ったfbxのモーションを読み込済の形状に対してリターゲット。
			fbxが入っているディレクトリを指定して一括処理。
			子供ディレクトリも再帰的に処理。
			fbxが置いてあるディレクトリにはretarget.rtgファイルが１つ配置されていることが必要。
			オープン履歴機能付きで前回選択したディレクトリを次回のデフォルト状態に。		

	オープン履歴機能修正
		bvh2FBXのときにはbvhの履歴を表示（*.chaファイルではなく）。

	ブロックアロケートメモリ機能のメモリ使いまわし部分を検証してデバッグ
		メモリの使いまわしが正常化。

	egpファイルと同様にlmtファイルについてもfbx内のコメントとlmtファイル内のコメントが一致した時だけ読み込むように。
		fbxのジョイント位置を変更しても反映されずに読み込まれる不具合解消。

	Testディレクトリのサンプルを更新
		新しいバージョンで保存し直し。


2021/05/29 ver1.0.0.2
	サンプルデータの足のジョイント位置がおかしかったので修正
	インストールに必要なVisualStudio2019ランタイムインストーラを同梱
	物理IKをした後にBtStartすると手の動きがおかしくなる不具合を修正

2021/05/19 ver1.0.0.1



